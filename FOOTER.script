
*higan1_scroll
saveoff
skipoff
resettimer

~
	gettimer %0
	blt 0,0,640,480,0,%0/10,640,480
	wait 1
if %0<88700 jumpb
blt 0,0,640,480,0,8870,640,480
saveon
return
*higan2c_scroll
saveoff
skipoff
resettimer

~
	gettimer %0
	blt 0,0,640,480,0,%0/8,640,480
	wait 1
if %0<42376 jumpb
blt 0,0,640,480,0,5297,640,480
saveon
return







;*************************************************
;　BT用　変数指定用ルーチン
;　（グローバル変数　3500〜4000を使用可能）
;   (非グローバル変数　2300〜2499）
;*************************************************
*BT_DEF



;音楽室用
; ＢＧＭモード、変数エリアの宣言(変数３６００、３７００、３８００番台使用） 
numalias bgmm,50	;配列番号の指定
numalias bm_n,0 	;曲名
numalias bm_t,1 	;曲の時間指定（ミリ秒）
numalias bm_c,2 	;曲の割り当て番号（チャンネル）
numalias bm_r,3 	;ランダムモード用、チェック変数
numalias bm_k,4 	;怖い曲かどうかのチェック用変数
numalias bm_pa,5	;ファイルパスを入力した変数番号を入力

;numalias bgm_max,28 ;曲数
dim ?bgmm[200][10]

mov %0,3700
numalias bm_m,%0 : inc %0	;演奏モードの保持(0は一曲、１は順次、２はランダム、１０以上は特殊な切替）
numalias bm_one,0
numalias bm_junnji,1
numalias bm_rnd,2


numalias bm_p,%0 : inc %0	;演奏曲の曲番保持
numalias bm_pt,%0 : inc %0	;演奏中の時間保持
numalias bm_pt2,%0 : inc %0	;演奏中の時間保持
numalias bm_rnd_kazu,%0 : inc %0	;ランダムモード用、演奏曲数
numalias bm_rpi,%0 : inc %0	;リピートのオン、オフ
numalias bm_stop,%0 : inc %0	;演奏のオン、オフ
numalias bgm_max1,%0 : inc %0	;BGMの曲数
numalias bgm_max2,%0 : inc %0	;アンビエントが始まる番号
numalias bgm_furagu,%0 : inc %0 ;bgmモード、フラグ
numalias bgm_kowai_skip,%0 : inc %0 ;bgmモード、怖い曲をスキップするかどうかのチェック
numalias bgm_mood_kaijo,%0 : inc %0 ;BGMモード解除フラグ（１で解除）

numalias bgm_mood_1min,%0 : inc %0 ;1分モードのフラグ
numalias bgm_mood_demo,%0 : inc %0 ;デモモードのフラグ

numalias bgm_mood_demo_kaisuu,%0 : inc %0 ;デモモード、オープニングを一定回数毎に再生する為のチェック変数

numalias bgm_mood_turu_pettan_no,%0 : inc %0 ;ツルペッタンの曲番号
numalias bgm_mood_op_no,%0 : inc %0 ;OPムービーの番号（デモモードで使用）
numalias bgm_mood_op2_no,%0 : inc %0 ;OPムービー２の番号（デモモードで使用）
numalias bgm_mood_op3_no,%0 : inc %0 ;OPムービー３の番号（デモモードで使用）
numalias bgm_mood_ed_no,%0 : inc %0 ;EDの番号（デモモードで使用）
numalias bgm_mood_me1_no,%0 : inc %0   ;ME1
numalias bgm_mood_me1_btn_no,%0 : inc %0   ;ME1
numalias bgm_mood_me2_no,%0 : inc %0   ;ME2
numalias bgm_mood_me2_btn_no,%0 : inc %0   ;ME2

numalias bgm_mood_file_path_flg,%0 : inc %0 ;ファイルパスを取得するフラグ
numalias bgm_mood_sha_hoe_flg,%0 : inc %0 ;１だと紗音がほえ〜するようになる。
numalias bgm_mood_tyokuzenn_op_fede_skip,%0 : inc %0 ;直前がＯＰだったかどうかを判断するフラグ変数。
numalias bgm_mood_demo_zennkai_nagasita_op,%0 : inc %0 ;直前のＯＰがどれだったかを判断するフラグ変数。

numalias bgm_mood_page,%0 : inc %0 ;曲一覧ページ数。
numalias END_MUSIC_FLG,%0 : inc %0 ;音楽室追加告知フラグ


;システムボタン用割付
;mov %1,154
mov %1,184

numalias bgm_btn_ennsou,%1 : inc %1	 ;演奏
numalias bgm_btn_stop,%1 : inc %1	 ;停止
numalias bgm_btn_zennkyoku,%1 : inc %1	 ;全曲演奏
numalias bgm_btn_ranndamu,%1 : inc %1	 ;ランダム演奏
numalias bgm_btn_rpi,%1 : inc %1	 ;繰り返し演奏
numalias bgm_btn_kowai_skip,%1 : inc %1	 ;怖い曲を飛ばす
numalias bgm_btn_kowai_only,%1 : inc %1	 ;怖い曲だけ演奏
numalias bgm_btn_min,%1 : inc %1	 ;1分モード
numalias bgm_btn_demo,%1 : inc %1	 ;デモモード
numalias bgm_btn_title,%1 : inc %1	 ;タイトルへ戻る
numalias bgm_btn_next,%1 : inc %1	 ;曲一覧、ネクストページ
numalias bgm_btn_back,%1 : inc %1	 ;曲一覧、バックページ


numalias bgm_x,%1 : inc %1	 ;座標指定用変数
numalias bgm_y1,%1 : inc %1	 ;座標指定用変数
numalias bgm_y2,%1 : inc %1	 ;座標指定用変数
numalias bgm_y3,%1 : inc %1	 ;座標指定用変数



mov %1,40
numalias bgm_window_lsp,%1 : dec %1	 ;ウィンドウ枠用のスプライト番号

numalias bgm_btn_ennsou_lsp,%1 : dec %1	 ;演奏
numalias bgm_ennsou_lsp,%1 : dec %1	 ;演奏

numalias bgm_btn_zennkyoku_lsp,%1 : dec %1	 ;全曲演奏
numalias bgm_zennkyoku_lsp,%1 : dec %1	 ;全曲演奏

numalias bgm_btn_ranndamu_lsp,%1 : dec %1	 ;ランダム演奏
numalias bgm_ranndamu_lsp,%1 : dec %1	 ;ランダム演奏

numalias bgm_btn_stop_lsp,%1 : dec %1	 ;停止

numalias bgm_btn_rpi_lsp,%1 : dec %1	 ;繰り返し演奏
numalias bgm_rpi_lsp,%1 : dec %1	 ;繰り返し演奏

numalias bgm_btn_min_lsp,%1 : dec %1	 ;1分モード
numalias bgm_min_lsp,%1 : dec %1	 ;1分モード

numalias bgm_btn_demo_lsp,%1 : dec %1	 ;デモモード
numalias bgm_demo_lsp,%1 : dec %1	 ;デモモード

numalias bgm_btn_kowai_skip_lsp,%1 : dec %1	 ;怖い曲を飛ばす
numalias bgm_kowai_skip_lsp,%1 : dec %1	 ;怖い曲を飛ばす

numalias bgm_btn_kowai_only_lsp,%1 : dec %1	 ;怖い曲だけ演奏
numalias bgm_kowai_only_lsp,%1 : dec %1	 ;怖い曲だけ演奏

numalias bgm_btn_title_lsp,%1 : dec %1	 ;タイトルへ戻る

numalias bgm_btn_next_lsp,%1 : dec %1	 ;曲一覧、ネクストページ
numalias bgm_btn_back_lsp,%1 : dec %1	 ;曲一覧、バックページ

;曲情報表示用スプライト
numalias bgm_title_lsp,%1 : dec %1	 ;タイトル名
numalias bgm_sakka_lsp,%1 : dec %1	 ;作家名
numalias bgm_time_lsp,%1 : dec %1	 ;曲の長さ


;-----------------------------------------------------------
;時計処理用
mov %0,3900
numalias tmp,%0 : inc %0 ;作業用変数
numalias tmp1,%0 : inc %0 ;作業用変数
numalias tmp2,%0 : inc %0 ;作業用変数
numalias tmp3,%0 : inc %0 ;作業用変数
numalias tmp4,%0 : inc %0 ;作業用変数
numalias tmp5,%0 : inc %0 ;作業用変数
numalias tmp6,%0 : inc %0 ;作業用変数
numalias tmp7,%0 : inc %0 ;作業用変数
numalias tmp8,%0 : inc %0 ;作業用変数
numalias tmp9,%0 : inc %0 ;作業用変数
numalias tmp10,%0 : inc %0 ;作業用変数
numalias tmp11,%0 : inc %0 ;作業用変数
numalias tmp12,%0 : inc %0 ;作業用変数
numalias tmp13,%0 : inc %0 ;作業用変数
numalias tmp14,%0 : inc %0 ;作業用変数
numalias tmp15,%0 : inc %0 ;作業用変数

numalias ran,%0 : inc %0 ;作業用変数
numalias ran1,%0 : inc %0 ;作業用変数
numalias ran2,%0 : inc %0 ;作業用変数
numalias ran3,%0 : inc %0 ;作業用変数
numalias ran4,%0 : inc %0 ;作業用変数
numalias ran5,%0 : inc %0 ;作業用変数

numalias meta_tmp1,%0 : inc %0 ;メタ視処理用_作業用変数
numalias meta_tmp2,%0 : inc %0 ;メタ視処理用_作業用変数
numalias meta_tmp3,%0 : inc %0 ;メタ視処理用_作業用変数
numalias meta_tmp4,%0 : inc %0 ;メタ視処理用_作業用変数
numalias meta_tmp5,%0 : inc %0 ;メタ視処理用_作業用変数
numalias meta_tmp6,%0 : inc %0 ;メタ視処理用_作業用変数
numalias meta_tmp7,%0 : inc %0 ;メタ視処理用_作業用変数
numalias meta_tmp8,%0 : inc %0 ;メタ視処理用_作業用変数
numalias meta_tmp9,%0 : inc %0 ;メタ視処理用_作業用変数

numalias efe_spd1,%0 : inc %0 ;エフェクトスピード用変数
numalias efe_spd2,%0 : inc %0 ;エフェクトスピード用変数

numalias debag_save_no,%0 : inc %0 ;デバッグ用セーブ変数
numalias debag_save_count,%0 : inc %0 ;カウント
mov %debag_save_count,0
numalias debag_load_no,%0 : inc %0 ;デバッグロード用の変数を保持

numalias msp_l,883		;メタ世界、左立ち絵スプライト番号
numalias msp_l2,884		;メタ世界、左立ち絵スプライト番号
numalias msp_c,885		;メタ世界、真ん中立ち絵スプライト番号
numalias msp_c2,886		;メタ世界、真ん中立ち絵スプライト番号
numalias msp_r,887		;メタ世界、右立ち絵スプライト番号
numalias msp_r2,888		;メタ世界、右立ち絵スプライト番号
numalias msp_bg,889		;メタ世界、背景スプライト番号

numalias tati_l1,984 ;通常立ち絵
numalias tati_l2,985 ;通常立ち絵
numalias tati_c1,982 ;通常立ち絵
numalias tati_c2,983 ;通常立ち絵
numalias tati_r1,980 ;通常立ち絵
numalias tati_r2,981 ;通常立ち絵

numalias bg_def,986 ;通常bg

numalias msp_hana_d,887	;メタ世界、華模様下　スプライト番号
numalias msp_hana_u,888	;メタ世界、華模様上　スプライト番号
numalias msp_kuro,889	;メタ世界、黒幕　スプライト番号

numalias x_get_tmp1,%0 : inc %0 ;作業用変数
numalias x_get_tmp2,%0 : inc %0 ;作業用変数
numalias x_get_tmp3,%0 : inc %0 ;作業用変数
numalias x_get_tmp4,%0 : inc %0 ;作業用変数
numalias x_get_tmp5,%0 : inc %0 ;作業用変数

numalias fry_tmp1,%0 : inc %0 ;バタフライ処理用_作業用変数
numalias fry_tmp2,%0 : inc %0

numalias l,1 ;メタ視処理用_作業用変数
numalias c,2 ;メタ視処理用_作業用変数
;numalias r,3 ;メタ視処理用_作業用変数
numalias a,4 ;メタ視処理用_作業用変数
stralias white,"white" ;メタ視処理用_作業用変数
stralias black,"black" ;メタ視処理用_作業用変数



;黒と白のエフェクト
stralias r_black,":c;bmp\r_click\black.bmp"
stralias r_white,":c;bmp\r_click\white.bmp"


numalias debagu,%0 : inc %0 ;デバック用変数

;タイトル画面表示関連
numalias title_skip,%0 : inc %0
numalias END_FLG,%0 : inc %0 ;新要素追加の告知、チェック変数
numalias END_TIPS_FLG,%0 : inc %0 ;Tips新要素追加告知、チェック変数
numalias END_TEA_FLG,%0 : inc %0 ;Tips新要素追加告知、チェック変数

;セーブ時コメントのルビを正常に表示する為の変数
numalias ru1,%0 : inc %0
numalias ru2,%0 : inc %0
numalias ru3,%0 : inc %0
numalias m_temp1,%0 : inc %0
numalias m_temp2,%0 : inc %0
;----------------------------------

;右クリックシステム用変数宣言

;システムボタン

;tipsボタンのパスの入力（1シナリオ1番目のtipsは　tips1_1.bmp　と表記）

;tips、ページ送りボタンのパス入力
stralias tips_next,":c/2,0,3;bmp\r_click\tips_btn\tips_next.bmp"
stralias tips_back,":c/2,0,3;bmp\r_click\tips_btn\tips_back.bmp"

;タイトルバック、確認メッセージ用
stralias title_back_yes,":a/2,0,3;bmp\r_click\sys_btn\yes.bmp"
stralias title_back_no,":a/2,0,3;bmp\r_click\sys_btn\no.bmp"
stralias title_back_bg,":c/2,0,3;bmp\r_click\sys_btn\title_bg.bmp"


numalias tips,60			;ティップス用の配列を設定
dim ?tips[10][5]			;一次元はティップス番号　二次元は各種フラグなど
mov %0,0
numalias tips_page_max,%0 : inc %0		;そのtipsのページ数
numalias tips_flg,%0 : inc %0		;tipsを手に入れたかどうかのチェック変数


mov %0,100

numalias title_back_yes_lsp,%0 : inc %0
numalias title_back_no_lsp,%0 : inc %0
numalias title_back_bg_lsp,%0 : inc %0


numalias tips1_lsp,%0 : inc %0
numalias tips2_lsp,%0 : inc %0
numalias tips3_lsp,%0 : inc %0
numalias tips4_lsp,%0 : inc %0
numalias tips5_lsp,%0 : inc %0
numalias tips6_lsp,%0 : inc %0
numalias tips7_lsp,%0 : inc %0

numalias tips_next_lsp,%0 : inc %0
numalias tips_back_lsp,%0 : inc %0

numalias cha_page_mode,%0 : inc %0
numalias cha_text_page,%0 : inc %0	;現在表示しているキャラテキストページ
numalias cha_next_lsp,%0 : inc %0
numalias cha_back_lsp,%0 : inc %0
numalias cha_page_flg,%0 : inc %0

;システムボタンのパスの入力
stralias r_save,":a/2,0,3;bmp\r_click\sys_btn\save.bmp" ;セーブ＆ロード
stralias r_load,":a/2,0,3;bmp\r_click\sys_btn\load.bmp" ;セーブ＆ロード
stralias r_blog,":a/2,0,3;bmp\r_click\sys_btn\log.bmp" ;バックログ
stralias r_title,":a/2,0,3;bmp\r_click\sys_btn\title.bmp" ;ウィンドクリアー
stralias r_exit,":a/2,0,3;bmp\r_click\sys_btn\exit.bmp"




numalias r_char_lsp,%0 : inc %0
numalias r_tips_lsp,%0 : inc %0
numalias r_save_lsp,%0 : inc %0
numalias r_load_lsp,%0 : inc %0
numalias r_blog_lsp,%0 : inc %0
numalias r_exec_lsp,%0 : inc %0
numalias r_resu_lsp,%0 : inc %0
numalias r_title_lsp,%0 : inc %0
numalias r_exit_lsp,%0 : inc %0

numalias r_next_lsp,%0 : inc %0
numalias r_next2_lsp,%0 : inc %0

;キャラ一覧のボタン用スプライト番号
mov %tmp10,%0 ;魔女空間とでスプライト番号を共用する。


mov %tmp11,%0

mov %0,%tmp10

;mov %0,%tmp11
add %0,5
numalias r_cha_txt_lsp,%0 : inc %0 ;キャラコメントテキスト用

;立ち絵用、スプライト番号
numalias cha_lsp,%0 : inc %0

;飾り背景
stralias r_hana,":a;bmp\r_click\hana_back.bmp" ;右下、花模様
;stralias r_cha_back,":c;bmp\r_click\cha_btn\cha_back.bmp" ;キャラ一覧表示の黒背景
stralias r_tips1_back,":c;bmp\r_click\tips_btn\tips1_back.bmp" ;tips用黒背景
numalias r_tips_txt_lsp,%0 : inc %0
numalias r_hana_lsp,%0 : inc %0
numalias r_txt_lsp,%0 : inc %0
numalias r_cha_back_lsp,%0 : inc %0
numalias r_cha_back,%0 : inc %0	;キャラ一覧表示、背景画像へのパス

numalias r_tips1_back_lsp,%0 : inc %0

;右クリック入る前のボタンメニュー表示用
numalias r_system_lsp,%0 : inc %0
numalias r_clear_lsp,%0 : inc %0


numalias r_used_lsp,%0 ;何番までスプライトを使用したかを保持する（背景画像は除く、保持しない）

numalias r_black_lsp,%0 : inc %0 ;明るさを落す処理
numalias r_bg_lsp,%0 ;背景用スプライト番号




;キャラの状態、管理変数
numalias r,61
dim ?r[8][50][15]
numalias r_cha_text,62
dim ?r_cha_text[8][50][5]
mov %1,6 ;0〜5までは状態をいれる為の変数
numalias tati_x,%1 : inc %1	 ;立ち絵の表示位置、Ｘ座標

numalias itiran_x,%1 : inc %1	 ;一覧表示アイコン位置、Ｘ座標
numalias itiran_y,%1 : inc %1	 ;一覧表示アイコン位置、Ｙ座標

numalias condition,%1 : inc %1		 ;キャラの状態
numalias condition_end,%1 : inc %1	 ;キャラのコンディションの末端数（０から始るので実質+1）
numalias r_ishou,%1 : inc %1	 ;キャラの衣装フラグ（0〜）

;numalias coment,%1 : inc %1		 ;表示コメント

;システム用変数
mov %0,2300

;------------------------
;右クリック関連

numalias clear_flg,%0 : inc %0 ;シナリオクリアのフラグ（後で変更する可能性大）
numalias r_for_title,%0 : inc %0 ;タイトルメニューから入って来たかどうかを判断
numalias r_txt_path,%0 : inc %0 ;テキスト文画像へのパス
numalias r_tips_txt_path,%0 : inc %0 ;チップステキスト文画像へのパス

numalias r_cha_tati_path,%0 : inc %0 ;表示キャラ、キャラの画像パス
numalias r_bg_path,%0 : inc %0 ;背景画像のパス


;EP5　魔女サイド　キャラの総数
numalias cha_kazu_ep5_2,%1 : inc %1


;--------------------
;右クリックシステム、上余白
numalias r_top_y,30

;右クリックシステムボタン、Ｙ座標（上余白＋２２８ピクセル）
mov %tmp,r_top_y : add %tmp,228
numalias r_menu_top_y,%tmp


;------------------------


;----------------------------------------
;セーブロードシステム用

;mov %0,100
;numalias b_save,%0 : inc %0
;numalias b_load,%0 : inc %0
;numalias b_rmenu_btn_Exit,%0 : inc %0
numalias load_for_title,%0 : inc %0 ;タイトルからロードに入ったかのチェック
mov %load_for_title,0
numalias black_toukaritu,150 ;黒幕透過率

numalias debag_save_flg,%0 : inc %0 ;自動セーブ用のフラグ変数（デフォは０にする）


;----------------------------------------
;タイトル画面ようスプライト番号

mov %0,100
numalias t_bg_lsp,%0 : dec %0		;100
numalias t_hane_lsp,%0 : dec %0		;99
numalias t_logo_lsp,%0 : dec %0		;98
numalias t_btn_start_lsp,%0 : dec %0	;97
numalias t_btn_web_lsp,%0 : dec %0	;96
numalias t_btn_exit_lsp,%0 : dec %0	;95
dec %0	;94
numalias t_btn_tips_lsp,%0 : dec %0	;93
numalias t_btn_music_lsp,%0 : dec %0	;92
numalias t_btn_ura_tea_lsp,%0 : dec %0	;91
numalias t_btn_load_lsp,7 
dec %0	;90


numalias t_txt_bg_lsp,%0 : dec %0	;89
dec %0	;88
numalias t_txt_load_lsp,%0 : dec %0	;87
numalias t_txt_web_lsp,%0 : dec %0	;86
numalias t_txt_tea_lsp,%0 : dec %0	;85
numalias t_txt_tips_lsp,%0 : dec %0	;84
numalias t_txt_music_lsp,%0 : dec %0	;83

numalias t_txt_start_lsp,%0 : dec %0	;82
numalias t_txt_exit_lsp,%0 : dec %0	;81
numalias t_txt_ura_tea_lsp,%0 : dec %0	;80
dec %0

numalias t_txt_lock_lsp,%0 : dec %0	;78
numalias t_txt_unlock_lsp,%0 : dec %0	;77


mov %0,75
numalias t_btn_ep1_lsp,%0 : dec %0	;75
numalias t_btn_ep2_lsp,%0 : dec %0	;74
numalias t_btn_ep3_lsp,%0 : dec %0	;73
numalias t_btn_ep4_lsp,%0 : dec %0	;72
numalias t_btn_ep5_lsp,%0 : dec %0	;71
numalias t_btn_ep6_lsp,%0 : dec %0	;70
numalias t_btn_ep7_lsp,%0 : dec %0	;69

numalias t_back_lsp,%0 : dec %0	;68

mov %0,18
numalias t_txt_ep1_lsp,%0 : dec %0	;18
numalias t_txt_ep2_lsp,%0 : dec %0	;17
numalias t_txt_ep3_lsp,%0 : dec %0	;16
numalias t_txt_ep4_lsp,%0 : dec %0	;15
numalias t_txt_ep5_lsp,%0 : dec %0	;14
numalias t_txt_ep6_lsp,%0 : dec %0	;13
numalias t_txt_ep7_lsp,%0 : dec %0	;12

;mov %0,61
;numalias t_btn_ep2_lock_lsp,%0 : dec %0	;61
;numalias t_btn_ep3_lock_lsp,%0 : dec %0	;60
;numalias t_btn_ep4_lock_lsp,%0 : dec %0	;59
;numalias t_btn_ep5_lock_lsp,%0 : dec %0	;58
;numalias t_btn_ep6_lock_lsp,%0 : dec %0	;57
;numalias t_btn_ep7_lock_lsp,%0 : dec %0	;56

;mov %0,55
;numalias t_btn_ep2_unlock_lsp,%0 : dec %0	;55
;numalias t_btn_ep3_unlock_lsp,%0 : dec %0	;54
;numalias t_btn_ep4_unlock_lsp,%0 : dec %0	;53
;numalias t_btn_ep5_unlock_lsp,%0 : dec %0	;52
;numalias t_btn_ep6_unlock_lsp,%0 : dec %0	;51
;numalias t_btn_ep7_unlock_lsp,%0 : dec %0	;50

;mov %0,49
;numalias t_btn_after_lsp,%0 : dec %0	;50
;numalias t_btn_ep6_tea_lsp,%0 : dec %0	;49
;numalias t_btn_ep7_tea_lsp,%0 : dec %0	;48
;numalias t_btn_ep8_tea_lsp,%0 : dec %0	;47

mov %0,45
numalias t_txt_after_lsp,%0 : dec %0	;45
;numalias t_txt_ep6_tea_lsp,%0 : dec %0	;64
;numalias t_txt_ep7_tea_lsp,%0 : dec %0	;63
;numalias t_txt_ep8_tea_lsp,%0 : dec %0	;62

;mov %0,40
;numalias t_btn_tips_lsp,%0 : dec %0	;60
;numalias t_btn_ep6_tips_lsp,%0 : dec %0	;59
;numalias t_btn_ep7_tips_lsp,%0 : dec %0	;58
;numalias t_btn_ep8_tips_lsp,%0 : dec %0	;58

;mov %0,35
;numalias t_txt_tips_lsp,%0 : dec %0	;60
;numalias t_txt_ep6_tips_lsp,%0 : dec %0	;59
;numalias t_txt_ep7_tips_lsp,%0 : dec %0	;59
;numalias t_txt_ep8_tips_lsp,%0 : dec %0	;59

;mov %0,30
;numalias t_btn_ep5_ura_tea_lsp,%0 : dec %0	;60
;numalias t_btn_ep6_ura_tea_lsp,%0 : dec %0	;59
;numalias t_btn_ep7_ura_tea_lsp,%0 : dec %0	;59
;numalias t_btn_ep8_ura_tea_lsp,%0 : dec %0	;59

;mov %0,25
;numalias t_txt_ep5_ura_tea_lsp,%0 : dec %0	;60
;numalias t_txt_ep6_ura_tea_lsp,%0 : dec %0	;59
;numalias t_txt_ep7_ura_tea_lsp,%0 : dec %0	;59
;numalias t_txt_ep8_ura_tea_lsp,%0 : dec %0	;59

mov %0,10
numalias unlock_bg_lsp,%0 : dec %0	;10
numalias unlock_yes_lsp,%0 : dec %0	;9
numalias unlock_no_lsp,%0 : dec %0	;8

;----------------------------------------

return

;*************************************************


;*************************************************
;　ゲーム開始時、変数の初期化
;*************************************************

*bt_def2
return

;*************************************************


;***********************************************************************
;
;彼岸花の咲く夜に
;ＢＧＭ、試聴モード(変数３７００、３８００番台使用）
;
;***********************************************************************
*bgm_mode

;***【初期化処理】******************************************************

   E_A                                 ;現在演奏中の曲をストップする
   setwindow 31,16,22,16,22,22,0,2,20,1,1,#ffffff,0,0,639,479
   textclear
   rmode 0                              ;右クリックメニューの無効化
   erasetextwindow 0                    
   csp -1                               ;スプライト画像の、メモリからの消去
   btndef ""                            ;ボタン画像の、メモリからの消去
   ;print 10,1000                        ;画像の消去

   ;衣装の初期化

   seplay 9,82
   seplay 10,82
   bg black,24
;   bg white,22
   delay 500
;print 1

   mov %bm_m,0
   mov %bm_p,1                         ;最初に流れる曲の番号
   mov %bm_rnd_kazu,0
   mov %bm_rpi,1
   mov %bm_stop,0
   mov %bgm_kowai_skip,0
   mov %bgm_mood_1min,0
   mov %bgm_mood_demo,0
   mov %bgm_mood_file_path_flg,0
   mov %bgm_mood_tyokuzenn_op_fede_skip,0
   mov %bgm_mood_page,1		;曲一覧ページ数
   if %END_MUSIC_FLG = 1 mov %END_MUSIC_FLG,0	;新規追加告知フラグ

   mov %bgm_mood_demo_zennkai_nagasita_op,3

   bgmvol 70 : mov %BGM_v_Ch,70
   
   mov %bgm_max2,39		;アンビエントも含めた曲数（登録数＋1）

   mov %bgm_mood_turu_pettan_no,94		;ツルペッタンの番号（重複欠番の９４を当てる）
   mov %bgm_mood_op_no,%3801 : inc %3801	;ムービーの番号（デモモードで使用）
   mov %bgm_mood_op2_no,%3801 : inc %3801	;ムービーの番号（デモモードで使用）
   mov %bgm_mood_op3_no,%3801 : inc %3801	;ムービーの番号（デモモードで使用）

   mov %bgm_mood_ed_no,%3801 : inc %3801	;EDの番号（デモモードでは演奏を行わない）
   mov %bgm_mood_me1_no,%3801 : inc %3801	;MEの番号
   mov %bgm_mood_me2_no,%3801 : inc %3801	;MEの番号
   mov %bgm_mood_me1_btn_no,0	;MEの(ファイルパス数字変数）
   mov %bgm_mood_me2_btn_no,0	;MEの(ファイルパス数字変数）


   mov %bgm_mood_demo_kaisuu,0	;デモモード時、一定回数毎にOPを流す為の変数。
   
   ;ランダムチェック変数の初期化
   for %3801 = 0 to %bgm_max2
      mov ?bgmm[%3801][bm_r],0
   next


;***【データ入力】******************************************************
;データを順番に入力、曲の順番を入れ替える時は、順序をそのまま入れ替える
gosub *bgm_mode_bgm_date_input

;製作中一時変更点
mov %bm_pt,?bgmm[%bm_p][bm_t]
;bgm $?bgmm[%bm_p][bm_pa]
;delay 500
;bgm $?bgmm[%bm_p][bm_pa]
;bgm1v 2,70
mov $BGM_Play,"bgm\BGM_MZ_2_07.ogg": mov %Set_vol,50 : gosub *BGM_Play_Mord

mov $tmp,":c;" : add $tmp,"bgm_mode\bgm_back.bmp"
lsp 510,$tmp,0,0
;bg black,22 ;18,1000,":c;Bmp\Efe\1.bmp"
;ウィンドウの表示
lsp bgm_window_lsp,":a;bgm_mode\window.bmp",0,256
;print 22
lsp 499,":c;bmp\r_click\black.bmp",0,0,150
;print 22

;setwindow 40,16,22,16,26,26,0,2,20,1,1,#ffffff,0,0,639,479
;lsp 50,":s#FFFFFF演奏したい曲を選んでクリックして下さい",60,11
print 22

setwindow 31,16,22,16,14,14,0,2,20,1,1,#ffffff,0,0,639,479

;文字スプライトを作成してボタン化する
;４列、１５行で固定
mov %3805,301
mov %3807,101
mov %3806,15 ;曲一覧の、一番上の高さ

mov %3801,25 : mov %3802,%3806 : mov %3803,0 : mov %3804,19

lsp %3805,":s#B7B7B7#FF1D1D$4001",%3801,%3802 : lsph %3807,":s#FFFFFF$4001",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4002",%3801,%3802 : lsph %3807,":s#FFFFFF$4002",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4003",%3801,%3802 : lsph %3807,":s#FFFFFF$4003",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4004",%3801,%3802 : lsph %3807,":s#FFFFFF$4004",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4005",%3801,%3802 : lsph %3807,":s#FFFFFF$4005",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4006",%3801,%3802 : lsph %3807,":s#FFFFFF$4006",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4007",%3801,%3802 : lsph %3807,":s#FFFFFF$4007",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4008",%3801,%3802 : lsph %3807,":s#FFFFFF$4008",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4009",%3801,%3802 : lsph %3807,":s#FFFFFF$4009",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4010",%3801,%3802 : lsph %3807,":s#FFFFFF$4010",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4011",%3801,%3802 : lsph %3807,":s#FFFFFF$4011",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4012",%3801,%3802 : lsph %3807,":s#FFFFFF$4012",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4013",%3801,%3802 : lsph %3807,":s#FFFFFF$4013",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807

mov %3801,140 : mov %3802,%3806 : mov %3803,0
lsp %3805,":s#B7B7B7#FF1D1D$4014",%3801,%3802 : lsph %3807,":s#FFFFFF$4014",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4015",%3801,%3802 : lsph %3807,":s#FFFFFF$4015",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4016",%3801,%3802 : lsph %3807,":s#FFFFFF$4016",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4017",%3801,%3802 : lsph %3807,":s#FFFFFF$4017",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4018",%3801,%3802 : lsph %3807,":s#FFFFFF$4018",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4019",%3801,%3802 : lsph %3807,":s#FFFFFF$4019",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4020",%3801,%3802 : lsph %3807,":s#FFFFFF$4020",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4021",%3801,%3802 : lsph %3807,":s#FFFFFF$4021",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4022",%3801,%3802 : lsph %3807,":s#FFFFFF$4022",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4023",%3801,%3802 : lsph %3807,":s#FFFFFF$4023",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4024",%3801,%3802 : lsph %3807,":s#FFFFFF$4024",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4025",%3801,%3802 : lsph %3807,":s#FFFFFF$4025",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4026",%3801,%3802 : lsph %3807,":s#FFFFFF$4026",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807

mov %3801,330 : mov %3802,%3806 : mov %3803,0
lsp %3805,":s#B7B7B7#FF1D1D$4027",%3801,%3802 : lsph %3807,":s#FFFFFF$4027",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4028",%3801,%3802 : lsph %3807,":s#FFFFFF$4028",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4029",%3801,%3802 : lsph %3807,":s#FFFFFF$4029",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4030",%3801,%3802 : lsph %3807,":s#FFFFFF$4030",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4031",%3801,%3802 : lsph %3807,":s#FFFFFF$4031",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4032",%3801,%3802 : lsph %3807,":s#FFFFFF$4032",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4033",%3801,%3802 : lsph %3807,":s#FFFFFF$4033",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4034",%3801,%3802 : lsph %3807,":s#FFFFFF$4034",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4035",%3801,%3802 : lsph %3807,":s#FFFFFF$4035",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4036",%3801,%3802 : lsph %3807,":s#FFFFFF$4036",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4037",%3801,%3802 : lsph %3807,":s#FFFFFF$4037",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4038",%3801,%3802 : lsph %3807,":s#FFFFFF$4038",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
lsp %3805,":s#B7B7B7#FF1D1D$4039",%3801,%3802 : lsph %3807,":s#FFFFFF$4039",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4040",%3801,%3802 : lsph %3807,":s#FFFFFF$4040",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4041",%3801,%3802 : lsph %3807,":s#FFFFFF$4041",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4042",%3801,%3802 : lsph %3807,":s#FFFFFF$4042",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4043",%3801,%3802 : lsph %3807,":s#FFFFFF$4043",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4044",%3801,%3802 : lsph %3807,":s#FFFFFF$4044",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4045",%3801,%3802 : lsph %3807,":s#FFFFFF$4045",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807


;mov %3801,480 : mov %3802,%3806 : mov %3803,0
;lsp %3805,":s#B7B7B7#FF1D1D$4046",%3801,%3802 : lsph %3807,":s#FFFFFF$4046",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4047",%3801,%3802 : lsph %3807,":s#FFFFFF$4047",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4048",%3801,%3802 : lsph %3807,":s#FFFFFF$4048",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4049",%3801,%3802 : lsph %3807,":s#FFFFFF$4049",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4050",%3801,%3802 : lsph %3807,":s#FFFFFF$4050",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4051",%3801,%3802 : lsph %3807,":s#FFFFFF$4051",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4052",%3801,%3802 : lsph %3807,":s#FFFFFF$4052",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4053",%3801,%3802 : lsph %3807,":s#FFFFFF$4053",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4054",%3801,%3802 : lsph %3807,":s#FFFFFF$4054",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4055",%3801,%3802 : lsph %3807,":s#FFFFFF$4055",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4056",%3801,%3802 : lsph %3807,":s#FFFFFF$4056",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4057",%3801,%3802 : lsph %3807,":s#FFFFFF$4057",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4058",%3801,%3802 : lsph %3807,":s#FFFFFF$4058",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4059",%3801,%3802 : lsph %3807,":s#FFFFFF$4059",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4060",%3801,%3802 : lsph %3807,":s#FFFFFF$4060",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807


;２ページ目に移行
;mov %3801,25 : mov %3802,%3806 : mov %3803,0
;lsph %3805,":s#B7B7B7#FF1D1D$4061",%3801,%3802 : lsph %3807,":s#FFFFFF$4061",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4062",%3801,%3802 : lsph %3807,":s#FFFFFF$4062",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4063",%3801,%3802 : lsph %3807,":s#FFFFFF$4063",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4064",%3801,%3802 : lsph %3807,":s#FFFFFF$4064",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4065",%3801,%3802 : lsph %3807,":s#FFFFFF$4065",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4066",%3801,%3802 : lsph %3807,":s#FFFFFF$4066",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4067",%3801,%3802 : lsph %3807,":s#FFFFFF$4067",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4068",%3801,%3802 : lsph %3807,":s#FFFFFF$4068",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4069",%3801,%3802 : lsph %3807,":s#FFFFFF$4069",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4070",%3801,%3802 : lsph %3807,":s#FFFFFF$4070",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4071",%3801,%3802 : lsph %3807,":s#FFFFFF$4071",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4072",%3801,%3802 : lsph %3807,":s#FFFFFF$4072",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4073",%3801,%3802 : lsph %3807,":s#FFFFFF$4073",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4074",%3801,%3802 : lsph %3807,":s#FFFFFF$4074",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4075",%3801,%3802 : lsph %3807,":s#FFFFFF$4075",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807


;mov %3801,175 : mov %3802,%3806 : mov %3803,0
;lsph %3805,":s#B7B7B7#FF1D1D$4076",%3801,%3802 : lsph %3807,":s#FFFFFF$4076",%38;01,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4077",%3801,%3802 : lsph %3807,":s#FFFFFF$4077",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4078",%3801,%3802 : lsph %3807,":s#FFFFFF$4078",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4079",%3801,%3802 : lsph %3807,":s#FFFFFF$4079",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4080",%3801,%3802 : lsph %3807,":s#FFFFFF$4080",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4081",%3801,%3802 : lsph %3807,":s#FFFFFF$4081",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4082",%3801,%3802 : lsph %3807,":s#FFFFFF$4082",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4083",%3801,%3802 : lsph %3807,":s#FFFFFF$4083",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4084",%3801,%3802 : lsph %3807,":s#FFFFFF$4084",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4085",%3801,%3802 : lsph %3807,":s#FFFFFF$4085",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4086",%3801,%3802 : lsph %3807,":s#FFFFFF$4086",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4087",%3801,%3802 : lsph %3807,":s#FFFFFF$4087",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4088",%3801,%3802 : lsph %3807,":s#FFFFFF$4088",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4089",%3801,%3802 : lsph %3807,":s#FFFFFF$4089",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsph %3805,":s#B7B7B7#FF1D1D$4090",%3801,%3802 : lsph %3807,":s#FFFFFF$4090",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807

;mov %3801,330 : mov %3802,%3806 : mov %3803,0
;lsp %3805,":s#B7B7B7#FF1D1D$4091",%3801,%3802 : lsph %3807,":s#FFFFFF$4091",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4092",%3801,%3802 : lsph %3807,":s#FFFFFF$4092",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4093",%3801,%3802 : lsph %3807,":s#FFFFFF$4093",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4094",%3801,%3802 : lsph %3807,":s#FFFFFF$4094",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4095",%3801,%3802 : lsph %3807,":s#FFFFFF$4095",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4096",%3801,%3802 : lsph %3807,":s#FFFFFF$4096",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4097",%3801,%3802 : lsph %3807,":s#FFFFFF$4097",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4098",%3801,%3802 : lsph %3807,":s#FFFFFF$4098",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4099",%3801,%3802 : lsph %3807,":s#FFFFFF$4099",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4100",%3801,%3802 : lsph %3807,":s#FFFFFF$4100",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4101",%3801,%3802 : lsph %3807,":s#FFFFFF$4101",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4102",%3801,%3802 : lsph %3807,":s#FFFFFF$4102",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4103",%3801,%3802 : lsph %3807,":s#FFFFFF$4103",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4104",%3801,%3802 : lsph %3807,":s#FFFFFF$4104",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4105",%3801,%3802 : lsph %3807,":s#FFFFFF$4105",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807

;mov %3801,485 : mov %3802,%3806 : mov %3803,0

;lsp %3805,":s#B7B7B7#FF1D1D$4106",%3801,%3802 : lsph %3807,":s#FFFFFF$4106",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4107",%3801,%3802 : lsph %3807,":s#FFFFFF$4107",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4108",%3801,%3802 : lsph %3807,":s#FFFFFF$4108",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4109",%3801,%3802 : lsph %3807,":s#FFFFFF$4109",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4110",%3801,%3802 : lsph %3807,":s#FFFFFF$4110",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4111",%3801,%3802 : lsph %3807,":s#FFFFFF$4111",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4112",%3801,%3802 : lsph %3807,":s#FFFFFF$4112",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4113",%3801,%3802 : lsph %3807,":s#FFFFFF$4113",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4114",%3801,%3802 : lsph %3807,":s#FFFFFF$4114",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4115",%3801,%3802 : lsph %3807,":s#FFFFFF$4115",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807
;lsp %3805,":s#B7B7B7#FF1D1D$4116",%3801,%3802 : lsph %3807,":s#FFFFFF$4116",%3801,%3802 : add %3802,%3804 : inc %3805 : inc %3807


*bgm_mode_mini_skip

;各システムボタンの配置
;mov %3801,30
mov %3802,409
mov %3803,436
mov %3804,444

lsp bgm_ennsou_lsp,":a;bgm_mode\ensou_w.bmp",43,%3802 +1
lsph bgm_btn_ennsou_lsp,":a/2,0,3;bgm_mode\ensou_btn.bmp",43,%3802

lsp bgm_btn_stop_lsp,":a/2,0,3;bgm_mode\stop_btn.bmp",43,%3803

lsph bgm_zennkyoku_lsp,":a;bgm_mode\all_w.bmp",136,%3802
lsp bgm_btn_zennkyoku_lsp,":a/2,0,3;bgm_mode\all_btn.bmp",136,%3802

lsph bgm_ranndamu_lsp,":a;bgm_mode\rnd_w.bmp",136,%3803
lsp bgm_btn_ranndamu_lsp,":a/2,0,3;bgm_mode\rnd_btn.bmp",136,%3803


lsp bgm_rpi_lsp,":a;bgm_mode\r_1_w.bmp",271,408
lsph bgm_btn_rpi_lsp,":a/2,0,3;bgm_mode\r_1.bmp",271,408

lsph bgm_min_lsp,":a;bgm_mode\min_w.bmp",270,%3803 -1
lsp bgm_btn_min_lsp,":a/2,0,3;bgm_mode\min_btn.bmp",270,%3803 -1

;lsph bgm_demo_lsp,":a;bgm_mode\demo_w.bmp",343,%3804
;lsp bgm_btn_demo_lsp,":a/2,0,3;bgm_mode\demo_btn.bmp",343,%3804

lsph bgm_kowai_skip_lsp,":a;bgm_mode\ko_skip_w.bmp",390,%3803 -2
lsp bgm_btn_kowai_skip_lsp,":a/2,0,3;bgm_mode\ko_skip_btn.bmp",390,%3803 -2

lsph bgm_kowai_only_lsp,":a;bgm_mode\kowai_w.bmp",390,%3802
lsp bgm_btn_kowai_only_lsp,":a/2,0,3;bgm_mode\kowai_btn.bmp",390,%3802

lsp bgm_btn_title_lsp,":a/2,0,3;bgm_mode\modoru_btn.bmp",550,%3803 -1 ;タイトルに戻る

;lsp bgm_btn_next_lsp,":a/2,0,3;bgm_mode\next_btn.bmp",510,300 ;曲一覧ネクストボタン
;lsph bgm_btn_back_lsp,":a/2,0,3;bgm_mode\back_btn.bmp",15,300 ;曲一覧バックボタン





;** ボタンの設定と処理ルーチン***************************************
*bgm_mode_botann_teigi

btndef ""

notif %bgm_mood_page = 1 goto *bgm_mode_botann_teigi_100
	;ボタン、表示と非表示の調整
	for %tmp = 301 to 360 : vsp %tmp,1 : next
	for %tmp = 361 to 450 : vsp %tmp,0 : next
;	vsp bgm_btn_next_lsp,1
;	vsp bgm_btn_back_lsp,0
	print 22
	
	;１ページ目　１〜６０曲まで表示、ＮＥＸＴボタンを表示
	exbtn_d "P301,0P302,0P303,0P304,0P305,0P306,0P307,0P308,0P309,0P310,0P311,0P312,0P313,0P314,0P315,0P316,0P317,0P318,0P319,0P320,0P321,0P322,0P323,0P324,0P325,0P326,0P327,0P328,0P329,0P330,0P331,0P332,0P333,0P334,0P335,0P336,0P337,0P338,0";,0P339,0P340,0P341,0P342,0P343,0P344,0P345,0P346,0P347,0P348,0P349,0P350,0P351,0P352,0P353,0P354,0P355,0P356,0P357,0P358,0P359,0P360

	mov %3801,301 : mov %3802,1
	exbtn %3801,%3802,"P301,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P302,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P303,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P304,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P305,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P306,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P307,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P308,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P309,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P310,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P311,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P312,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P313,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P314,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P315,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P316,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P317,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P318,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P319,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P320,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P321,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P322,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P323,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P324,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P325,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P326,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P327,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P328,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P329,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P330,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P331,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P332,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P333,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P334,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P335,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P336,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P337,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P338,1" : inc %3801 : inc %3802
	exbtn %3801,%3802,"P339,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P340,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P341,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P342,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P343,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P344,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P345,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P346,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P347,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P348,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P349,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P350,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P351,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P352,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P353,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P354,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P355,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P356,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P357,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P358,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P359,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P360,1" : inc %3801 : inc %3802
;	exbtn bgm_btn_next_lsp,bgm_btn_next,"P21,1"
*bgm_mode_botann_teigi_100

;notif %bgm_mood_page = 2 goto *bgm_mode_botann_teigi_200
	;ボタン、表示と非表示の調整
;	for %tmp = 301 to 360 : vsp %tmp,0 : next
;	for %tmp = 361 to 450 : vsp %tmp,1 : next
;	vsp bgm_btn_next_lsp,0
;	vsp bgm_btn_back_lsp,1
;	print 22

	;２ページ目　６１〜８０曲まで表示、ＢＡＣＫボタンを表示
;	exbtn_d "P361,0P362,0P363,0P364,0P365,0P366,0P367,0P368,0P369,0P370,0P371,0P372,0P373,0";,0P374,0P375,0P376,0P377,0P378,0P379,0P380,0P381,0P382,0P383,0P384,0P385,0P386,0P387,0P388,0P389,0P390,0P391,0P392,0P393,0P394,0P395,0P396,0P397,0P398,0P399,0P400,0P401,0P402,0P403,0P404,0P405,0P406,0P407,0P408,0P409,0P410,0P411,0P412,0P413,0P414,0P415,0P416,0"

;	mov %3801,361 : mov %3802,61
;	exbtn %3801,%3802,"P361,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P362,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P363,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P364,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P365,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P366,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P367,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P368,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P369,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P370,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P371,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P372,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P373,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P374,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P375,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P376,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P377,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P378,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P379,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P380,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P381,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P382,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P383,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P384,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P385,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P386,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P387,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P388,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P389,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P390,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P391,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P392,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P393,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P394,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P395,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P396,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P397,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P398,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P399,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P400,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P401,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P402,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P403,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P404,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P405,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P406,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P407,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P408,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P409,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P410,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P411,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P412,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P413,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P414,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P415,1" : inc %3801 : inc %3802
;	exbtn %3801,%3802,"P416,1" : inc %3801 : inc %3802
;	exbtn bgm_btn_back_lsp,bgm_btn_back,"P20,1"
*bgm_mode_botann_teigi_200


exbtn bgm_btn_ennsou_lsp,bgm_btn_ennsou,"P39,1" 	;演奏

;ボタンのオン、オフで、定義を切り替える
exbtn bgm_btn_zennkyoku_lsp,bgm_btn_zennkyoku,"P37,1" 	;全曲演奏
exbtn bgm_btn_ranndamu_lsp,bgm_btn_ranndamu,"P35,1" 	;気まぐれ演奏

exbtn bgm_btn_stop_lsp,bgm_btn_stop,"P33,1" 		;ストップ

exbtn bgm_btn_rpi_lsp,bgm_btn_rpi,"P32,1" 		;繰り返し演奏

exbtn bgm_btn_min_lsp,bgm_btn_min,"P30,1" 		;１分モード
;exbtn bgm_btn_demo_lsp,bgm_btn_demo,"P28,1" 	;デモモード

exbtn bgm_btn_kowai_skip_lsp,bgm_btn_kowai_skip,"P26,1" ;怖い曲を飛ばす
exbtn bgm_btn_kowai_only_lsp,bgm_btn_kowai_only,"P24,1" ;怖い曲だけ演奏

exbtn bgm_btn_title_lsp,bgm_btn_title,"P22,1" 		;タイトルへ戻る


;ED演奏時はスキップ
if %bm_p = %bgm_mood_ed_no goto *bgm_mode_btn_lp

*bgm_mode_btn_lp_0
   ;ランダム、順番演奏の為に時間制限ボタンを使用する。	
   getbtntimer %bm_pt2
   sub %bm_pt,%bm_pt2
   
*bgm_mode_btn_lp
   if %bm_pt < 0 mov %bm_pt,0
   notif %bm_p = 0 btntime %bm_pt
   if %bm_stop = 0 btntime 10000
   if %bm_p = 0 btntime 10000
   btnwait2 %BtnRes

;時間切れの処理、ループ、次の曲に、ランダム
notif %BtnRes <= -5 goto *bgm_mode_100

   ;演奏停止中は、ボタン待ち
   if %bm_stop = 0 goto *bgm_mode_btn_lp
   
   ;【演奏＋リピート】　一曲リピート 
   if %bm_rpi=1 if %bm_m = 0 mov %bm_pt,?bgmm[%bm_p][bm_t]: goto *bgm_mode_btn_lp
   
   ;演奏のみなら、停止処理
   if %bm_rpi=0 if %bm_m = 0 mov %BtnRes,bgm_btn_stop : goto *bgm_mode_100 
   
   ;順演奏
   notif %bm_m = 1 goto *bgm_mode_10
	;演奏している曲が一番最後なら、リピートのオンオフを確認
	if %bm_rpi = 1 && %bm_p >= %bgm_max2 mov %BtnRes,1 : goto *bgm_mode_play_kyokunitobu
	if %bm_p < %bgm_max2 mov %BtnRes,%bm_p : inc %BtnRes : goto *bgm_mode_play_kyokunitobu
      
      ;リピートがオフならストップを入力する。
      mov %BtnRes,bgm_btn_stop : goto *bgm_mode_100 
   *bgm_mode_10
   
   ;ランダム演奏
   notif %bm_m = 2 goto *bgm_mode_20
      ;ランダムに次の曲へ

;テスト
;notif %bgm_mood_demo = 1 jumpf
;	if %bm_p = %bgm_max2 mov %BtnRes,1 : goto *bgm_mode_play_kyokunitobu
;	mov %BtnRes,%bm_p : inc %BtnRes : goto *bgm_mode_play_kyokunitobu
;      
;~

      ;曲数がマックスなら、リピートのオン、オフを確認
      notif %bm_rnd_kazu >= %bgm_max2 goto *bgm_mode_25
         if %bm_rpi = 1 gosub *bgm_r_shokika
	 if %bm_rpi = 0 mov %BtnRes,bgm_btn_stop : goto *bgm_mode_100 
      *bgm_mode_25
      
      ;演奏されていない曲数から、ランダムで何番目を演奏するか算出
      mov %3803,%bgm_max2 : sub %3803,%bm_rnd_kazu
      rnd2 %3802,1,%3803
	
	notif %bgm_mood_demo = 1 goto *bgm_mode_26
		;デモモード時は決まった回数に一度、オープニングを流す。
		notif %bgm_mood_demo_kaisuu >= 8 jumpf
			mov %bgm_mood_demo_kaisuu,0
			;交互に曲を流す
			if %bgm_mood_demo_zennkai_nagasita_op = 1 mov %bgm_mood_demo_zennkai_nagasita_op,2 : mov %BtnRes,2 : goto *bgm_mode_play_kyokunitobu
			if %bgm_mood_demo_zennkai_nagasita_op = 2 mov %bgm_mood_demo_zennkai_nagasita_op,3 : mov %BtnRes,3 : goto *bgm_mode_play_kyokunitobu
			if %bgm_mood_demo_zennkai_nagasita_op = 3 mov %bgm_mood_demo_zennkai_nagasita_op,1 : mov %BtnRes,1 : goto *bgm_mode_play_kyokunitobu
		~
		inc %bgm_mood_demo_kaisuu
      	*bgm_mode_26
	
      ;何番目かを決定したら、1からチェックして、演奏されていない曲を演奏する
      for %3803 = 1 to %bgm_max2
        if ?bgmm[%3803][bm_r] = 0 dec %3802 : if %3802 = 0 mov %BtnRes,%3803 :break  
      next
      goto *bgm_mode_play_kyokunitobu
   *bgm_mode_20
   
   ;リピート演奏への切り替え
   notif %bm_m = 10 goto *bgm_mode_50
      mov %bm_m,0
      bgm $?bgmm[%bm_p][bm_pa]
      mov %bm_pt,?bgmm[%bm_p][bm_t] ;曲の時間を入力
      goto *bgm_mode_btn_lp
   *bgm_mode_50
*bgm_mode_100


;0と-1、デモモードの時はデモモードを抜ける処理を行う。
notif %bgm_mood_demo = 1 goto *bgm_mode_demo_kaijo_skip
	notif %BtnRes = -1 jumpf
		csp 0
		csp 1
		vsp bgm_demo_lsp,0
		print 1
		mov %bgm_mood_demo,0
		mov %BtnRes,bgm_btn_stop
		goto *bgm_mode_100
	~
	notif %BtnRes = 0 jumpf
		csp 0
		csp 1
		vsp bgm_demo_lsp,0
		print 1
		mov %bgm_mood_demo,0
		mov %BtnRes,bgm_btn_stop
		goto *bgm_mode_100
	~

*bgm_mode_demo_kaijo_skip


if %BtnRes = -1 goto *bgm_mode_end ;エンド処理
if %BtnRes = 0 goto *bgm_mode_btn_lp_0

;ページ数、次のページを押されたら曲一覧を次のページに移動
notif %BtnRes = bgm_btn_next goto *bgm_mode_next_100
	if %bgm_mood_page = 1 mov %bgm_mood_page,2 : for %tmp = 101 to 250 : vsp %tmp,0 : next : goto *bgm_mode_botann_teigi
	if %bgm_mood_page = 2 mov %bgm_mood_page,1 : for %tmp = 101 to 250 : vsp %tmp,0 : next : goto *bgm_mode_botann_teigi
*bgm_mode_next_100

;ページ数、前のページを押されたら曲一覧を前のページに移動
notif %BtnRes = bgm_btn_back goto *bgm_mode_back_100
	if %bgm_mood_page = 1 mov %bgm_mood_page,2 : for %tmp = 101 to 250 : vsp %tmp,0 : next : goto *bgm_mode_botann_teigi
	if %bgm_mood_page = 2 mov %bgm_mood_page,1 : for %tmp = 101 to 250 : vsp %tmp,0 : next : goto *bgm_mode_botann_teigi
*bgm_mode_back_100


;演奏
notif %BtnRes = bgm_btn_ennsou goto *bgm_mode_150
   ;他のパネルの設定に従って演奏を行う
      ;ランダムモードがＯＮの時は、曲番号をランダムに変化
      if %bm_m = 2 rnd2 %bm_p,1,%bgm_max2
   ;曲番号を入力して、演奏ルーチンに飛ぶ 
   if %bm_p <= 0 mov %bm_p,1
   mov %BtnRes,%bm_p
   goto *bgm_mode_play_kyokunitobu_0
*bgm_mode_150


;リピートのオン、オフ
notif %BtnRes = bgm_btn_rpi goto *bgm_mode_200
   ;リピートがオンになっているのならオフ、オフならオンに
	notif %bm_rpi=1 goto *bgm_mode_210

		;一曲、全曲、リピートボタンの変更
		if %bm_m = 0 vsp bgm_rpi_lsp,0 : lsp bgm_btn_rpi_lsp,":a/2,0,3;bgm_mode\r_1.bmp",271,409 -1
		if %bm_m = 1 vsp bgm_rpi_lsp,0 : lsp bgm_btn_rpi_lsp,":a/2,0,3;bgm_mode\r_a.bmp",271,409 -1
		if %bm_m = 2 vsp bgm_rpi_lsp,0 : lsp bgm_btn_rpi_lsp,":a/2,0,3;bgm_mode\r_a.bmp",271,409 -1

		mov %bm_rpi,0
		vsp bgm_rpi_lsp,0
		print 1
		goto *bgm_mode_btn_lp_0
	*bgm_mode_210

	;一曲、全曲、リピートボタンの変更
	if %bm_m = 0 vsp bgm_btn_rpi_lsp,0 : lsp bgm_rpi_lsp,":a;bgm_mode\r_1_w.bmp",271,409 -1
	if %bm_m = 1 vsp bgm_btn_rpi_lsp,0 : lsp bgm_rpi_lsp,":a;bgm_mode\r_a_w.bmp",271,409 -1
	if %bm_m = 2 vsp bgm_btn_rpi_lsp,0 : lsp bgm_rpi_lsp,":a;bgm_mode\r_a_w.bmp",271,409 -1

   mov %bm_rpi,1
   vsp bgm_rpi_lsp,1 : print 1
   ;通常演奏なら、%bm_mを10に設定（BGMONCEで演奏されていた物を、BGMに変える為）
   if %bm_m = 0 mov %bm_m,10
   goto *bgm_mode_btn_lp_0
*bgm_mode_200


;順次演奏のオン、オフ
notif %BtnRes = bgm_btn_zennkyoku goto *bgm_mode_300
   ;オンならオフに、オフならオンにする
   notif %bm_m = 1 goto *bgm_mode_350
	mov %bm_m,0

	;リピートボタンの変更
	if %bm_rpi=1 vsp bgm_btn_rpi_lsp,0 : lsp bgm_rpi_lsp,":a;bgm_mode\r_1_w.bmp",271,408 : lsp bgm_btn_rpi_lsp,":a/2,0,3;bgm_mode\r_1.bmp",271,408
	if %bm_rpi=0 vsp bgm_rpi_lsp,0 : lsp bgm_btn_rpi_lsp,":a/2,0,3;bgm_mode\r_1.bmp",271,408

      vsp bgm_zennkyoku_lsp,0: print 1
      ;リピートがオンなら10を入力（BGMONCEで演奏されていた物を、BGMに変える為）
      if %bm_rpi = 1 mov %bm_m,10
      goto *bgm_mode_btn_lp_0
   *bgm_mode_350

	;リピートボタンの変更
	if %bm_rpi=1 vsp bgm_btn_rpi_lsp,0 : lsp bgm_rpi_lsp,":a;bgm_mode\r_a_w.bmp",271,409 -1
	if %bm_rpi=0 vsp bgm_rpi_lsp,0 : lsp bgm_btn_rpi_lsp,":a/2,0,3;bgm_mode\r_a.bmp",271,409 -1
   
   mov %bm_m,1
   vsp bgm_zennkyoku_lsp,1
   vsp bgm_ranndamu_lsp,0
   print 1

   ;演奏されていないのなら、自動的に演奏をスタートする。
   notif %bm_stop = 0 jumpf
		mov %BtnRes,bgm_btn_ennsou
		goto *bgm_mode_100
   ~
   goto *bgm_mode_btn_lp_0
*bgm_mode_300


;ランダム演奏のオン、オフ
notif %BtnRes = bgm_btn_ranndamu goto *bgm_mode_400

   notif %bm_m = 2 goto *bgm_mode_450
	mov %bm_m,0
	;リピートボタンの変更
	if %bm_rpi=1 vsp bgm_btn_rpi_lsp,0 : lsp bgm_rpi_lsp,":a;bgm_mode\r_1_w.bmp",271,408 : lsp bgm_btn_rpi_lsp,":a/2,0,3;bgm_mode\r_1.bmp",271,408
	if %bm_rpi=0 vsp bgm_rpi_lsp,0 : lsp bgm_btn_rpi_lsp,":a/2,0,3;bgm_mode\r_1.bmp",271,408

      vsp bgm_ranndamu_lsp,0 : print 1
      ;リピートがオンなら10を入力（BGMONCEで演奏されていた物を、BGMに変える為）
      if %bm_rpi = 1 mov %bm_m,10
      goto *bgm_mode_btn_lp_0
   *bgm_mode_450
   
	mov %bm_m,2
	;リピートボタンの変更
	if %bm_rpi=1 vsp bgm_btn_rpi_lsp,0 : lsp bgm_rpi_lsp,":a;bgm_mode\r_a_w.bmp",271,409 -1
	if %bm_rpi=0 vsp bgm_rpi_lsp,0 : lsp bgm_btn_rpi_lsp,":a/2,0,3;bgm_mode\r_a.bmp",271,409 -1

   vsp bgm_zennkyoku_lsp,0
   vsp bgm_ranndamu_lsp,1
   print 1
   
   gosub *bgm_r_shokika
   
   ;演奏中なら現在の曲をチェック変数に入力
   notif %bm_stop = 0 mov ?bgmm[%bm_p][bm_r],1 : mov %bm_rnd_kazu,0 : goto *bgm_mode_btn_lp_0
   
   ;演奏されていないのなら、自動的に演奏をスタートする。
   if %bm_stop = 0 mov %BtnRes,bgm_btn_ennsou : goto *bgm_mode_100
*bgm_mode_400


;メドレーボタンのオン、オフ
notif %BtnRes = bgm_btn_min goto *bgm_mode_1min_skip

	;ON
	notif %bgm_mood_1min = 0 goto *bgm_mode_1min_10
		mov %bgm_mood_1min,1
		vsp bgm_min_lsp,1
		print 1

		;曲が演奏されていなければ演奏を行う(この時､単曲再生なら､全曲再生にする｡
		notif %bm_stop = 0 jumpf
			if %bm_m <> 0 mov %BtnRes,bgm_btn_ennsou : goto *bgm_mode_100
			if %bm_m = 0 mov %BtnRes,bgm_btn_zennkyoku : goto *bgm_mode_100
		~
		
		;曲が演奏中ならば、その曲はすぐにフェードアウトさせてしまう。
		;単曲演奏中ならば、順次演奏に変更
		if %bm_m = 0 vsp bgm_zennkyoku_lsp,1 : vsp bgm_ranndamu_lsp,0 : print 1 : mov %bm_m,1
		mov %bm_pt,0 : goto *bgm_mode_btn_lp
		goto *bgm_mode_btn_lp_0
	*bgm_mode_1min_10

	;OFF
	if %bgm_mood_1min = 1 mov %bgm_mood_1min,0 : vsp bgm_min_lsp,0 :print 1 :goto *bgm_mode_btn_lp
*bgm_mode_1min_skip


;デモモードのオン、オフ
notif %BtnRes = bgm_btn_demo goto *bgm_mode_demo_skip
	;ON
	notif %bgm_mood_demo = 0 goto *bgm_mode_demo_10
		mov %bgm_mood_demo,1
		vsp bgm_demo_lsp,1
		print 1
		
		;デモ演奏用のルーチンに飛ぶ
		;goto *bgm_demo_play

		;演奏、ランダム、繰り返しを自動的にONに
		vsp bgm_rpi_lsp,1 : mov %bm_rpi,1
		vsp bgm_min_lsp,0 : mov %bgm_mood_1min,0
		;vsp bgm_kowai_skip_lsp,0 : 
		;vsp bgm_kowai_only_lsp,0 : mov %bgm_kowai_skip,0
		print 1

		;曲が演奏されていなければ演奏を行う(この時､気まぐれ再生にする）
		notif %bm_stop = 0 jumpf
			if %bm_m = 2 mov %BtnRes,bgm_btn_ennsou : goto *bgm_mode_100
			if %bm_m <> 2 mov %BtnRes,bgm_btn_ranndamu : goto *bgm_mode_100
		~
		;曲が演奏されていればランダム演奏を行う
		mov %bm_pt,0
		if %bm_m <> 2 vsp bgm_zennkyoku_lsp,0 : vsp bgm_ranndamu_lsp,1 : print 1 : mov %bm_m,2
		mov %bm_pt,0 : goto *bgm_mode_btn_lp
		goto *bgm_mode_btn_lp_0
	*bgm_mode_demo_10

	notif %bgm_mood_demo = 1 goto *bgm_mode_demo_20
		csp 0
		vsp bgm_demo_lsp,0
		print 1
		mov %bgm_mood_demo,0
		mov %BtnRes,bgm_btn_stop
		goto *bgm_mode_100
	*bgm_mode_demo_20
*bgm_mode_demo_skip



;演奏停止処理
notif %BtnRes = bgm_btn_stop goto *bgm_mode_stop
   *bgm_mode_stop100
   ;fede 0,2000
   E_A
   textclear
	csp bgm_title_lsp : csp bgm_sakka_lsp : csp bgm_time_lsp : vsp bgm_ennsou_lsp,0
	mov %tmp,100 : add %tmp,%bm_p : vsp %tmp,0
	print 1
   mov %bm_stop,0
   vsp bgm_ennsou_lsp,0
   ;vsp bgm_zennkyoku_lsp,0
   ;vsp bgm_ranndamu_lsp,0
   print 1 
   
   gosub *bgm_r_shokika
   mov %bm_rnd_kazu,0
   goto *bgm_mode_btn_lp
*bgm_mode_stop


;怖い曲は飛ばすのチェック
notif %BtnRes = bgm_btn_kowai_skip goto *bgm_mode500
   notif %bgm_kowai_skip <= 0 goto *bgm_mode550
      mov %bgm_kowai_skip,1
	vsp bgm_kowai_skip_lsp,1
	vsp bgm_kowai_only_lsp,0
	print 1
      goto *bgm_mode_btn_lp_0
   *bgm_mode550
   
   mov %bgm_kowai_skip,0
   vsp bgm_kowai_skip_lsp,0
   vsp bgm_kowai_only_lsp,0 : print 1
   gosub *bgm_r_shokika
   goto *bgm_mode_btn_lp_0
*bgm_mode500


;怖い曲だけ演奏のチェック
notif %BtnRes = bgm_btn_kowai_only goto *bgm_mode600
   notif %bgm_kowai_skip >= 0 goto *bgm_mode650
      mov %bgm_kowai_skip,-1
	vsp bgm_kowai_skip_lsp,0
	vsp bgm_kowai_only_lsp,1
	print 1
      goto *bgm_mode_btn_lp_0
   *bgm_mode650
   
   mov %bgm_kowai_skip,0
   vsp bgm_kowai_only_lsp,0
   vsp bgm_kowai_skip_lsp,0 : print 1
   gosub *bgm_r_shokika
   goto *bgm_mode_btn_lp_0
*bgm_mode600

;タイトルへ戻る
if %BtnRes = bgm_btn_title goto *bgm_mode_end


;-------------------------------

;上記該当以外は、曲の選択扱い
*bgm_mode_play_kyokunitobu_0

vsp bgm_ennsou_lsp,1 :print 1 ;演奏ボタンをＯＮにする。

;曲を選択して、尚且つランダムモードの場合は初期化を行う
if %bm_m = 2 gosub *bgm_r_shokika


*bgm_mode_play_kyokunitobu

;演奏する曲の曲番号を保持する
mov %bm_p,%BtnRes

;ボタン番号を曲番号に変換
mov %BtnRes,?bgmm[%BtnRes][bm_c]

;怖い曲はスキップにチェックが入っている場合、怖い曲は演奏した事にする
notif %bgm_kowai_skip = 1 goto *bgm_mode_kowai_skip
   if ?bgmm[%bm_p][bm_k] = 0 goto *bgm_mode_kowai_skip 
      ;スキップ処理
      ;ランダム演奏時の設定、演奏曲にチェック、演奏数をプラス１
      if %bm_m = 2 mov ?bgmm[%bm_p][bm_r],1 : inc %bm_rnd_kazu
      
      ;通常演奏で、リピートがオンになっている時、演奏の停止処理
      if %bm_m = 0 if %bm_rpi = 1 goto *bgm_mode_stop100
   
	;曲の時間に０を入れて、演奏中のフラグ変数をONにして次の処理に移る
	mov %bm_pt,0
	mov %bm_stop,1
	goto *bgm_mode_btn_lp
*bgm_mode_kowai_skip

;怖い曲だけ演奏にチェック（-1が代入）されている場合、怖くない曲は演奏した事
notif %bgm_kowai_skip = -1 goto *bgm_mode_kowakunai_skip
   if ?bgmm[%bm_p][bm_k] = 1 goto *bgm_mode_kowakunai_skip
      ;スキップ処理
      ;ランダム演奏時の設定、演奏曲にチェック、演奏数をプラス１
      if %bm_m = 2 mov ?bgmm[%bm_p][bm_r],1 : inc %bm_rnd_kazu
      
      ;通常演奏で、リピートがオンになっている時、演奏の停止処理
      if %bm_m = 0 if %bm_rpi = 1 goto *bgm_mode_stop100
   
	;曲の時間に０を入れて、演奏中のフラグ変数をONにして次の処理に移る
	mov %bm_pt,0
	mov %bm_stop,1
	goto *bgm_mode_btn_lp
*bgm_mode_kowakunai_skip


;デモモードでは、ＥＤ、アンビエントを流さない
notif %bgm_mood_demo = 1 goto *bgm_mode_ed_skip
   notif %BtnRes = %bgm_mood_ed_no goto *bgm_mode_ed_skip_100
      ;スキップ処理
      ;ランダム演奏時の設定、演奏曲にチェック、演奏数をプラス１
      if %bm_m = 2 mov ?bgmm[%bm_p][bm_r],1 : inc %bm_rnd_kazu
      
      ;通常演奏で、リピートがオンになっている時、演奏の停止処理
      if %bm_m = 0 if %bm_rpi = 1 goto *bgm_mode_stop100
   
      ;曲の時間に０を入れて、次の処理に移る
      mov %bm_pt,0
      goto *bgm_mode_btn_lp
   *bgm_mode_ed_skip_100

   notif %BtnRes = %bgm_mood_me1_no goto *bgm_mode_ed_skip
      ;スキップ処理
      ;ランダム演奏時の設定、演奏曲にチェック、演奏数をプラス１
      if %bm_m = 2 mov ?bgmm[%bm_p][bm_r],1 : inc %bm_rnd_kazu
      
      ;通常演奏で、リピートがオンになっている時、演奏の停止処理
      if %bm_m = 0 if %bm_rpi = 1 goto *bgm_mode_stop100
   
	;曲の時間に０を入れて、演奏中のフラグ変数をONにして次の処理に移る
	mov %bm_pt,0
	mov %bm_stop,1
	goto *bgm_mode_btn_lp
*bgm_mode_ed_skip


;作曲者名などの情報を表示する座標を変数に格
mov %bgm_x,23	;Ｘ座標
mov %bgm_y1,329	;Ｙ座標(曲タイトル)
mov %bgm_y2,354	;Ｙ座標(曲タイトル)
mov %bgm_y3,379	;Ｙ座標(曲タイトル)

;101〜450までのスプライト(ブリンクさせている曲のタイトルのブリンクを外す）
for %tmp = 101 to 250
	vsp %tmp,0
next

;直前の曲がＯＰムービーだった場合はフェードをスキップする。
if %bgm_mood_tyokuzenn_op_fede_skip >= 1 jumpf
	;メドレーモードでストップからの演奏でなければここでフェードアウト命令を入れる。
	if %bgm_mood_1min = 1 notif %bm_stop = 0 fede 0,3000 : wait 1000

	;デモモードでストップからの演奏でなければここでフェードアウト命令を入れる。
	if %bgm_mood_demo = 1 notif %bm_stop = 0 fede 0,2000 : wait 1000
~
mov %bgm_mood_tyokuzenn_op_fede_skip,0



;演奏のオン、オフ変数をオンに
mov %bm_stop,1

;それぞれの曲のルーチンに飛ぶ
if %BtnRes = 1 goto *bgm_mode_harukaze
if %BtnRes = 2 goto *bgm_mode_wasureenu
if %BtnRes = 3 goto *bgm_mode_odoroita
if %BtnRes = 4 goto *bgm_mode_youen
if %BtnRes = 5 goto *bgm_mode_yoino
if %BtnRes = 6 goto *bgm_mode_pre3
if %BtnRes = 7 goto *bgm_mode_lgold
if %BtnRes = 8 goto *bgm_mode_lg01
if %BtnRes = 9 goto *bgm_mode_pre4
if %BtnRes = 10 goto *bgm_mode_sokoniha
if %BtnRes = 11 goto *bgm_mode_lgsimi
if %BtnRes = 12 goto *bgm_mode_gakkou
if %BtnRes = 13 goto *bgm_mode_usimitu
if %BtnRes = 14 goto *bgm_mode_tatoeba
if %BtnRes = 15 goto *bgm_mode_toge
if %BtnRes = 16 goto *bgm_mode_kirihana
if %BtnRes = 17 goto *bgm_mode_tuyoku
if %BtnRes = 18 goto *bgm_mode_usi
if %BtnRes = 19 goto *bgm_mode_hep
if %BtnRes = 20 goto *bgm_mode_d3
if %BtnRes = 21 goto *bgm_mode_kuraki
if %BtnRes = 22 goto *bgm_mode_ph2
if %BtnRes = 23 goto *bgm_mode_bansan
if %BtnRes = 24 goto *bgm_mode_Cross
if %BtnRes = 25 goto *bgm_mode_agate
if %BtnRes = 26 goto *bgm_mode_danzai
if %BtnRes = 27 goto *bgm_mode_tasogareni
if %BtnRes = 28 goto *bgm_mode_tukiyo
if %BtnRes = 29 goto *bgm_mode_hanatiru
if %BtnRes = 30 goto *bgm_mode_akushumi
if %BtnRes = 31 goto *bgm_mode_bokaboka
if %BtnRes = 32 goto *bgm_mode_kyou
if %BtnRes = 33 goto *bgm_mode_tetote


if %BtnRes = 1001 goto *bgm_mode_hasiwowataruhatasogarezo
if %BtnRes = 1002 goto *bgm_mode_d7
if %BtnRes = 1003 goto *bgm_mode_d10
if %BtnRes = 1004 goto *bgm_mode_d25
if %BtnRes = 1005 goto *bgm_mode_Spider
if %BtnRes = 1006 goto *bgm_mode_kokoronoakari
;if %BtnRes = %bgm_mood_turu_pettan_no goto *bgm_mode_turu_pettan
if %BtnRes = %bgm_mood_op_no goto *bgm_mode_op
;if %BtnRes = %bgm_mood_op2_no goto *bgm_mode_op2
;if %BtnRes = %bgm_mood_op3_no goto *bgm_mode_op3
;if %BtnRes = %bgm_mood_ed_no goto *bgm_mode_ed
;if %BtnRes = %bgm_mood_me1_no goto *bgm_mode_me_arasi
;if %BtnRes = %bgm_mood_me2_no goto *bgm_mode_me_tokei

goto *bgm_mode_btn_lp
;***********************************************************************


; 曲の一覧を消すルーチン
*bgm_mode_k

layermessage 0,"x"
bg black,0

;101〜450までのスプライトを隠す。
for %tmp = 101 to 450
	vsp %tmp,0
next

for %tmp = 40 to 20 step -1
	vsp %tmp,0
next

vsp 499,0

mono 0

csp 0 : csp 1
csp 10 : csp 11 : csp 12 : csp 13 : csp 14 : csp 15 : csp 16
csp 500 : csp 501 : csp 502 : csp 503 : csp 504 : csp 505 : csp 506: csp 507: csp 508: csp 509: csp 510
csp bgm_title_lsp : csp bgm_sakka_lsp : csp bgm_time_lsp
textclear
setwindow 40,385,30,3,22,22,0,2,20,1,1,#ffffff,0,0,610,495
return

;-----------------------------------

*bgm_mode_k2
bg black,0
csp 0 : csp 1
csp 10 : csp 11 : csp 12 : csp 13 : csp 14 : csp 15 : csp 16
csp 500 : csp 501 : csp 502 : csp 503 : csp 504 : csp 505 : csp 506: csp 507: csp 508: csp 509: csp 510
csp bgm_title_lsp : csp bgm_sakka_lsp : csp bgm_time_lsp
textclear
setwindow 40,385,30,3,22,22,0,2,20,1,1,#ffffff,0,0,610,495
return

;-----------------------------------

; 曲の一覧を表示するルーチン
*bgm_mode_h2

;演奏されている曲に、曲の一覧ページを合わせる。
;if %bm_p >= 1 && %bm_p <=52 mov %bgm_mood_page,1
;if %bm_p >= 53 mov %bgm_mood_page,2

if %bgm_mood_page = 1 for %tmp = 301 to 360 : vsp %tmp,1 : next : vsp bgm_btn_next_lsp,1
if %bgm_mood_page = 2 for %tmp = 361 to 450 : vsp %tmp,1 : next : vsp bgm_btn_back_lsp,1
vsp 499,1

;演奏中の曲は白くブリンクさせる
if %bgm_mood_page = 1 && %bm_p <= 60 mov %tmp,100 : add %tmp,%bm_p : vsp %tmp,1
if %bgm_mood_page = 2 && %bm_p >= 61 mov %tmp,100 : add %tmp,%bm_p : vsp %tmp,1

for %tmp = 40 to 22 step -1
	vsp %tmp,1
next

;フラグの立っていないメニューはOFF（白いブリンクを解除する）
if %bm_m = 0 vsp bgm_zennkyoku_lsp,0 : vsp bgm_ranndamu_lsp,0
if %bm_m = 1 vsp bgm_zennkyoku_lsp,1 : vsp bgm_ranndamu_lsp,0
if %bm_m = 2 vsp bgm_zennkyoku_lsp,0 : vsp bgm_ranndamu_lsp,1

if %bm_rpi = 0 vsp bgm_rpi_lsp,0
if %bgm_mood_1min = 0 vsp bgm_min_lsp,0
if %bgm_mood_demo = 0 vsp bgm_demo_lsp,0

if %bgm_kowai_skip = 0 vsp bgm_kowai_skip_lsp,0 : vsp bgm_kowai_only_lsp,0
if %bgm_kowai_skip = 1 vsp bgm_kowai_skip_lsp,1 : vsp bgm_kowai_only_lsp,0
if %bgm_kowai_skip = -1 vsp bgm_kowai_skip_lsp,0 : vsp bgm_kowai_only_lsp,1

;演奏中の曲は白くブリンクさせる
if %bgm_mood_page = 1 && %bm_p <= 60 mov %tmp,100 : add %tmp,%bm_p : vsp %tmp,1
if %bgm_mood_page = 2 && %bm_p >= 61 mov %tmp,100 : add %tmp,%bm_p : vsp %tmp,1
return

;---------------------------------

;ランダムモード、演奏曲チェック初期化ルーチン
*bgm_r_shokika
   ;現在演奏している以外の曲のチェック変数を初期化する。
   for %3810 = 1 to %bgm_max2
      mov ?bgmm[%3810][bm_r],0
   next
   mov %bm_rnd_kazu,0
return

;-----------------------------------

;** 各ＢＧＭを演奏、情報を表示***************************************
   
   ;演奏ルーチン
   *bgm_play
      if %bm_m = 10 mov %bm_m,0

	E_A

	;曲の時間を入力
	mov %bm_pt,?bgmm[%bm_p][bm_t]

	;ボリュームを７０に固定
	bgmvol 70 : mov %BGM_v_Ch,70
	
	;メドレーモードがＯＮの場合は56000-3000ミリ秒を入力
	if %bgm_mood_1min = 1 if ?bgmm[%bm_p][bm_t] > 60000 mov %bm_pt,53000

	;デモモードがＯＮの場合は15000-4000ミリ秒を入力
	if %bgm_mood_demo = 1 mov %bm_pt,11000
	
	;環境音なら演奏はなし演奏処理をスキップ
	if %bm_p = %bgm_mood_me1_btn_no jumpf
      
      ;通常演奏で、リピートがオンになっている時のみ、一曲リピート
      if %bm_m = 0 if %bm_rpi = 1 bgm $?bgmm[%bm_p][bm_pa] : resettimer : return
      
      ;ランダム演奏時の設定、演奏曲にチェック、演奏数をプラス１
      if %bm_m = 2 mov ?bgmm[%bm_p][bm_r],1 : inc %bm_rnd_kazu
      
      bgmonce $?bgmm[%bm_p][bm_pa]
      

	~
	resettimer
      add %bm_pt,4000 ;無音状態の時間
   return


;***********************************************************************
;デモモード用、ＣＧの表示
*demo_hyouji
	mono 0

	;ゲームロゴを常に表示

	;bgm_mode\ss\demo_pvの画像をランダムで選択して表示する。
	rnd2 %tmp,1,266

	mov $tmp,":c;bgm_mode\demo_pv\"
	
	itoa $tmp2,%tmp
	
	add $tmp,$tmp2
	add $tmp,".jpg"

	gosub *bgm_play

	;環境音はここで改めて演奏する。
	if %bm_p = %bgm_mood_me1_btn_no meplay2 1,13,70

	lsp 0,":a;bmp\efe\Cinema_logo2.BMP",310,350
	lsp 1,$tmp,0,0 : print 22

goto *bgm_mode_btn_lp

;***********************************************************************

*bgm_mode_end ;エンド処理
   ;各設定の初期化
   csp -1                               ;スプライト画像の、メモリからの消去
   btndef ""                            ;ボタン画像の、メモリからの消去
                             ;立ち絵の消去
   setwindow 31,16,22,16,26,26,0,2,20,1,1,#999999,0,0,639,479
   erasetextwindow 1
   rmode 1
   mono 0
                                    ;右クリックメニューの有効化
	E_A
	bgmvol 70
	seplay 9,82
	print 1
   	cl a,1
	texton
	if %monoflg = 1 mono 1
	if %monoflg = 2 mono 2
	wait 1000
   mov %title_skip,1
reset
;goto *b_title
;***********************************************************************
;***********************************************************************
;ＢＧＭ、曲のデータ入力サブルーチン
;***********************************************************************
*bgm_mode_bgm_date_input

mov %3801,0

inc %3801 
; OPムービー
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],%bgm_mood_op_no	;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],100000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Opening`" ;曲名
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	add %3802,400
	mov ?bgmm[%3801][bm_pa],%3802
	mov $%3802,"movie\higan_op1.mpg"


; １
   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],1		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],81000		;曲の長さ1:21
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Spring Breeze`" ;曲名
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],4		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],110000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Heat Shimmer`" ;曲名1:50
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],7		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],137000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Ancient Evil`" ;曲名2:17
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],8		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],130000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Dark Music`" ;曲名2:10
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],9		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],203000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`◆Kagami-san`" ;曲名3:23
	mov ?bgmm[%3801][bm_k],1		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],11		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],154000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`◆Bumps`" ;曲名2:34
	mov ?bgmm[%3801][bm_k],1		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],15		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],156000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Thorns`" ;曲名2:36
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],16		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],187000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`◆Mist Flower`" ;曲名3:07
	mov ?bgmm[%3801][bm_k],1		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],24		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],213000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`A Cross Line`" ;曲名3:33
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],31		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],166000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"Warmth" ;曲名2:46
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],32		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],162000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Kyou`" ;曲名2:42
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],33		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],163000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Hand in Hand`" ;曲名2:43手と手をつないで（as you)
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],2		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],394000		;曲の長さ6:34
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`An Unforgettable Day`" ;曲名
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],3		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],343000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Were You Surprised?`" ;曲名5:43
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],6		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],233000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Forgotten Flower`" ;曲名3:53
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],12		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],193000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`◆School Tour Guide`" ;曲名3:13
	mov ?bgmm[%3801][bm_k],1		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],13		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],50000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`◆The Dead of Night`" ;曲名0:50
	mov ?bgmm[%3801][bm_k],1		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],19		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],58000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Meeting The Shrine Lion`" ;曲名0:58
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],20		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],189000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Savon de Fleur`" ;曲名3:09
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],22		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],220000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Bodiless Night`" ;曲名3:40
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],1004		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],185000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`The Border of Shade`" ;曲名3:05
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],1003		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],196000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Celebratory Festival`" ;曲名3:16
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],25		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],240000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Dendritic Agate`" ;曲名4:00
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],26		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],310000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Conviction Corridor`" ;曲名5:10
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],28		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],223000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Moonlit Clock`" ;曲名3:44
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],5		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],256000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Chasing Shadows at Evening`" ;曲名4:16
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],10		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],390000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`◆There Shouldn't Be Anyone There`" ;曲名6:30
	mov ?bgmm[%3801][bm_k],1		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],14		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],98000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Take That Ghost Story for Example`" ;曲名1:38
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],17		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],96000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Live Strong, as the Flowers Bloom`" ;曲名1:36
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],18		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],217000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Visiting the Shrine at 2 A.M.`" ;曲名3:37
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],21		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],404000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`The Moon Draped Over Pure Darkness`" ;曲名6:44
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],1002		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],198000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Song For the Lonesome You`" ;曲名3:18
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],23		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],204000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Banquet of a Neverending Night`" ;曲名3:27
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],27		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],185000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Blood Spilled at Dusk Tastes Like Honey`" ;曲名3:06黄昏に滴る血は蜜の味
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],29		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],196000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`A Night Sky Filled With Petals`" ;曲名3:17
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],30		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],130000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`A Song Choice Unbecoming of a Music Teacher`" ;曲名2:10悪趣味な音楽教師による選曲
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],1006		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],179000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`The Light in Your Heart`" ;曲名2:59心の灯り
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

   inc %3801 
	mov %3802,3600 : add %3802,%3801
	mov ?bgmm[%3801][bm_c],1005		;曲の割り当て番号（チャンネル）
	mov ?bgmm[%3801][bm_t],158000		;曲の長さ
	add %3802,400
	mov ?bgmm[%3801][bm_n],%3802 : mov $%3802,"`Spider Lily ~The Two Joined at Dawn~`" ;曲名2:38
	mov ?bgmm[%3801][bm_k],0		;怖い曲かどうかのチェック
	gosub *bgm_mode_path_shutoku		;ファイルへのパスの取得

return
;-------------------
;ＯＰ等は変数にパスを入れる
	;ファイルへのパスの取得サブルーチン
	*bgm_mode_path_shutoku
		add %3802,400
		mov ?bgmm[%3801][bm_pa],%3802
		mov %BGM_s_Ch,?bgmm[%3801][bm_c]
		mov %bgm_mood_file_path_flg,1
		gosub *BGM_List
		mov $%3802,$BGM_Play
	return
	;-------------------
;-------------------


;***********************************************************************
;ＢＧＭモード、各曲ごとの処理、表示ルーチン
;***********************************************************************

   ;オープニングの演奏（ムービーなのでここだけ特殊処理、ムービーの流れている間は操作不可）
   *bgm_mode_op
	mono 0
	E_A
	lsp 0,":c;bmp\r_click\black.bmp",0,0
	bg black,22

      ;通常演奏で、リピートがオンになっている時のみ、一曲リピート
	if %bm_m = 10 mov %bm_m,0
	notif %bm_m = 0 goto *bgm_mode_op_sk
	notif %bm_rpi = 1 goto *bgm_mode_op_sk
		bgmvol 100
		movie "movie\higan_op1.mpg",click,loop
		gosub *bgm_mode_k
		gosub *bgm_mode_h2
		bg black,22
		mov %BtnRes,bgm_btn_stop
		goto *bgm_mode_100
	*bgm_mode_op_sk
	
      ;ランダム演奏時の設定、演奏曲にチェック、演奏数をプラス１
      if %bm_m = 2 mov ?bgmm[%bm_p][bm_r],1 : inc %bm_rnd_kazu
      
		bgmvol 100
	movie "movie\higan_op1.mpg",click
	
	mov %bm_pt,0

	gosub *bgm_mode_k
	gosub *bgm_mode_h2

	if %bgm_mood_demo = 1 lsp 0,":c;bmp\r_click\black.bmp",0,0

	bg black,22
	delay 1500
	mov %bgm_mood_tyokuzenn_op_fede_skip,0

   gettimer %3801:sub %bm_pt,%3801;曲の残り時間を入力
   goto *bgm_mode_btn_lp   
;------------------------













*bgm_mode_spider
	bgmvol 100
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k : print 22
	btndef ":c;bmp\background\efe\end_1.bmp"                   ;スクロール画像を読みこむ
	lsph 510,r_black,0,0 
	gosub *bgm_play
	trap *ED_SKIP
	vsp 510,1 : print 1

        blt 0,0,640,480,0,0,640,480 ;高速描画処理　座標０
  ;      bg end_1b,0                 ;最後の背景を裏側に表示
        waittimer 40                ;
	gosub *higan1_scroll                   ;スクロール実行本体

	delay 1000
	prnumclear                              ;数値ラベル設定クリア
	ofscpy
	lsp 510,":c;bmp\background\efe\HAPPY_PHOTO.bmp",0,0
	print 42

	*ED_SKIP
	prnumclear                              ;数値ラベル設定クリア
	ofscpy
	trap off

	lsp 510,":c;bmp\background\efe\HAPPY_PHOTO.bmp",0,0

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　Ｓｐｉｄｅｒ　Ｌｉｌｙ〜妹背の結びは東雲ぞ〜",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ラック眼力、ｄａｉ、佐倉かなえ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF 【Vocal 】　ミルクェハ（木野寧、佐倉かなえ）",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Spider Lily ~The Two Joined at Dawn~`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Luck Ganriki, dai, Kanae Sakura`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Vocal 】Milkwafer (Nei Kino, Kanae Sakura)`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_botann_teigi

*bgm_mode_kokoronoakari
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 55

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　心の灯り",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍ．Ｚａｋｋｙ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：００",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】The Light in Your Heart`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】M.Zakky`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:00`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_tetote
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 90

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　手と手をつないで",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　２：４３",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Hand in Hand`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】2:43`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_kyou
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 85

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　キョウ",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　２：４２",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Kyou`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】2:42`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp


*bgm_mode_bokaboka
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 85

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　ぽかぽか",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍ．Ｚａｋｋｙ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　２：４６",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Warmth`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】M.Zakky`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】2:46`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp


*bgm_mode_akushumi
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 85

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　悪趣味な音楽教師による選曲",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ラック眼力",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　２：１０",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】A Song Choice Unbecoming of a Music Teacher`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Luck Ganriki`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】2:10`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_hanatiru
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 70

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　花散る夜空",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍ．Ｚａｋｋｙ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：１７",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】A Night Sky Filled with Petals`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】M.Zakky`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:17`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp


*bgm_mode_tukiyo
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 72

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　月夜の時計",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍ．Ｚａｋｋｙ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：４４",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Moonlit Clock`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】M.Zakky`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:44`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_tasogareni
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 45

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　黄昏に滴る血は蜜の味",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍ．Ｚａｋｋｙ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：０６",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Blood Spilled at Dusk Tastes Like Honey`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】M.Zakky`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:06`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_danzai
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 75

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　断罪回廊",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍ．Ｚａｋｋｙ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　５：１０",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Conviction Corridor`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】M.Zakky`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】5:10`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp


*bgm_mode_agate
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 67

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　Dendritic Agate -Instrumental-",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍｏｒｒｉｇａｎ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　４：００",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Dendritic Agate -Instrumental-`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Morrigan`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】4:00`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_Cross
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 85

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　ａ　ｃｒｏｓｓ　ｌｉｎｅ",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：３３",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】A Cross Line`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:33`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_bansan
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 55

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　常夜の晩餐会",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍ．Ｚａｋｋｙ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：２７",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Banquet of a Neverending Night`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】M.Zakky`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:27`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

;ここから２夜
;------------------------

*bgm_mode_harukaze
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

;	mov $tmp,":c;" 
;	add $tmp,"bgm_mode\ss\test.bmp"
;	lsp 510,$tmp,0,0
;	print 22

;	delay 1000
	
;	*bgm_mode_harukaze_1000
;	trap off	

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 90

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　春風",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　１：２１",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Spring Breeze`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】1:21`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_wasureenu
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 70

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　忘れ得ぬこの日",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍｏｒｒｉｇａｎ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　６：３５",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】An Unforgettable Day`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Morrigan`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】6:35`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp



*bgm_mode_youen
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 75

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　陽炎",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　１：５０",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Heat Shimmer`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】1:50`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp



*bgm_mode_odoroita
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 75

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　驚いた？",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍｏｒｒｉｇａｎ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　５：４３",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Were You Surprised?`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Morrigan`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】5:43`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp


*bgm_mode_yoino
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 65

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　宵の影踏み",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍｏｒｒｉｇａｎ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　４：１６",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Chasing Shadows at Evening`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Morrigan`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】4:16`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_pre3
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 80

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　葬り去る花",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｐｒｅ−ｈｏｌｄｅｒ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：５３",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Forgotten Flower`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Pre-holder`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:53`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_lgold
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 90

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　フルキアシキ",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ラック眼力",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　２：１７",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Ancient Evil`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Luck Ganriki`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】2:17`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_lg01
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 75

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　クラヤミオンガク",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ラック眼力",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　２：１０",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Dark Music`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Luck Ganriki`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】2:10`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_pre4
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 80

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　かがみさん",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｐｒｅ−ｈｏｌｄｅｒ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：２４",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Kagami-san`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Pre-holder`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:24`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_sokoniha
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 75

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　そこには誰もいないはず",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍｏｒｒｉｇａｎ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　６：３０",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】There Shouldn't Be Anyone There`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Morrigan`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】6:30`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_lgsimi
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 85

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　フ゜ツフ゜ツ",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ラック眼力",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　２：３４",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Bumps`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Luck Ganriki`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】2:34`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_gakkou
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 90

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　学校案内人",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：１３",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】School Tour Guide`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:13`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_usimitu
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 80

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　丑三つ時",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　０：５０",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】The Dead of Night`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】0:50`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_tatoeba
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 85

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　例えば、こんな怪談",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　１：３８",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Take That Ghost Story for Example`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】1:38`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_toge
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 90

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　棘",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　２：３６",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Thorns`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】2:36`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_kirihana
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 75

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　霧花",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍ．Ｚａｋｋｙ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：０６",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Mist Flower`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】M.Zakky`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:06`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_tuyoku
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play
	bgmvol 80

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　強く生きて、花は咲く",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　１：３６",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Live Strong, as the Flowers Bloom`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】1:36`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_usi
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 80

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　丑ノ刻参り",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ＳＢ　ＹＵＮＥ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：３７",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Visiting the Shrine at 2 A.M.`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】SB YUNE`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:37`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_hep
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 85


;lsp bgm_title_lsp,":s#FFFFFF【Title 】　ほこライオン、はじめました",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　０：５８",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Meeting the Shrine Lion`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】0:58`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_d3
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 90

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　サボンの花",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：０９",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Savon de Fleur`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:09`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_kuraki
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 75

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　暗き昏き闇は月を背に",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｍｏｒｒｉｇａｎ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　６：４４",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】The Moon Draped Over Pure Darkness`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Morrigan`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】6:44`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_ph2
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 75

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　体のない夜",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　Ｐｒｅ−ｈｏｌｄｅｒ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：４０",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Bodiless Night`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Pre-holder`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:40`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_d7
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 100

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　ひとりぼっちの君のうた",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：１８",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Song for the Lonesome You`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:18`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_d10
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 90

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　いわいとまつり",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：１６",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】Celebratory Festival`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:16`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_d25
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bgm_mode\bgm_back.bmp"
	lsp 510,$tmp,0,0
	bgmvol 90

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　冥暗境界線",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ｄａｉ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF【Time　】　３：０５",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】The Border of Shade`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】dai`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF`【Time　】3:05`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

*bgm_mode_hasiwowataruhatasogarezo
	if %bgm_mood_demo = 1 goto *demo_hyouji
	gosub *bgm_mode_k ;: print 22
	gosub *bgm_play

	mov $tmp,":c;" 
	add $tmp,"bmp\background\efe\e022.bmp"
	lsp 510,$tmp,0,-50
	bgmvol 100

;      lsp bgm_title_lsp,":s#FFFFFF【Title 】　愛しを渡るは黄昏ぞ（エンディングＶｅｒ）",%bgm_x,%bgm_y1
;      lsp bgm_sakka_lsp,":s#FFFFFF【Artist】　ラック眼力、ｄａｉ、佐倉かなえ",%bgm_x,%bgm_y2
;      lsp bgm_time_lsp,":s#FFFFFF 【Vocal 】　木野寧",%bgm_x,%bgm_y3
      lsp bgm_title_lsp,":s#FFFFFF`【Title 】The Love Crossed at Dusk (Ending Ver.)`",%bgm_x,%bgm_y1
      lsp bgm_sakka_lsp,":s#FFFFFF`【Artist】Luck Ganriki, dai, Kanae Sakura`",%bgm_x,%bgm_y2
      lsp bgm_time_lsp,":s#FFFFFF `【Vocal 】Nei Kino`",%bgm_x,%bgm_y3

      gosub *bgm_mode_h2
      print 2
   gettimer %3801:sub %bm_pt,%3801 ;曲の残り時間を入力
goto *bgm_mode_btn_lp

;***********　立ち位置の座標を取得して、%xの変数に代入するルーチン
*tati_x_get
	;(スプライト番号、立ち位置）
	getparam %x_get_tmp1,%x_get_tmp2
	
	getspsize %x_get_tmp1,%x_get_tmp3,%x_get_tmp4,%x_get_tmp5
	
	if %x_get_tmp2 = l div %x_get_tmp3,2 : mov %x,160 : sub %x,%x_get_tmp3
	if %x_get_tmp2 = c div %x_get_tmp3,2 : mov %x,320 : sub %x,%x_get_tmp3
	if %x_get_tmp2 = r div %x_get_tmp3,2 : mov %x,480 : sub %x,%x_get_tmp3

return

;***************************************************************







;*********************************************************
;アイキャッチ
;アイキャッチ方式が三パターン
;<*eye,*eye1>は左右から表示、その後ロゴ
;*********************************************************

*eye
return

*eye1
getparam %clock_moto_h,%clock_moto_m,%clock_h,%clock_m,%clock_speed,%clock_reverse,%clock_x,%clock_y,%clock_kakudai
	dllefe_off	;雨を停止する命令を入れる
	skipoff
	textoff                                     ;テキストウィンドウ消去（エフェクトはデフォルト）

if %intro_prog_flg = off jumpf       ;スプライトプログラムが動いているかの確認

	mov %intro_prog_flg,off           ;スプライトプログラムのフラグをオフ
	layermessage 10,"clear/10"           ;スプライトプログラムのスプライト消去
	layermessage 10,"program_end/10"           ;スプライトプログラムのプログラム停止
	csp 10
~


lsp 101,":c;bmp\r_click\black.bmp",0,0,150
print 1

;ワレエフェクトと共に黒フェード

	lsp 100,":a;bmp\efe\ware.bmp",0,0
	E_A
	seplay 9,1022
	print 1
	wait 1000

	;ロゴの表示(左から右）
	lsp2 10,":a;bmp\efe\Cinema_logo.BMP",450,415,100,100,0
	print 5


;時計の表示
;clock %clock_moto_h,%clock_moto_m,%clock_h,%clock_m,%clock_speed,%clock_reverse,%clock_x,%clock_y,%clock_kakudai
gosub *eye_btn_exit

csp -1
setwindow 31,16,22,16,26,26,0,2,20,1,1,#999999,0,0,639,479
!sd
texton
print 2

notif %clock_iti_flg = 1 jumpf
$tmp
~
mov %clock_iti_flg,0
gosub *DATA_SET
return

;---------------------------------------

*eye2
;getparam %clock_moto_h,%clock_moto_m,%clock_h,%clock_m,%clock_speed,%clock_reverse,%clock_x,%clock_y,%clock_kakudai
	dllefe_off	;雨を停止する命令を入れる

;華模様のアイキャッチを上下に表示する。

;時計を表示して回す。
;clock 7,10,6,13,10,0,320,240,50
;delay 5000

lsp 100,":c;bmp\efe\hana_d.bmp",0,0,250

print 6
lsp2 10,":a;bmp\efe\Cinema_logo2.BMP",450,415,100,100,0
print 5

delay 6000

;lsp 101,":c;bmp\r_click\black.bmp",0,0,150
csp -1
bg black,2
delay 2000

;clock %clock_moto_h,%clock_moto_m,%clock_h,%clock_m,%clock_speed,%clock_reverse,%clock_x,%clock_y,%clock_kakudai
gosub *eye_btn_exit

csp -1
setwindow 31,16,22,16,26,26,0,2,20,1,1,#999999,0,0,639,479
!sd
texton
print 1

notif %clock_iti_flg = 1 jumpf
$tmp
~
mov %clock_iti_flg,0
gosub *DATA_SET
return

;---------------------------------------

*eye3
;getparam %clock_moto_h,%clock_moto_m,%clock_h,%clock_m,%clock_speed,%clock_reverse,%clock_x,%clock_y,%clock_kakudai
	dllefe_off	;雨を停止する命令を入れる
gosub *DATA_SET
csp -1
lsp 100,":c;bmp\r_click\black.bmp",0,0

;泡フェード
print 99,4000,"breakup.dll/llB"
lsp2 10,":a;bmp\efe\Cinema_logo2.BMP",450,415,100,100,0
print 5

;clock %clock_moto_h,%clock_moto_m,%clock_h,%clock_m,%clock_speed,%clock_reverse,%clock_x,%clock_y,%clock_kakudai

csp -1
setwindow 31,16,22,16,26,26,0,2,20,1,1,#999999,0,0,639,479
!sd
texton
print 2
return

;---------------------------------------


*eye11
	dllefe_off	;雨を停止する命令を入れる
    skipoff
    textoff                                     ;テキストウィンドウ消去（エフェクトはデフォルト）

if %intro_prog_flg = off jumpf       ;スプライトプログラムが動いているかの確認

	mov %intro_prog_flg,off           ;スプライトプログラムのフラグをオフ
	layermessage 10,"clear/10"           ;スプライトプログラムのスプライト消去
	layermessage 10,"program_end/10"           ;スプライトプログラムのプログラム停止
	csp 10
~

lsp 101,":c;bmp\r_click\black.bmp",0,0,150
print 1

;ワレエフェクトと共に黒フェード

	lsp 100,":a;bmp\efe\ware.bmp",0,0
	E_A
	seplay 9,1022
	print 1
	wait 1000

	;ロゴの表示(左から右）
	lsp2 10,":a;bmp\efe\Cinema_logo.BMP",450,415,100,100,0
	print 5

gosub *eye_btn_exit2

csp -1
setwindow 31,16,22,16,26,26,0,2,20,1,1,#999999,0,0,639,479
!sd
texton
print 2

notif %clock_iti_flg = 1 jumpf
$tmp
~
mov %clock_iti_flg,0
gosub *DATA_SET

return

;---------------------------------------

*eye12
	dllefe_off	;雨を停止する命令を入れる
;華模様のアイキャッチを上下に表示する。

;lsp 100,":a;bmp\efe\hana_u.bmp",0,0
lsp 99,":c;bmp\efe\hana_d.bmp",0,0

print 6
lsp2 10,":a;bmp\efe\Cinema_logo2.BMP",450,415,100,100,0
print 5

delay 6000

;lsp 101,":c;bmp\r_click\black.bmp",0,0,150
csp -1
bg black,2
delay 2000

gosub *eye_btn_exit2

csp -1
setwindow 31,16,22,16,26,26,0,2,20,1,1,#999999,0,0,639,479
!sd
texton
print 1

notif %clock_iti_flg = 1 jumpf
$tmp
~
mov %clock_iti_flg,0
gosub *DATA_SET

return

;---------------------------------------

;アイキャッチのクリック待ち、左クリックはそのまま進み右クリックなら右クリックシステムに移動する。
*eye_btn_exit

	gosub *DATA_SET
	btndef ""
	
	;針の停止音、２４時００分にはこの音は入れない
	if %clock_h = 24 && %clock_m = 0 jumpf
		seplay 9,30
	~

	btntime 8000
	btnwait2 %tmp
	
	if %tmp = -1 csp -1 : csp2 -1 : bg black,2 : gosub *rmenu_main : fede 0,2000 : return
	if %tmp >= 0 csp -1 : csp2 -1 : bg black,2 : fede 0,2000 : return
	if %tmp < 0 csp -1 : csp2 -1 : bg black,2 : fede 0,2000 : return
goto *eye_btn_exit

;---------------------------------------

;アイキャッチのクリック待ち、左クリックはそのまま進み右クリックなら右クリックシステムに移動する。
;時計表示なしバージョン
*eye_btn_exit2

	gosub *DATA_SET
	btndef ""
	btntime 4000
	btnwait2 %tmp
	
	if %tmp = -1 csp -1 : csp2 -1 : bg black,2 : gosub *rmenu_main : fede 0,2000 : return
	if %tmp >= 0 csp -1 : csp2 -1 : bg black,2 : fede 0,2000 : return
	if %tmp < 0 csp -1 : csp2 -1 : bg black,2 : fede 0,2000 : return
goto *eye_btn_exit2

;---------------------------------------

;*********************************************************
;メタ視点での特殊処理（レイヤーの番号に注意）（８８０〜８９０を使用）
;*********************************************************
;---------------------------------------
;メタ視_背景セット
*meta_set
*mset
	;フィルターセット。
	;黒のフィルターを表示
	lsp msp_kuro,":c;bmp\r_click\black.bmp",0,0,150
	print 22

	lsp msp_hana_u,":a;bmp\efe\hana_u.bmp",0,0
	lsp msp_hana_d,":a;bmp\efe\hana_d.bmp",0,364
	print 28
	delay 1000
return
;---------------------------------------
;メタ視_背景セット（華を表示しないバージョン）
*meta_set2
*mset2
	;フィルターセット。
	;黒のフィルターを表示
	lsp msp_kuro,":c;bmp\r_click\black.bmp",0,0,150
	print 22
	delay 1000
return
;---------------------------------------
;メタ視_背景セット(背景切替のエフェクトを指定する）
*meta_set_ef
*msetef
	getparam %tmp11,%tmp12

	;フィルターセット
	;黒のフィルターを表示
	lsp msp_kuro,":c;bmp\r_click\black.bmp",0,0,150
	print %tmp11

	lsp msp_hana_u,":a;bmp\efe\hana_u.bmp",0,0
	lsp msp_hana_d,":a;bmp\efe\hana_d.bmp",0,364
	print %tmp12
	delay 1000
return
;---------------------------------------
;メタ視_背景セット(背景切替のエフェクトを指定する）
*meta_set2_ef
*mset2ef
	getparam %tmp11

	;フィルターセット
	;黒のフィルターを表示
	lsp msp_kuro,":c;bmp\r_click\black.bmp",0,0,150
	print %tmp11
return
;---------------------------------------
;メタ視を抜ける処理
*meta_end
*mend
	for %meta_tmp1 = 880 to msp_kuro
		csp %meta_tmp1
	next
	print 8
return
;---------------------------------------
;メタ視を抜ける処理
*meta_end_ef
*mendef
	getparam %tmp11
	for %meta_tmp1 = 880 to msp_kuro
		csp %meta_tmp1
	next
	print %tmp11
return
;---------------------------------------


;メタ視、立ち絵の表示
*meta_ld
*mld
	getparam %meta_tmp1,%ld_pass_number,%meta_tmp3  ;立ち絵位置（l左　C中央　ｒ右）、立ち絵、表示方法

	if %meta_tmp1 = l mov %Free7,msp_l2
	if %meta_tmp1 = c mov %Free7,msp_c2
	if %meta_tmp1 = r mov %Free7,msp_r2
	gosub *ld_data
	lsp %Free7,$ld_pass2,%x,0 ;体部分データの表示

	;左の画像が前に来るようにする。レイヤー
	if %meta_tmp1 = l mov %meta_tmp4,msp_l lsp msp_l,$ld_pass,0,0
	if %meta_tmp1 = c mov %meta_tmp4,msp_c lsp msp_c,$ld_pass,0,0
	if %meta_tmp1 = r mov %meta_tmp4,msp_r lsp msp_r,$ld_pass,0,0

	;スプライトの画像情報を取得（%meta_tmp5に画像の幅が代入される）
	getspsize %meta_tmp4,%meta_tmp5,%meta_tmp6,%meta_tmp7
	;画像の幅/4　で画像中心からの幅が求められるので（立ち位置のX座標からその幅を引く）
	div %meta_tmp5,2
	if %meta_tmp1 = l mov %x,160
	if %meta_tmp1 = c mov %x,320
	if %meta_tmp1 = r mov %x,480

	;立ち絵の座標の個別設定（92.txt）
	mov %Free4,0 ;y座標
	gosub *tati_zahyou


	sub %x,%meta_tmp5
	amsp %meta_tmp4,%x,%Free4
	amsp %Free7,%x,%Free4


	;彼岸花の正式立ち絵が着たらこのイフは消してください。
	;彼岸花の立ち位置の調整
;	notif %ld_pass_number >= hig_start_number jumpf
;	notif %ld_pass_number <= hig_last_number jumpf
;
;		mov %Free3,-190  ;x座標
;		if %meta_tmp1 = l mov %x,%Free3 - 20
;		if %meta_tmp1 = c mov %x,%Free3 + 160 
;		if %meta_tmp1 = r mov %x,%Free3 + 320 + 20
;		mov %Free4,5 ;y座標
;	amsp %meta_tmp4,%x,%Free4 + 6
;	
;	amsp %Free7,%x-46,%Free4
;	~
	;スミレ夜の座標チェンジ。
	;彼岸花の立ち位置の調整
	notif %ld_pass_number >= smi_start_number jumpf
	notif %ld_pass_number <= smi_last_number jumpf
	notif %smi_Isyou = 2 jumpf

		mov %Free3,-120  ;x座標
		if %meta_tmp1 = l mov %x,%Free3 - 20
		if %meta_tmp1 = c mov %x,%Free3 + 160 
		if %meta_tmp1 = r mov %x,%Free3 + 320 + 20
		mov %Free4,17 ;y座標
	amsp %meta_tmp4,%x-5,%Free4 -2 ;縦の座標
	amsp %Free7,%x,%Free4 ;の座標
	~



	print %meta_tmp3
return
;---------------------------------------
;メタ視、立ち絵の消去
*meta_cl
*mcl

	getparam %meta_tmp1,%meta_tmp3  ;消去立ち絵位置（l左　C中央　ｒ右　a全部）、消去方法

	;左の画像が前に来るようにする。レイヤー293左　294真ん中　295が右
	if %meta_tmp1 = l : csp msp_l2 : csp msp_l
	if %meta_tmp1 = c : csp msp_c2 : csp msp_c
	if %meta_tmp1 = r : csp msp_r2 : csp msp_r
	if %meta_tmp1 = a : csp msp_l : csp msp_c : csp msp_r : csp msp_l2 : csp msp_c2 : csp msp_r2
	print %meta_tmp3
return
;---------------------------------------
;メタ視、背景の切替
*meta_bg
*mbg
	getparam $meta_tmp2,%meta_tmp3  ;ファイルパス、表示方法

	;文字にblack、whiteを指定したら、黒、白入れて対応する。
	if $meta_tmp2 = "black" lsp msp_bg,":c;bmp\r_click\black.bmp",0,0 jumpf
	if $meta_tmp2 = "white" lsp msp_bg,":c;bmp\r_click\white.bmp",0,0 jumpf

	mov $meta_tmp3,":c;"
	add $meta_tmp3,$meta_tmp2
	lsp msp_bg,$meta_tmp3,0,0

	~

	print %meta_tmp3
return
;---------------------------------------
;---------------------------------------
;背景の切替
*bg
	getparam $meta_tmp2,%meta_tmp3  ;ファイルパス、表示方法

	;文字にblack、whiteを指定したら、黒、白入れて対応する。
	if $meta_tmp2 = "black" lsp bg_def,":c;bmp\r_click\black.bmp",0,0 jumpf
	if $meta_tmp2 = "white" lsp bg_def,":c;bmp\r_click\white.bmp",0,0 jumpf

	mov $meta_tmp3,":c;"
	add $meta_tmp3,$meta_tmp2
	lsp bg_def,$meta_tmp3,0,0
	
	~
	csp tati_l1
	csp tati_c1
	csp tati_r1
	csp tati_l2
	csp tati_c2
	csp tati_r2

	print %meta_tmp3
return
;---------------------------------------
;メタ視、背景の削除
*meta_cbg
*mcbg
	getparam %meta_tmp3 ;表示方法
	csp msp_bg
	print %meta_tmp3
return

;---------------------------------------
;メタ視、華の削除
*mchana
	getparam %meta_tmp3 ;表示方法
	csp msp_hana_d
	csp msp_hana_u
	print %meta_tmp3
return
;---------------------------------------
;メタ視、華背景の切替
*mhana1
	getparam %meta_tmp3 ;表示方法
	csp msp_hana_d
	csp msp_hana_u
	lsp msp_hana_d,":a;bmp\background\efe\hana1.bmp",0,0
	print %meta_tmp3
return
;---------------------------------------
;メタ視、華背景の切替
*mhana2
	getparam %meta_tmp3 ;表示方法
	csp msp_hana_d
	csp msp_hana_u
	lsp msp_hana_d,":a;bmp\background\efe\hana2.bmp",0,0
	print %meta_tmp3
return
;---------------------------------------




;*********************************************************
;右クリックカスタムシステム
;右クリックで最初に現れる関数
;ＢＴ作成版　２００７年６月２０
;*********************************************************


;----------------------------------------
;右クリックシステムに入る前の予備メニュー

*rmenu_csutom     ;右クリック画面表示
	mov %r_for_title,0

	textoff
	btndef ""

	gosub *rmenu_main_higan
;	lsp r_clear_lsp,":a/2,0,3;bmp\r_click\r_btn_clear.bmp",15,400
;	lsp r_system_lsp,":a/2,0,3;bmp\r_click\r_btn_system.bmp",15,440

;	print 1
	
;	*rmenu_btlp
;		btndef ""

;		spbtn r_clear_lsp,r_clear_lsp
;		spbtn r_system_lsp,r_system_lsp

;		btnwait2 %BtnRes

;		if %BtnRes = r_system_lsp seplay 9,1001 : goto *rmenu_main
;		if %BtnRes = r_clear_lsp csp r_clear_lsp : csp r_system_lsp : seplay 9,1000 : print 1:goto *rmenu_btlp

;	texton
;	csp r_clear_lsp
;	csp r_system_lsp
;	btndef ""
;	print 1
	return

	;goto *rmenu_custom_btlp_100

;----------------------------------------
;右クリックシステム、メインメニュー

*rmenu_main
btndef ""

goto *rmenu_main_higan




;*********************************************************
;右クリックメニュー
;2009/07  BT作成
;*********************************************************

;----------------------------------------
;右クリックシステム、メインメニュー
*rmenu_main_higan

btndef ""

;csp r_clear_lsp
;csp r_system_lsp
;csp r_change_lsp

textoff
monocro off
*rmenu_sai_hyouji_higan
	textoff
	btndef ""
	;背景

	lsp 130,":c;bmp\system\hana_load.bmp",-120,60,80
	lsp r_black_lsp,":c;bmp\r_click\black.bmp",0,0,250

	;システムボタンの表示
	mov %tmp,240 : mov %tmp1,r_menu_top_y - 130

	lsp r_save_lsp,r_save,%tmp,%tmp1 : add %tmp1,42
	lsp r_load_lsp,r_load,%tmp,%tmp1 : add %tmp1,42
	lsp r_blog_lsp,r_blog,%tmp,%tmp1 : add %tmp1,42

	lsp r_title_lsp,r_title,%tmp,%tmp1 : add %tmp1,42
	lsp r_exit_lsp,r_exit,%tmp,%tmp1 : add %tmp1,42

	print 1

;	btndef ""
	
	spbtn r_save_lsp,r_save_lsp
	spbtn r_load_lsp,r_load_lsp
	spbtn r_blog_lsp,r_blog_lsp
	spbtn r_title_lsp,r_title_lsp
	spbtn r_exit_lsp,r_exit_lsp

	btnwait2 %BtnRes

	if %BtnRes = -3 : goto *rmenu_sai_hyouji_higan ;下ホイール
	if %BtnRes = -2 : goto *rmenu_sai_hyouji_higan ;上ホイール
	if %btnres = 0 : goto *rmenu_sai_hyouji_higan
	if %BtnRes = r_save_lsp gosub *r_gazou_shokika_ep5 : seplay 9,1000 : gosub *savemode :goto *r_exit2_ep5
	if %BtnRes = r_load_lsp gosub *r_gazou_shokika_ep5 : seplay 9,1000 : gosub *loadmode :goto *r_exit2_ep5
	if %BtnRes = r_blog_lsp gosub *r_gazou_shokika_ep5 : seplay 9,1000 : gosub *text_cw_lookback : goto *rmenu_main_higan

	if %BtnRes = r_title_lsp seplay 9,1000 : goto *rmenu_title_back_ep5
	if %BtnRes = r_exit_lsp goto *r_exit_ep5
	if %BtnRes = -1 goto *r_exit_ep5                ;右クリックで抜ける
	if %BtnRes = -10 goto *r_exit_ep5               ;ＥＳＣで抜ける

;********************************************************************************
; 画像初期化ルーチン
*r_gazou_shokika_ep5


	for %tmp = 100 to r_used_lsp : csp %tmp next
	csp r_bg_lsp
	csp r_black_lsp
	csp 699
return
;********************************************************************************

;********************************************************************************
; 右クリックシステムを抜ける処理
*r_exit_ep5
	btndef ""
	gosub *r_gazou_shokika_ep5
	csp r_bg_lsp
	csp r_black_lsp
	seplay 9,80
	print 1
	texton
	if %monoflg = 1 mono 1
	if %monoflg = 2 mono 2

return ;右クリックシステムを抜ける

;-------------------------------------
; 右クリックシステムを抜ける処理割れるエフェクトなし
*r_exit2_ep5
	btndef ""
	gosub *r_gazou_shokika_ep5
	csp r_bg_lsp
	csp r_black_lsp
	print 1
	texton
	if %monoflg = 1 mono 1
	if %monoflg = 2 mono 2
return ;右クリックシステムを抜ける

;********************************************************************************




j+**************************************************************
; 右クリック、タイトルバック機能
; 確認メッセージを出して、処理を行う。
;**************************************************************
*rmenu_title_back_ep5

	;確認メッセージの表示
	lsp title_back_bg_lsp,title_back_bg,193,171,230
	lsp title_back_yes_lsp,title_back_yes,230,216
	lsp title_back_no_lsp,title_back_no,230,254
	print 1

	btndef ""
	
	spbtn title_back_yes_lsp,title_back_yes_lsp
	spbtn title_back_no_lsp,title_back_no_lsp
	
	*rmenu_title_back_btn_lp_ep5

	btnwait2 %tmp
	
	notif %tmp = title_back_yes_lsp jumpf
		btndef ""
		csp -1
		E_A
		mov %title_skip,1
		seplay 9,79

		bg black,2
		delay 3000
		texton
		
		reset
	~

	if %tmp = title_back_no_lsp csp title_back_bg_lsp : csp title_back_yes_lsp :csp title_back_no_lsp : seplay 9,1000 : goto *rmenu_sai_hyouji_higan
	if %tmp = 0 csp title_back_bg_lsp : csp title_back_yes_lsp :csp title_back_no_lsp goto *rmenu_sai_hyouji_higan
	if %tmp = -1 csp title_back_bg_lsp : csp title_back_yes_lsp :csp title_back_no_lsp goto *rmenu_sai_hyouji_higan
	
	
	goto *rmenu_title_back_btn_lp_ep5

;**************************************************************







;セーブ＆ロード画面

;************************************************************
;セーブ画面
;************************************************************
*savemode

;テスト用
;bg M_o1b,1

saveoff

if %remnu_data = on  csp rmenu_databtn
 csp rmenu_btn1
 csp rmenu_btn2
 csp rmenu_btn3

*savemode1

for %Free1 = 1 to 100

 csp %Free1

 next

 mov %Free1,0
 mov %Free2,0
 mov %Free3,0
 mov %Free4,0
 mov %Free5,0
 mov %Free6,0

mov %savescreenshotsp,31   ;セーブデータスクリーンショットスプライト
mov %saveTimesp,11
mov %saveTextsp,21

csp Page1
csp Page2
csp Page3
csp Page4
csp Page5
csp rmenu_btn_Exit
csp Save
csp Load

btndef ""

;セーブ画面のページの初期化の有無
;初回起動時にはページ数を１に変更

 if %savemodePage = 0 mov %savemodePage,1
 mov %savemodePageNow,%savemodePage

;画面表示

;背景表示


;背景飾り
;lsp 700,":c;bmp\r_click\black.bmp",0,0,black_toukaritu

lsp 700,":a;bmp\black.bmp",-0,0
lsp 699,":c;bmp\system\hana_save.bmp",0,6,80
lsp 698,":c;bmp\system\hane_save.bmp",-0,6,210

;システムボタン
mov %tmp1,130 : mov %tmp2,38
lsp Save,":a/2,0,3;bmp\system\save_b.bmp",10,%tmp1 : add %tmp1,%tmp2    ;ページ２
lsp Load,":a/2,0,3;bmp\system\Load.bmp",10,%tmp1 : add %tmp1,%tmp2 
lsp rmenu_btn_Exit,":a/2,0,3;bmp\system\exit.bmp",10,%tmp1


;ページボタン(現在のページをブリンクする）
mov %tmp1,280 : mov %tmp2,38
 lsp Page1,":a/2,0,3;bmp\system\Page1.bmp",10,%tmp1 : add %tmp1,%tmp2   ;ページ１
 lsp Page2,":a/2,0,3;bmp\system\Page2.bmp",10,%tmp1 : add %tmp1,%tmp2    ;ページ２
 lsp Page3,":a/2,0,3;bmp\system\Page3.bmp",10,%tmp1 : add %tmp1,%tmp2    ;ページ３
 lsp Page4,":a/2,0,3;bmp\system\Page4.bmp",10,%tmp1 : add %tmp1,%tmp2    ;ページ２
 lsp Page5,":a/2,0,3;bmp\system\Page5.bmp",10,%tmp1 : add %tmp1,%tmp2    ;ページ３

if %savemodePageNow = 1 lsp Page1,":a/2,0,3;bmp\system\Page1_b.bmp",10,280    ;ページ１
if %savemodePageNow = 2 lsp Page2,":a/2,0,3;bmp\system\Page2_b.bmp",10,318    ;ページ２
if %savemodePageNow = 3 lsp Page3,":a/2,0,3;bmp\system\Page3_b.bmp",10,356    ;ページ３
if %savemodePageNow = 4 lsp Page4,":a/2,0,3;bmp\system\Page4_b.bmp",10,394    ;ページ２
if %savemodePageNow = 5 lsp Page5,":a/2,0,3;bmp\system\Page5_b.bmp",10,432    ;ページ３


;セーブデータ用表示枠

mov %tmp,15
 lsp 41,":c/2,0,3;bmp\system\savearea.bmp",212,%tmp,150 : add %tmp,107    ;セーブエリア枠１
 lsp 42,":c/2,0,3;bmp\system\savearea.bmp",212,%tmp,150 : add %tmp,107   ;セーブエリア枠２
 lsp 43,":c/2,0,3;bmp\system\savearea.bmp",212,%tmp,150 : add %tmp,107   ;セーブエリア枠３
 lsp 44,":c/2,0,3;bmp\system\savearea.bmp",212,%tmp,150		   ;セーブエリア枠４
		   ;セーブエリア枠５

mov %tmp,40
 lsp 45,":c/2,0,3;bmp\system\savearea.bmp",425,%tmp,150 : add %tmp,107 
 lsp 46,":c/2,0,3;bmp\system\savearea.bmp",425,%tmp,150 : add %tmp,107   ;セーブエリア枠６
 lsp 47,":c/2,0,3;bmp\system\savearea.bmp",425,%tmp,150 : add %tmp,107   ;セーブエリア枠７
 lsp 48,":c/2,0,3;bmp\system\savearea.bmp",425,%tmp,150   		   ;セーブエリア枠８
; lsp 49,":a;bmp\system\savearea9.bmp",425,%tmp,50 : add %tmp,110   ;セーブエリア枠９
; lsp 50,":a;bmp\system\savearea10.bmp",425,%tmp,50    ;セーブエリア枠１０




*savemode2

;ページ確認

mov %Free1,savedataflg                  ;セーブデータグローバルエリア番号取得
mov %Free2,%savemodePageNow
mul %Free2,8
sub %Free2,8
inc %Free2
add %Free1,%Free2            ;セーブデータエリア開始番号収得

mov %Free3,%Free2                ;セーブデータ番号
mov %savedataTime,savedataTime
add %savedataTime,%Free3


mov %Free5,savedataComment
add %Free5,%Free3

mov %savescreenshotsp,31   ;セーブデータスクリーンショットスプライト
mov %saveTimesp,11
mov %saveTextsp,21

mov %x,218
mov %y,25

  mov %x2,218
  mov %y2,86

  mov %x3,280
  mov %y3,55

for %Free2 = 1 to 8

;xy軸を取得

  if %y > 400 mov %y,50 : mov %x,431 : mov %y2,111 : mov %y3,80 :mov %x2,431 : mov %x3,495

;セーブデータを収得しているか確認する

  if %%Free1 = 0 jumpf

 ;セーブデータのスクリーンショットを表示する

   mov $Free1,"screenshot\ss"
   itoa  $Free2,%Free3
   add $Free1,$Free2
   add $Free1,".bmp"

		;ファイルのチェック、存在しないファイルなら仮ファイルを入れる
		fileexist %tmp,$Free1
		if %tmp = 0 mov $Free1,"screenshot\dummy.bmp"

mov $Free1,":c;" + $Free1
lsp %savescreenshotsp,$Free1,%x,%y


 ;セーブデータの時間データを表示する

  mov $saveTimesp2,":s/12,12,1;#FFFFFF"
  add $saveTimesp2,$%savedataTime


  lsp %saveTimesp,$saveTimesp2,%x2,%y2

 ;セーブデータのテキストデータを表示する

  mov $saveTextsp2,":s/12,12,1;#FFFFFF"
  add $saveTextsp2,$%Free5

  lsp %saveTextsp,$saveTextsp2,%x3,%y3

  ~
  inc %Free3
  inc %Free1 
  add %y2,107
  add %y3,107
  add %y,107
  inc %savedataTime
  inc %saveTimesp
  inc %saveTextsp
  inc %savescreenshotsp
  inc %Free4
  inc %Free5

 next

;ボタン化

btndef ""
spbtn 41,1      ;セーブエリア１
spbtn 42,2      ;セーブエリア２
spbtn 43,3      ;セーブエリア３
spbtn 44,4      ;セーブエリア４
spbtn 45,5      ;セーブエリア５
spbtn 46,6      ;セーブエリア６
spbtn 47,7      ;セーブエリア７
spbtn 48,8      ;セーブエリア８
;spbtn 49,9      ;セーブエリア９
;spbtn 50,10      ;セーブエリア１０

spbtn Page1,Page1      ;ページボタン　１〜８
spbtn Page2,Page2      ;ページボタン　９〜１６
spbtn Page3,Page3      ;ページボタン１７〜２４
spbtn Page4,Page4      ;ページボタン２５〜３２
spbtn Page5,Page5      ;ページボタン３３〜４０

spbtn rmenu_btn_Exit,rmenu_btn_Exit      ;終了ボタン
spbtn Load,Load      ;ロード画面変更ボタン

print 10,200

*savemode_btn_loop

  btnwait2 %BtnRes

;セーブデータボタンを選択

   if %BtnRes = 1 goto *savemode_save
   if %BtnRes = 2 goto *savemode_save
   if %BtnRes = 3 goto *savemode_save
   if %BtnRes = 4 goto *savemode_save
   if %BtnRes = 5 goto *savemode_save
   if %BtnRes = 6 goto *savemode_save
   if %BtnRes = 7 goto *savemode_save
   if %BtnRes = 8 goto *savemode_save
   ;if %BtnRes = 9 goto *savemode_save
   ;if %BtnRes = 10 goto *savemode_save

;ページ移動ボタンを選択

   if %BtnRes = Page1  mov %savemodePage,1 : seplay 9,1010 : goto *savemode1
   if %BtnRes = Page2  mov %savemodePage,2 : seplay 9,1010 : goto *savemode1
   if %BtnRes = Page3  mov %savemodePage,3 : seplay 9,1010 : goto *savemode1
   if %BtnRes = Page4  mov %savemodePage,4 : seplay 9,1010 : goto *savemode1
   if %BtnRes = Page5  mov %savemodePage,5 : seplay 9,1010 : goto *savemode1


;システム切り替えボタンを選択

   if %BtnRes = rmenu_btn_Exit goto *save_exit
   if %BtnRes = Load seplay 9,1000 : goto *loadmode
   if %BtnRes = -1   goto *save_exit

goto *savemode_btn_loop


*savemode_save

if %savemodePageNow = 1 lsp Page1,":a/2,0,3;bmp\system\Page1_b.bmp",10,280    ;ページ１
if %savemodePageNow = 2 lsp Page2,":a/2,0,3;bmp\system\Page2_b.bmp",10,318    ;ページ２
if %savemodePageNow = 3 lsp Page3,":a/2,0,3;bmp\system\Page3_b.bmp",10,356    ;ページ３
if %savemodePageNow = 4 lsp Page4,":a/2,0,3;bmp\system\Page4_b.bmp",10,394    ;ページ２
if %savemodePageNow = 5 lsp Page5,":a/2,0,3;bmp\system\Page5_b.bmp",10,432    ;ページ３

;セーブ番号収得

 mov %savedataNowNum,%savemodePageNow
 mul %savedataNowNum,8
 sub %savedataNowNum,8
 add %savedataNowNum,%BtnRes

;セーブ

 savegame %savedataNowNum

 mov %savedataflg,savedataflg
 add %savedataflg,%savedataNowNum
 mov %%savedataflg,1

;スクリーンショットの保存
mov $Free1,"screenshot\ss"
itoa $Free2,%savedataNowNum
add $Free1,$Free2
add $Free1,".bmp"


;セーブデータ番号　月　日　時　分
savescreenshot2 $Free1
savetime %savedataNowNum,%Morth,%Day,%Hour,%Minute

;itoa2 $SaveTime,%Morth : add $SaveTime,"月"
;itoa2 $Free1,%Day : add $SaveTime,$Free1 : add $SaveTime,"日"
;itoa2 $Free1,%Hour : add $SaveTime,$Free1 : add $SaveTime,"時"
;itoa2 $Free1,%Minute : add $SaveTime,$Free1 : add $SaveTime,"分"
; Use abbrev. month name
if %Morth = 1 mov $SaveTime,"`Jan `"
if %Morth = 2 mov $SaveTime,"`Feb `"
if %Morth = 3 mov $SaveTime,"`Mar `"
if %Morth = 4 mov $SaveTime,"`Apr `"
if %Morth = 5 mov $SaveTime,"`May `"
if %Morth = 6 mov $SaveTime,"`Jun `"
if %Morth = 7 mov $SaveTime,"`Jul `"
if %Morth = 8 mov $SaveTime,"`Aug `"
if %Morth = 9 mov $SaveTime,"`Sep `"
if %Morth = 10 mov $SaveTime,"`Oct `"
if %Morth = 11 mov $SaveTime,"`Nov `"
if %Morth = 12 mov $SaveTime,"`Dec `"
itoa $Free1,%Day : add $SaveTime,$Free1 : add $SaveTime,"`, `"
; Use 12-hour time (AM/PM)
if %Hour = 0 mov $Free2,"` AM`" : itoa $Free1,12
if %Hour > 0 && %Hour < 12 mov $Free2,"` AM`" : itoa $Free1,%Hour
if %Hour = 12 mov $Free2,"` PM`" : itoa $Free1,12
if %Hour > 12 && %Hour < 24 mov $Free2,"` PM`" : sub %Hour,12 : itoa $Free1,%Hour : add %Hour,12
add $SaveTime,$Free1 : add $SaveTime,":"
if %Minute < 10 add $SaveTime,"0"
itoa $Free1,%Minute : add $SaveTime,$Free1 : add $SaveTime,$Free2

mov %Free2,savedataTime       ;セーブデータタイムのエリア数の取得
add %Free2,%savedataNowNum             ;保存エリアの確定
mov $%Free2,$SaveTime

;mov $%Free2,":s/8,10,1;#FFFFFF"
;if %scenario_Number = 1 mov $%Free2,"第１話　" : add $%Free2,$SaveTime
;if %scenario_Number = 2 mov $%Free2,"第２話　" : add $%Free2,$SaveTime
;if %scenario_Number = 3 mov $%Free2,"第３話　" : add $%Free2,$SaveTime
;if %scenario_Number = 4 mov $%Free2,"第４話　" : add $%Free2,$SaveTime
;if %scenario_Number = 5 mov $%Free2,"第５話　" : add $%Free2,$SaveTime
;if %scenario_Number = 6 mov $%Free2,"第６話　" : add $%Free2,$SaveTime
;if %scenario_Number = 7 mov $%Free2,"第７話　" : add $%Free2,$SaveTime
;if %scenario_Number = 99 mov $%Free2,"放課後　" : add $%Free2,$SaveTime
if %scenario_Number = 1 mov $%Free2,"`Chapter 1; `" : add $%Free2,$SaveTime
if %scenario_Number = 2 mov $%Free2,"`Chapter 2; `" : add $%Free2,$SaveTime
if %scenario_Number = 3 mov $%Free2,"`Chapter 3; `" : add $%Free2,$SaveTime
if %scenario_Number = 4 mov $%Free2,"`Chapter 4; `" : add $%Free2,$SaveTime
if %scenario_Number = 5 mov $%Free2,"`Chapter 5; `" : add $%Free2,$SaveTime
if %scenario_Number = 6 mov $%Free2,"`Chapter 6; `" : add $%Free2,$SaveTime
if %scenario_Number = 7 mov $%Free2,"`Chapter 7; `" : add $%Free2,$SaveTime
if %scenario_Number = 99 mov $%Free2,"`After School; `" : add $%Free2,$SaveTime

;セーブデータ作成時のコメント取得
;保存するグローバル変数の変数番号を取る

	;ルビ用の変数"/"が入った時に文字化けしないようするルーチン
	split $textlognow,"(",$ru1,$ru2
	if $ru2 == "" jumpf
		split $ru2,"/",$ru3,$m_temp2
		split $ru2,")",$m_temp2,$ru2
		mov $textlognow,$ru1+$ru3+$ru2
	~

mov %Free2,savedataComment+%savedataNowNum
;mid $Free2,$TextlogNow,0,16
;add $Free2,"……"
mid $Free1,$TextlogNow,0,16
mov $Free2,"` " : add $Free2,$Free1
add $Free2,"..."
mov $%Free2,$Free2


seplay 9,81

goto *savemode1


;***************************************************************
;ロード画面
*loadmode
;***************************************************************


 if %remnu_data = on  csp rmenu_databtn
 csp rmenu_btn1
 csp rmenu_btn2
 csp rmenu_btn3

*loadmode1

saveoff

for %Free1 = 1 to 100

 csp %Free1

 next

 csp rmenu_btn1
 csp rmenu_btn2
 csp rmenu_btn3

csp Page1
csp Page2
csp Page3
csp Page4
csp Page5
csp rmenu_btn_Exit
csp Save
csp Load

btndef ""

;セーブ画面のページの初期化の有無
;初回起動時にはページ数を１に変更

 if %savemodePage = 0 mov %savemodePage,1
 mov %savemodePageNow,%savemodePage

;画面表示

;背景表示

;背景飾り
lsp 700,":a;bmp\black.bmp",-0,0
lsp 699,":c;bmp\system\hana_load.bmp",0,6,80
lsp 698,":c;bmp\system\hane_load.bmp",0,6,240


;システムボタン
mov %tmp1,130 : mov %tmp2,38
if %load_for_title = 0 lsp Save,":a/2,0,3;bmp\system\save.bmp",10,%tmp1 : add %tmp1,%tmp2    ;ページ２
lsp Load,":a/2,0,3;bmp\system\Load_b.bmp",10,%tmp1 : add %tmp1,%tmp2 
lsp rmenu_btn_Exit,":a/2,0,3;bmp\system\exit.bmp",10,%tmp1


;ページボタン(現在のページをブリンクする）
mov %tmp1,280 : mov %tmp2,38
 lsp Page1,":a/2,0,3;bmp\system\Page1.bmp",10,%tmp1 : add %tmp1,%tmp2   ;ページ１
 lsp Page2,":a/2,0,3;bmp\system\Page2.bmp",10,%tmp1 : add %tmp1,%tmp2    ;ページ２
 lsp Page3,":a/2,0,3;bmp\system\Page3.bmp",10,%tmp1 : add %tmp1,%tmp2    ;ページ３
 lsp Page4,":a/2,0,3;bmp\system\Page4.bmp",10,%tmp1 : add %tmp1,%tmp2    ;ページ２
 lsp Page5,":a/2,0,3;bmp\system\Page5.bmp",10,%tmp1 : add %tmp1,%tmp2    ;ページ３

if %savemodePageNow = 1 lsp Page1,":a/2,0,3;bmp\system\Page1_b.bmp",10,280    ;ページ１
if %savemodePageNow = 2 lsp Page2,":a/2,0,3;bmp\system\Page2_b.bmp",10,318    ;ページ２
if %savemodePageNow = 3 lsp Page3,":a/2,0,3;bmp\system\Page3_b.bmp",10,356    ;ページ３
if %savemodePageNow = 4 lsp Page4,":a/2,0,3;bmp\system\Page4_b.bmp",10,394    ;ページ２
if %savemodePageNow = 5 lsp Page5,":a/2,0,3;bmp\system\Page5_b.bmp",10,432    ;ページ３


;セーブデータ用表示枠

mov %tmp,15
 lsp 41,":c/2,0,3;bmp\system\loadarea.bmp",212,%tmp,150 : add %tmp,107    ;セーブエリア枠１
 lsp 42,":c/2,0,3;bmp\system\loadarea.bmp",212,%tmp,150 : add %tmp,107   ;セーブエリア枠２
 lsp 43,":c/2,0,3;bmp\system\loadarea.bmp",212,%tmp,150 : add %tmp,107   ;セーブエリア枠３
 lsp 44,":c/2,0,3;bmp\system\loadarea.bmp",212,%tmp,150		   ;セーブエリア枠４
		   ;セーブエリア枠５

mov %tmp,40
 lsp 45,":c/2,0,3;bmp\system\loadarea.bmp",425,%tmp,150 : add %tmp,107 
 lsp 46,":c/2,0,3;bmp\system\loadarea.bmp",425,%tmp,150 : add %tmp,107   ;セーブエリア枠６
 lsp 47,":c/2,0,3;bmp\system\loadarea.bmp",425,%tmp,150 : add %tmp,107   ;セーブエリア枠７
 lsp 48,":c/2,0,3;bmp\system\loadarea.bmp",425,%tmp,150   		   ;セーブエリア枠８
; lsp 49,":a;bmp\system\savearea9.bmp",425,%tmp,50 : add %tmp,110   ;セーブエリア枠９
; lsp 50,":a;bmp\system\savearea10.bmp",425,%tmp,50    ;セーブエリア枠１０



*loadmode2

;ページ確認

mov %Free1,savedataflg                  ;セーブデータグローバルエリア番号取得
mov %Free2,%savemodePageNow
mul %Free2,8
sub %Free2,8
inc %Free2
add %Free1,%Free2            ;セーブデータエリア開始番号収得


mov %Free3,%Free2                ;セーブデータ番号
mov %savedataTime,savedataTime
add %savedataTime,%Free3


mov %Free5,savedataComment
add %Free5,%Free3

mov %savescreenshotsp,31   ;セーブデータスクリーンショットスプライト
mov %saveTimesp,11
mov %saveTextsp,21

mov %x,218
mov %y,25

  mov %x2,218
  mov %y2,86

  mov %x3,280
  mov %y3,55


btndef ""

for %Free2 = 1 to 8

	;xy軸を取得
	if %y > 400 mov %y,50 : mov %x,431 : mov %y2,111 : mov %y3,80 :mov %x2,431 : mov %x3,495

	;セーブデータを収得しているか確認する
	if %%Free1 = 0 jumpf

		;セーブデータのスクリーンショットを表示する
		mov $Free1,"screenshot\ss"
		itoa  $Free2,%Free3
		add $Free1,$Free2
		add $Free1,".bmp"

		;ファイルのチェック、存在しないファイルなら仮ファイルを入れる
		fileexist %tmp,$Free1
		if %tmp = 0 mov $Free1,"screenshot\dummy.bmp"

		mov $Free1,":c;" + $Free1
		lsp %savescreenshotsp,$Free1,%x,%y

		;セーブデータの時間データを表示する
		mov $saveTimesp2,":s/12,12,1;#FFFFFF"
		add $saveTimesp2,$%savedataTime
		lsp %saveTimesp,$saveTimesp2,%x2,%y2
		;セーブデータのテキストデータを表示する

		mov $saveTextsp2,":s/12,12,1;#FFFFFF"
		add $saveTextsp2,$%Free5
		lsp %saveTextsp,$saveTextsp2,%x3,%y3
		
		;ボタン化（データがない場合はボタンにしない）
		mov %tmp,40 : add %tmp,%Free2
		spbtn %tmp,%Free2

  	~


  inc %Free3
  inc %Free1 
  add %y2,107
  add %y3,107
  add %y,107
  inc %savedataTime
  inc %saveTimesp
  inc %saveTextsp
  inc %savescreenshotsp
  inc %Free4
  inc %Free5

 next




spbtn Page1,Page1      ;ページボタン　１〜８
spbtn Page2,Page2      ;ページボタン　９〜１６
spbtn Page3,Page3      ;ページボタン１７〜２４
spbtn Page4,Page4      ;ページボタン２５〜３２
spbtn Page5,Page5      ;ページボタン３３〜４０

spbtn rmenu_btn_Exit,rmenu_btn_Exit      ;終了ボタン
spbtn Save,Save      ;ロード画面変更ボタン


print 10,200

*loadmode_btn_loop

  btnwait2 %BtnRes

;セーブデータボタンを選択

   if %BtnRes = 1 goto *loadmode_load
   if %BtnRes = 2 goto *loadmode_load
   if %BtnRes = 3 goto *loadmode_load
   if %BtnRes = 4 goto *loadmode_load
   if %BtnRes = 5 goto *loadmode_load
   if %BtnRes = 6 goto *loadmode_load
   if %BtnRes = 7 goto *loadmode_load
   if %BtnRes = 8 goto *loadmode_load
   ;if %BtnRes = 9 goto *loadmode_load
   ;if %BtnRes = 10 goto *loadmode_load

;ページ移動ボタンを選択

   if %BtnRes = Page1  mov %savemodePage,1 : seplay 9,1010 : goto *loadmode1
   if %BtnRes = Page2  mov %savemodePage,2 : seplay 9,1010 : goto *loadmode1
   if %BtnRes = Page3  mov %savemodePage,3 : seplay 9,1010 : goto *loadmode1
   if %BtnRes = Page4  mov %savemodePage,4 : seplay 9,1010 : goto *loadmode1
   if %BtnRes = Page5  mov %savemodePage,5 : seplay 9,1010 : goto *loadmode1

;システム切り替えボタンを選択

   if %BtnRes = rmenu_btn_Exit :goto *save_exit
   if %BtnRes = Save seplay 9,1000 : goto *savemode
   if %BtnRes = -1   goto *save_exit

goto *loadmode_btn_loop


*loadmode_load



;ロード番号収得

 mov %savedataNowNum,%savemodePageNow
 mul %savedataNowNum,8
 sub %savedataNowNum,8
 add %savedataNowNum,%BtnRes

;ロード

;右クリックからのエフェクト
notif %load_for_title = 0 jumpf
	;ワレエフェクトと共に黒フェード
	E_A
	seplay 9,82
	seplay 10,82
	seplay 11,82
	lsp 0,":c;bmp\background\efe\e008.bmp",0,0
	delay 50
	print 1
	lsp 0,":c;bmp\background\efe\e009.bmp",0,0
	delay 50
	print 1
	lsp 0,":c;bmp\background\efe\e010.bmp",0,0
	delay 50
	print 1
	delay 500
	lsp 0,":c;bmp\r_click\black.bmp",0,0
	print 22
	bgcopy ;背景を黒に戻す

	delay 2000
~

for %Free1 = 1 to 100

 csp %Free1

 next

csp -1

 csp rmenu_btn1
 csp rmenu_btn2
 csp rmenu_btn3

csp Page1
csp Page2
csp Page3
csp Page4
csp Page5
csp rmenu_btn_Exit
csp Save
csp Load

btndef ""
;layermessage 10,"clear/10"


;タイトルからのエフェクト
notif %load_for_title = 1 jumpf
	;ワレエフェクトと共に黒フェード
	E_A
	seplay 9,82
	seplay 10,82
	seplay 11,82
	lsp 0,":c;bmp\background\efe\e008.bmp",0,0
	delay 50
	print 1
	lsp 0,":c;bmp\background\efe\e009.bmp",0,0
	delay 50
	print 1
	lsp 0,":c;bmp\background\efe\e010.bmp",0,0
	delay 50
	print 1
	delay 500
	lsp 0,":c;bmp\r_click\black.bmp",0,0
	print 22
	delay 2000
~


mov %load_for_title,0


 loadgame %savedataNowNum

goto *loadmode2




;セーブシステム終了
*save_exit

for %Free1 = 1 to 100

 csp %Free1

 next


 csp rmenu_btn1
 csp rmenu_btn2
 csp rmenu_btn3

csp Page1
csp Page2
csp Page3
csp Page4
csp Page5
csp rmenu_btn_Exit
csp Load
csp Save
csp 700
csp 699
csp 698

;csp 700
;csp 698

seplay 8,80

print 1
texton
mov %load_for_title,0
wait 500

;セーブ、ロードから抜ける時は右クリックメニューを飛ばして
;ゲーム画面に復帰させる。

return





*DATA_SET

;立ち絵画像の基本ルート設定

 for %Free1 = MAR_Isyou to ay2_Isyou	;今回の人数
	mov %%Free1,1
 next

return

;*************************************************
;ld_p (立ち絵名）を入れると、
;$ld_passに画像パスを返します
;*************************************************
*ld_p
	getparam %ld_pass_number
	gosub *ld_data
return

;*************************************************
;新立ち絵表示システム
;０９/０８/０５：製作者（八咫桜）
;numalias MAR_start_number	;金蔵の表情の番号の開始
;numalias MAR_last_number	;金蔵の表情の番号の終端
;numalias MAR_Isyou		;金蔵の衣装変数
;%Free1				;立ち絵位置
;%ld_pass_number		;立ち絵表示番号
;%Free3				;表示エフェクト
;$ld_pass			;立ち絵パス
;*************************************************
*cl
	getparam %Free1,%Free2 
	;スプライト（体）の消去
	if %Free1 = l : mov %Free8,tati_l1 ;lのスプライト番号
	if %Free1 = c : mov %Free8,tati_c1 ;cのスプライト番号
	if %Free1 = r : mov %Free8,tati_r1 ;rのスプライト番号
	csp %Free8

	if %Free1 = l : mov %Free8,tati_l2 ;lのスプライト番号
	if %Free1 = c : mov %Free8,tati_c2 ;cのスプライト番号
	if %Free1 = r : mov %Free8,tati_r2 ;rのスプライト番号
	csp %Free8

	if %Free1 = a : csp tati_l1 : csp tati_c1 : csp tati_r1
	if %Free1 = a : csp tati_l2 : csp tati_c2 : csp tati_r2
	
	print %Free2
	;立ち絵（顔）の消去
;	if %Free1 = l : cl l,%Free2 ;l
;	if %Free1 = c : cl c,%Free2 ;c
;	if %Free1 = r : cl r,%Free2 ;r
 
return

*ld
	getparam %meta_tmp1,%ld_pass_number,%meta_tmp3  ;立ち絵位置（l左　C中央　ｒ右）、立ち絵、表示方法

	if %meta_tmp1 = l mov %Free7,tati_l2
	if %meta_tmp1 = c mov %Free7,tati_c2
	if %meta_tmp1 = r mov %Free7,tati_r2
	gosub *ld_data

	lsp %Free7,$ld_pass2,%x,0 ;体部分データの表示

	;右の画像が前に来るようにする。レイヤー
	if %meta_tmp1 = l mov %meta_tmp4,tati_l1 lsp tati_l1,$ld_pass,0,0
	if %meta_tmp1 = c mov %meta_tmp4,tati_c1 lsp tati_c1,$ld_pass,0,0
	if %meta_tmp1 = r mov %meta_tmp4,tati_r1 lsp tati_r1,$ld_pass,0,0

	;スプライトの画像情報を取得（%meta_tmp5に画像の幅が代入される）
	getspsize %meta_tmp4,%meta_tmp5,%meta_tmp6,%meta_tmp7
	;画像の幅/4　で画像中心からの幅が求められるので（立ち位置のX座標からその幅を引く）
	div %meta_tmp5,2
	if %meta_tmp1 = l mov %x,160
	if %meta_tmp1 = c mov %x,320
	if %meta_tmp1 = r mov %x,480

	mov %Free4,0 ;y座標
	gosub *tati_zahyou


	sub %x,%meta_tmp5
	amsp %meta_tmp4,%x,%Free4
	amsp %Free7,%x,%Free4





	;彼岸花の正式立ち絵が着たらこのイフは消してください。
	;彼岸花の立ち位置の調整
;	notif %ld_pass_number >= hig_start_number jumpf
;	notif %ld_pass_number <= hig_last_number jumpf
;
;		mov %Free3,-190  ;x座標
;		if %meta_tmp1 = l mov %x,%Free3 - 20
;		if %meta_tmp1 = c mov %x,%Free3 + 160 
;		if %meta_tmp1 = r mov %x,%Free3 + 320 + 20
;		mov %Free4,5 ;y座標
;	amsp %meta_tmp4,%x,%Free4 + 6
;	
;	amsp %Free7,%x-46,%Free4
;	~

	;スミレ夜の座標チェンジ。
	;彼岸花の立ち位置の調整
	notif %ld_pass_number >= smi_start_number jumpf
	notif %ld_pass_number <= smi_last_number jumpf
	notif %smi_Isyou = 2 jumpf

		mov %Free3,-120  ;x座標
		if %meta_tmp1 = l mov %x,%Free3 - 20
		if %meta_tmp1 = c mov %x,%Free3 + 160 
		if %meta_tmp1 = r mov %x,%Free3 + 320 + 20
		mov %Free4,17 ;y座標
	amsp %meta_tmp4,%x-5,%Free4 -2 ;縦の座標
	amsp %Free7,%x,%Free4 ;の座標
	~





	print %meta_tmp3

return

*ld_data
	btndef clear
	;立絵パス
	notif %ld_pass_number >= MAR_start_number jumpf
	notif %ld_pass_number <= MAR_last_number jumpf

		if %MAR_Isyou = 1	gosub *MAR_Isyou1 : return
		if %MAR_Isyou = 2	gosub *MAR_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス金森
	notif %ld_pass_number >= KAN_start_number jumpf
	notif %ld_pass_number <= KAN_last_number jumpf
		if %KAN_Isyou = 1	gosub *KAN_Isyou1 : return
		if %KAN_Isyou = 2	gosub *KAN_Isyou2 : return

	goto *err_textbox

	~

	;立絵パス
	notif %ld_pass_number >= HIG_start_number jumpf
	notif %ld_pass_number <= HIG_last_number jumpf

		if %HIG_Isyou = 1	gosub *HIG_Isyou1 : return
		if %HIG_Isyou = 2	gosub *HIG_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= NON_start_number jumpf
	notif %ld_pass_number <= NON_last_number jumpf

		if %NON_Isyou = 1	gosub *NON_Isyou1 : return
		if %NON_Isyou = 2	gosub *NON_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= YOU_start_number jumpf
	notif %ld_pass_number <= YOU_last_number jumpf

		if %YOU_Isyou = 1	gosub *YOU_Isyou1 : return
		if %YOU_Isyou = 2	gosub *YOU_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= KOU_start_number jumpf
	notif %ld_pass_number <= KOU_last_number jumpf

		if %KOU_Isyou = 1	gosub *KOU_Isyou1 : return
		if %KOU_Isyou = 2	gosub *KOU_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= HIK_start_number jumpf
	notif %ld_pass_number <= HIK_last_number jumpf

		if %HIK_Isyou = 1	gosub *HIK_Isyou1 : return
		if %HIK_Isyou = 2	gosub *HIK_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= HAM_start_number jumpf
	notif %ld_pass_number <= HAM_last_number jumpf

		if %HAM_Isyou = 1	gosub *HAM_Isyou1 : return
		if %HAM_Isyou = 2	gosub *HAM_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= HOK_start_number jumpf
	notif %ld_pass_number <= HOK_last_number jumpf

		if %HOK_Isyou = 1	gosub *HOK_Isyou1 : return
		if %HOK_Isyou = 2	gosub *HOK_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= MID_start_number jumpf
	notif %ld_pass_number <= MID_last_number jumpf

		if %MID_Isyou = 1	gosub *MID_Isyou1 : return
		if %MID_Isyou = 2	gosub *MID_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= SIN_start_number jumpf
	notif %ld_pass_number <= SIN_last_number jumpf

		if %SIN_Isyou = 1	gosub *SIN_Isyou1 : return
		if %SIN_Isyou = 2	gosub *SIN_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= MIC_start_number jumpf
	notif %ld_pass_number <= MIC_last_number jumpf

		if %MIC_Isyou = 1	gosub *MIC_Isyou1 : return
		if %MIC_Isyou = 2	gosub *MIC_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= SAK_start_number jumpf
	notif %ld_pass_number <= SAK_last_number jumpf

		if %SAK_Isyou = 1	gosub *SAK_Isyou1 : return
		if %SAK_Isyou = 2	gosub *SAK_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= YUK_start_number jumpf
	notif %ld_pass_number <= YUK_last_number jumpf

		if %YUK_Isyou = 1	gosub *YUK_Isyou1 : return
		if %YUK_Isyou = 2	gosub *YUK_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= SMI_start_number jumpf
	notif %ld_pass_number <= SMI_last_number jumpf

		if %SMI_Isyou = 1	gosub *SMI_Isyou1 : return
		if %SMI_Isyou = 2	gosub *SMI_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= YO2_start_number jumpf
	notif %ld_pass_number <= YO2_last_number jumpf

		if %YO2_Isyou = 1	gosub *YO2_Isyou1 : return
		if %YO2_Isyou = 2	gosub *YO2_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= AYA_start_number jumpf
	notif %ld_pass_number <= AYA_last_number jumpf

		if %AYA_Isyou = 1	gosub *AYA_Isyou1 : return
		if %AYA_Isyou = 2	gosub *AYA_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= IZA_start_number jumpf
	notif %ld_pass_number <= IZA_last_number jumpf

		if %IZA_Isyou = 1	gosub *IZA_Isyou1 : return
		if %IZA_Isyou = 2	gosub *IZA_Isyou2 : return

	goto *err_textbox

	~

	;立絵パス
	notif %ld_pass_number >= YOS_start_number jumpf
	notif %ld_pass_number <= YOS_last_number jumpf

		if %YOS_Isyou = 1	gosub *YOS_Isyou1 : return
		if %YOS_Isyou = 2	gosub *YOS_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= AZA_start_number jumpf
	notif %ld_pass_number <= AZA_last_number jumpf

		if %AZA_Isyou = 1	gosub *AZA_Isyou1 : return
		if %AZA_Isyou = 2	gosub *AZA_Isyou2 : return

	goto *err_textbox

	~

	;立絵パス
	notif %ld_pass_number >= RUN_start_number jumpf
	notif %ld_pass_number <= RUN_last_number jumpf

		if %RUN_Isyou = 1	gosub *RUN_Isyou1 : return
		if %RUN_Isyou = 2	gosub *RUN_Isyou2 : return

	goto *err_textbox

	~

	;立絵パス
	notif %ld_pass_number >= NOD_start_number jumpf
	notif %ld_pass_number <= NOD_last_number jumpf

		if %NOD_Isyou = 1	gosub *NOD_Isyou1 : return
		if %NOD_Isyou = 2	gosub *NOD_Isyou2 : return

	goto *err_textbox

	~

	;立絵パス
	notif %ld_pass_number >= NAF_start_number jumpf
	notif %ld_pass_number <= NAF_last_number jumpf

		if %NAF_Isyou = 1	gosub *NAF_Isyou1 : return
		if %NAF_Isyou = 2	gosub *NAF_Isyou2 : return

	goto *err_textbox

	~

	;立絵パス
	notif %ld_pass_number >= SHU_start_number jumpf
	notif %ld_pass_number <= SHU_last_number jumpf

		if %SHU_Isyou = 1	gosub *SHU_Isyou1 : return
		if %SHU_Isyou = 2	gosub *SHU_Isyou2 : return

	goto *err_textbox

	~

	;立絵パス
	notif %ld_pass_number >= SH2_start_number jumpf
	notif %ld_pass_number <= SH2_last_number jumpf

		if %SH2_Isyou = 1	gosub *SH2_Isyou1 : return
		if %SH2_Isyou = 2	gosub *SH2_Isyou2 : return

	goto *err_textbox

	~

	;立絵パス
	notif %ld_pass_number >= KYO_start_number jumpf
	notif %ld_pass_number <= KYO_last_number jumpf

		if %KYO_Isyou = 1	gosub *KYO_Isyou1 : return
		if %KYO_Isyou = 2	gosub *KYO_Isyou2 : return

	goto *err_textbox

	~


	;立絵パス
	notif %ld_pass_number >= TOM_start_number jumpf
	notif %ld_pass_number <= TOM_last_number jumpf

		if %TOM_Isyou = 1	gosub *TOM_Isyou1 : return
		if %TOM_Isyou = 2	gosub *TOM_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
	notif %ld_pass_number >= ma2_start_number jumpf
	notif %ld_pass_number <= ma2_last_number jumpf

		if %ma2_Isyou = 1	gosub *ma2_Isyou1 : return
		if %ma2_Isyou = 2	gosub *ma2_Isyou2 : return

	goto *err_textbox

	~
	;立絵パス
;	notif %ld_pass_number >= _start_number jumpf
;	notif %ld_pass_number <= _last_number jumpf

;		if %_Isyou = 1	gosub *_Isyou1 : return
;		if %_Isyou = 2	gosub *_Isyou2 : return

;	goto *err_textbox

;	~
	;立絵パス
	notif %ld_pass_number >= AY2_start_number jumpf
	notif %ld_pass_number <= AY2_last_number jumpf

		if %AY2_Isyou = 1	gosub *AY2_Isyou1 : return
		if %AY2_Isyou = 2	gosub *AY2_Isyou2 : return

	goto *err_textbox

	~

return


;毬枝
*MAR_Isyou1

		if %ld_pass_number = MAR_D1 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D2 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D2a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D2a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D2n mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D2n.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D3 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D3a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D3n mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D3n.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D4 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D4a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I1 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I1.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I1a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I1a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I2 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I2.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I2a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I2a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I3 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I3.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I3a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I4 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I4.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I4a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I5 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I5.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I6 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I6.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I6a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I6a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_N1 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_N1.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_N2 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_N2.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_W1 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_W1.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_W2 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_W2.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_W2n mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_W2n.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_W3 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_W3.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_W4 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_W4.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_O1 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_O1.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\U.bmp"return ;顔、体データ


goto *err_textbox2

return

;金森先生
*KAN_Isyou1


;		lsp %Free7,":a;bmp2\TATI\kan\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = KAN_D1 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_D2 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_D3 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_D4 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_D5 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_D3a mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_D3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_k1 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_k1.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_k2 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_k2.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_k3 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_k3.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_k4 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_k4.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_k5 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_k5.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_i1 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_i1.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_i2 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_i2.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_w1 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_w1.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_w2 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_w2.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KAN_w3 mov $ld_pass,":a;bmp2\TATI\KAN\1\KAN_w3.bmp" : mov $ld_pass2,":a;bmp2\TATI\kan\2\1.bmp"return ;顔、体データ
goto *err_textbox2

return

;彼岸花
*HIG_Isyou1

;		lsp %Free7,":a;bmp2\TATI\hig\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = HIG_D1 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D2 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D3 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D4 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D5 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D6 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D7 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D8 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D8.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D8a mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D8a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D9 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D9.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D9a mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D9a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D10 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D10.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D10a mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D10a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W1 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W1.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W2 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W2.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W3 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W3.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W4 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W4.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W4a mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W5 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W5.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W5a mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W5a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W6 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W6.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W6a mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W6a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;野々宮
*NON_Isyou1

;		lsp %Free7,":a;bmp2\TATI\non\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = NON_D1 mov $ld_pass,":a;bmp2\TATI\NON\1\NON_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_D2 mov $ld_pass,":a;bmp2\TATI\NON\1\NON_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_D3 mov $ld_pass,":a;bmp2\TATI\NON\1\NON_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_D3a mov $ld_pass,":a;bmp2\TATI\NON\1\NON_D3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_D4 mov $ld_pass,":a;bmp2\TATI\NON\1\NON_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_D4a mov $ld_pass,":a;bmp2\TATI\NON\1\NON_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_D5 mov $ld_pass,":a;bmp2\TATI\NON\1\NON_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_D5a mov $ld_pass,":a;bmp2\TATI\NON\1\NON_D5a.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_D6 mov $ld_pass,":a;bmp2\TATI\NON\1\NON_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_D6a mov $ld_pass,":a;bmp2\TATI\NON\1\NON_D6a.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_D7 mov $ld_pass,":a;bmp2\TATI\NON\1\NON_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_D7a mov $ld_pass,":a;bmp2\TATI\NON\1\NON_D7a.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_N1 mov $ld_pass,":a;bmp2\TATI\NON\1\NON_N1.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_N1a mov $ld_pass,":a;bmp2\TATI\NON\1\NON_N1a.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_N2 mov $ld_pass,":a;bmp2\TATI\NON\1\NON_N2.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_N1a mov $ld_pass,":a;bmp2\TATI\NON\1\NON_N1a.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_S1 mov $ld_pass,":a;bmp2\TATI\NON\1\NON_S1.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_S2 mov $ld_pass,":a;bmp2\TATI\NON\1\NON_S2.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NON_S3 mov $ld_pass,":a;bmp2\TATI\NON\1\NON_S3.bmp" : mov $ld_pass2,":a;bmp2\TATI\non\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;沼田陽子
*YOU_Isyou1

;		lsp %Free7,":a;bmp2\TATI\you\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = YOU_D1 mov $ld_pass,":a;bmp2\TATI\YOU\1\YOU_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\you\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOU_D2 mov $ld_pass,":a;bmp2\TATI\YOU\1\YOU_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\you\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOU_D3 mov $ld_pass,":a;bmp2\TATI\YOU\1\YOU_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\you\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOU_D4 mov $ld_pass,":a;bmp2\TATI\YOU\1\YOU_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\you\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOU_D5 mov $ld_pass,":a;bmp2\TATI\YOU\1\YOU_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\you\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;校長先生
*KOU_Isyou1

;		lsp %Free7,":a;bmp2\TATI\kou\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = KOU_D1 mov $ld_pass,":a;bmp2\TATI\KOU\1\KOU_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\kou\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KOU_D2 mov $ld_pass,":a;bmp2\TATI\KOU\1\KOU_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\kou\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KOU_D3 mov $ld_pass,":a;bmp2\TATI\KOU\1\KOU_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\kou\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KOU_D4 mov $ld_pass,":a;bmp2\TATI\KOU\1\KOU_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\kou\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KOU_D5 mov $ld_pass,":a;bmp2\TATI\KOU\1\KOU_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\kou\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KOU_D6 mov $ld_pass,":a;bmp2\TATI\KOU\1\KOU_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\kou\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KOU_D7 mov $ld_pass,":a;bmp2\TATI\KOU\1\KOU_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\kou\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KOU_u1 mov $ld_pass,":a;bmp2\TATI\KOU\1\KOU_u1.bmp" : mov $ld_pass2,":a;bmp2\TATI\kou\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;二瓶ひかる
*HIK_Isyou1

;		lsp %Free7,":a;bmp2\TATI\hik\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = HIK_D1 mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_D2 mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_D3 mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_D4 mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_D4a mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_I1 mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_I1.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_I2 mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_I2.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_N1 mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_N1.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_N2 mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_N2.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_W1 mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_W1.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_W2 mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_W2.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_W2a mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_W2a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_W3 mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_W3.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HIK_W3a mov $ld_pass,":a;bmp2\TATI\HIK\1\HIK_W3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hik\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;ハメルン
*HAM_Isyou1

;		lsp %Free7,":a;bmp2\TATI\ham\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = HAM_D1 mov $ld_pass,":a;bmp2\TATI\HAM\1\HAM_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\ham\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HAM_D2 mov $ld_pass,":a;bmp2\TATI\HAM\1\HAM_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\ham\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HAM_D3 mov $ld_pass,":a;bmp2\TATI\HAM\1\HAM_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\ham\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HAM_D4 mov $ld_pass,":a;bmp2\TATI\HAM\1\HAM_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\ham\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HAM_D5 mov $ld_pass,":a;bmp2\TATI\HAM\1\HAM_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\ham\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HAM_D6 mov $ld_pass,":a;bmp2\TATI\HAM\1\HAM_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\ham\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;保健の先生
*HOK_Isyou1

;		lsp %Free7,":a;bmp2\TATI\hok\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = HOK_D1 mov $ld_pass,":a;bmp2\TATI\HOK\1\HOK_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\hok\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HOK_D2 mov $ld_pass,":a;bmp2\TATI\HOK\1\HOK_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\hok\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HOK_D3 mov $ld_pass,":a;bmp2\TATI\HOK\1\HOK_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\hok\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = HOK_D4 mov $ld_pass,":a;bmp2\TATI\HOK\1\HOK_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\hok\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;楠木みどり
*MID_Isyou1

;		lsp %Free7,":a;bmp2\TATI\MID\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = MID_D1 mov $ld_pass,":a;bmp2\TATI\MID\1\MID_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_D2 mov $ld_pass,":a;bmp2\TATI\MID\1\MID_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_D2a mov $ld_pass,":a;bmp2\TATI\MID\1\MID_D2a.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_D3 mov $ld_pass,":a;bmp2\TATI\MID\1\MID_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_D4 mov $ld_pass,":a;bmp2\TATI\MID\1\MID_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_D4a mov $ld_pass,":a;bmp2\TATI\MID\1\MID_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_D5 mov $ld_pass,":a;bmp2\TATI\MID\1\MID_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_K1 mov $ld_pass,":a;bmp2\TATI\MID\1\MID_K1.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_K2 mov $ld_pass,":a;bmp2\TATI\MID\1\MID_K2.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_K3 mov $ld_pass,":a;bmp2\TATI\MID\1\MID_K3.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_K4 mov $ld_pass,":a;bmp2\TATI\MID\1\MID_K4.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_K5 mov $ld_pass,":a;bmp2\TATI\MID\1\MID_K5.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_U1 mov $ld_pass,":a;bmp2\TATI\MID\1\MID_U1.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MID_U2 mov $ld_pass,":a;bmp2\TATI\MID\1\MID_U2.bmp" : mov $ld_pass2,":a;bmp2\TATI\mid\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;紅茶紳士
*SIN_Isyou1

;		lsp %Free7,":a;bmp2\TATI\SIN\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = SIN_D1 mov $ld_pass,":a;bmp2\TATI\SIN\1\SIN_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\sin\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SIN_D2 mov $ld_pass,":a;bmp2\TATI\SIN\1\SIN_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\sin\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SIN_D3 mov $ld_pass,":a;bmp2\TATI\SIN\1\SIN_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\sin\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SIN_D4 mov $ld_pass,":a;bmp2\TATI\SIN\1\SIN_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\sin\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;桜田みちる
*MIC_Isyou1

;		lsp %Free7,":a;bmp2\TATI\MIC\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = MIC_D1 mov $ld_pass,":a;bmp2\TATI\MIC\1\MIC_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\mic\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MIC_D2 mov $ld_pass,":a;bmp2\TATI\MIC\1\MIC_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\mic\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MIC_D3 mov $ld_pass,":a;bmp2\TATI\MIC\1\MIC_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\mic\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MIC_D4 mov $ld_pass,":a;bmp2\TATI\MIC\1\MIC_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\mic\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MIC_D5 mov $ld_pass,":a;bmp2\TATI\MIC\1\MIC_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\mic\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MIC_D6 mov $ld_pass,":a;bmp2\TATI\MIC\1\MIC_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\mic\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MIC_N1 mov $ld_pass,":a;bmp2\TATI\MIC\1\MIC_N1.bmp" : mov $ld_pass2,":a;bmp2\TATI\mic\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MIC_N2 mov $ld_pass,":a;bmp2\TATI\MIC\1\MIC_N2.bmp" : mov $ld_pass2,":a;bmp2\TATI\mic\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MIC_N2n mov $ld_pass,":a;bmp2\TATI\MIC\1\MIC_N2n.bmp" : mov $ld_pass2,":a;bmp2\TATI\mic\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MIC_N3 mov $ld_pass,":a;bmp2\TATI\MIC\1\MIC_N3.bmp" : mov $ld_pass2,":a;bmp2\TATI\mic\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MIC_N3n mov $ld_pass,":a;bmp2\TATI\MIC\1\MIC_N3n.bmp" : mov $ld_pass2,":a;bmp2\TATI\mic\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = MIC_N4 mov $ld_pass,":a;bmp2\TATI\MIC\1\MIC_N4.bmp" : mov $ld_pass2,":a;bmp2\TATI\mic\2\1.bmp"return ;顔、体データ


goto *err_textbox2

return

;さくのしん
*SAK_Isyou1

;		lsp %Free7,":a;bmp2\TATI\SAK\2\1.bmp",%x,0 ;体部分データ
		;さくのしんのみレイヤー構造が逆になります（↓のをこぴぺしてファイル名だけかえれば大丈夫です）
		if %ld_pass_number = SAK_D1 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_D1.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_D2 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_D2.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_D3 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_D3.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_D4 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_D4.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_D5 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_D5.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_k1 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_k1.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_k2 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_k2.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_k3 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_k3.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_n1 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_n1.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_n2 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_n2.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_n3 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_n3.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_W1 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_W1.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_W2 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_W2.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SAK_W3 mov $ld_pass2,":a;bmp2\TATI\SAK\1\SAK_W3.bmp" : mov $ld_pass,":a;bmp2\TATI\sak\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;榊由香里
*YUK_Isyou1

;		lsp %Free7,":a;bmp2\TATI\YUK\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = YUK_D1 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_D2 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_D2a mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_D2a.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_D3 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_D3a mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_D3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_D4 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_D4a mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_I1 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_I1.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_I1a mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_I1a.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_I2 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_I2.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_I2a mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_I2a.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_I3 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_I3.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_I3a mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_I3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_I4 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_I4.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_I5 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_I5.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_N1 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_N1.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_N2 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_N2.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_W1 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_W1.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_W2 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_W2.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_W3 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_W3.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YUK_W4 mov $ld_pass,":a;bmp2\TATI\YUK\1\YUK_W4.bmp" : mov $ld_pass2,":a;bmp2\TATI\yuk\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;スミレ
*SMI_Isyou1

;		lsp %Free7,":a;bmp2\TATI\SMI\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = SMI_D1 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D1a mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D1a.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D2 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D2n mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D2n.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D3 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D3a mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D4 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D4a mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D5 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D5a mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D5a.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D6 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D7 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_I1 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_I1.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_I2 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_I2.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_I3 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_I3.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_I3a mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_I3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_N1 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_N1.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_N2 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_N2.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_N3 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_N3.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_W1 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_W1.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_W2 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_W2.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_W3 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_W3.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_W4 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_W4.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_W5 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_W5.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_W6 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_W6.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;沼田陽子　昼
*YO2_Isyou1

;		lsp %Free7,":a;bmp2\TATI\yo2\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = YO2_D1 mov $ld_pass,":a;bmp2\TATI\YO2\1\YO2_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\yo2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YO2_D1n mov $ld_pass,":a;bmp2\TATI\YO2\1\YO2_D1n.bmp" : mov $ld_pass2,":a;bmp2\TATI\yo2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YO2_D2 mov $ld_pass,":a;bmp2\TATI\YO2\1\YO2_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\yo2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YO2_D2n mov $ld_pass,":a;bmp2\TATI\YO2\1\YO2_D2n.bmp" : mov $ld_pass2,":a;bmp2\TATI\yo2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YO2_D3 mov $ld_pass,":a;bmp2\TATI\YO2\1\YO2_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\yo2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YO2_D3n mov $ld_pass,":a;bmp2\TATI\YO2\1\YO2_D3n.bmp" : mov $ld_pass2,":a;bmp2\TATI\yo2\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;相馬あや
*AYA_Isyou1

;		lsp %Free7,":a;bmp2\TATI\AYA\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = AYA_D1 mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D2 mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D3 mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D4 mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D4a mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D5 mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D5a mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D5a.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D6a mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D6a.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D6n mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D6n.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D7 mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D7a mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D7a.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D8 mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D8.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D8a mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D8a.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D9 mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D9.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D9a mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D9a.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D10 mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D10.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AYA_D11 mov $ld_pass,":a;bmp2\TATI\AYA\1\AYA_D11.bmp" : mov $ld_pass2,":a;bmp2\TATI\AYA\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;イザナミ
*IZA_Isyou1

;		lsp %Free7,":a;bmp2\TATI\IZA\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = IZA_D1 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D2 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D3 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D4 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D5 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D6 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D7 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D8 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D8.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;吉川正明
*YOS_Isyou1

;		lsp %Free7,":a;bmp2\TATI\YOS\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = YOS_D1 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D2 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D3 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D3a mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D4 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D4a mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D5 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D6 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D7 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D8 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D8.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D8a mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D8a.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D9 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D9.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D10 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D10.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D10a mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D10a.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D10n mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D10n.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D11 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D11.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D12 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D12.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D13 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D13.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = YOS_D14 mov $ld_pass,":a;bmp2\TATI\YOS\1\YOS_D14.bmp" : mov $ld_pass2,":a;bmp2\TATI\YOS\2\1.bmp"return ;顔、体データ
goto *err_textbox2

return

;アザミ
*AZA_Isyou1

;		lsp %Free7,":a;bmp2\TATI\AZA\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = AZA_D1 mov $ld_pass,":a;bmp2\TATI\AZA\1\AZA_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\AZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AZA_D2 mov $ld_pass,":a;bmp2\TATI\AZA\1\AZA_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\AZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AZA_D2a mov $ld_pass,":a;bmp2\TATI\AZA\1\AZA_D2a.bmp" : mov $ld_pass2,":a;bmp2\TATI\AZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AZA_D3 mov $ld_pass,":a;bmp2\TATI\AZA\1\AZA_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\AZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AZA_D4 mov $ld_pass,":a;bmp2\TATI\AZA\1\AZA_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\AZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AZA_D4a mov $ld_pass,":a;bmp2\TATI\AZA\1\AZA_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\AZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AZA_D5 mov $ld_pass,":a;bmp2\TATI\AZA\1\AZA_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\AZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AZA_D6 mov $ld_pass,":a;bmp2\TATI\AZA\1\AZA_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\AZA\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = AZA_D7 mov $ld_pass,":a;bmp2\TATI\AZA\1\AZA_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\AZA\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;ルノワール
*RUN_Isyou1

;		lsp %Free7,":a;bmp2\TATI\RUN\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = RUN_D1 mov $ld_pass,":a;bmp2\TATI\RUN\1\RUN_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\RUN\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = RUN_D2 mov $ld_pass,":a;bmp2\TATI\RUN\1\RUN_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\RUN\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = RUN_D3 mov $ld_pass,":a;bmp2\TATI\RUN\1\RUN_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\RUN\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = RUN_D4 mov $ld_pass,":a;bmp2\TATI\RUN\1\RUN_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\RUN\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = RUN_D5 mov $ld_pass,":a;bmp2\TATI\RUN\1\RUN_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\RUN\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = RUN_D6 mov $ld_pass,":a;bmp2\TATI\RUN\1\RUN_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\RUN\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = RUN_D6a mov $ld_pass,":a;bmp2\TATI\RUN\1\RUN_D6a.bmp" : mov $ld_pass2,":a;bmp2\TATI\RUN\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = RUN_D7 mov $ld_pass,":a;bmp2\TATI\RUN\1\RUN_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\RUN\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = RUN_D7a mov $ld_pass,":a;bmp2\TATI\RUN\1\RUN_D7a.bmp" : mov $ld_pass2,":a;bmp2\TATI\RUN\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = RUN_D8 mov $ld_pass,":a;bmp2\TATI\RUN\1\RUN_D8.bmp" : mov $ld_pass2,":a;bmp2\TATI\RUN\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = RUN_D9 mov $ld_pass,":a;bmp2\TATI\RUN\1\RUN_D9.bmp" : mov $ld_pass2,":a;bmp2\TATI\RUN\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = RUN_D10 mov $ld_pass,":a;bmp2\TATI\RUN\1\RUN_D10.bmp" : mov $ld_pass2,":a;bmp2\TATI\RUN\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;野田裕貴
*NOD_Isyou1

;		lsp %Free7,":a;bmp2\TATI\NOD\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = NOD_D1 mov $ld_pass,":a;bmp2\TATI\NOD\1\NOD_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\NOD\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NOD_D2 mov $ld_pass,":a;bmp2\TATI\NOD\1\NOD_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\NOD\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NOD_D3 mov $ld_pass,":a;bmp2\TATI\NOD\1\NOD_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\NOD\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NOD_D4 mov $ld_pass,":a;bmp2\TATI\NOD\1\NOD_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\NOD\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NOD_D5a mov $ld_pass,":a;bmp2\TATI\NOD\1\NOD_D5a.bmp" : mov $ld_pass2,":a;bmp2\TATI\NOD\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NOD_D5n mov $ld_pass,":a;bmp2\TATI\NOD\1\NOD_D5n.bmp" : mov $ld_pass2,":a;bmp2\TATI\NOD\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NOD_D6 mov $ld_pass,":a;bmp2\TATI\NOD\1\NOD_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\NOD\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;新良なふみ
*NAF_Isyou1

;		lsp %Free7,":a;bmp2\TATI\NAF\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = NAF_D1 mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D2 mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D3 mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D4 mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D4a mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D5 mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D6 mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D6a mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D6a.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D7 mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D7a mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D7a.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D8 mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D8.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D8a mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D8a.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D9 mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D9.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = NAF_D9a mov $ld_pass,":a;bmp2\TATI\NAF\1\NAF_D9a.bmp" : mov $ld_pass2,":a;bmp2\TATI\NAF\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;有森秋一
*SHU_Isyou1

;		lsp %Free7,":a;bmp2\TATI\SHU\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = SHU_D1 mov $ld_pass,":a;bmp2\TATI\SHU\1\SHU_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\SHU\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SHU_D2 mov $ld_pass,":a;bmp2\TATI\SHU\1\SHU_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\SHU\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SHU_D3 mov $ld_pass,":a;bmp2\TATI\SHU\1\SHU_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\SHU\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SHU_D4 mov $ld_pass,":a;bmp2\TATI\SHU\1\SHU_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\SHU\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SHU_D5 mov $ld_pass,":a;bmp2\TATI\SHU\1\SHU_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\SHU\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SHU_D6 mov $ld_pass,":a;bmp2\TATI\SHU\1\SHU_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\SHU\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;有森秋一　大人
*SH2_Isyou1

;		lsp %Free7,":a;bmp2\TATI\SH2\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = SH2_D1 mov $ld_pass,":a;bmp2\TATI\SH2\1\SH2_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\SH2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SH2_D2 mov $ld_pass,":a;bmp2\TATI\SH2\1\SH2_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\SH2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = SH2_D3 mov $ld_pass,":a;bmp2\TATI\SH2\1\SH2_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\SH2\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;キョウ
*KYO_Isyou1

;		lsp %Free7,":a;bmp2\TATI\KYO\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = KYO_D1 mov $ld_pass,":a;bmp2\TATI\KYO\1\KYO_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\KYO\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KYO_D2 mov $ld_pass,":a;bmp2\TATI\KYO\1\KYO_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\KYO\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KYO_D3 mov $ld_pass,":a;bmp2\TATI\KYO\1\KYO_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\KYO\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KYO_D4 mov $ld_pass,":a;bmp2\TATI\KYO\1\KYO_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\KYO\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KYO_D5 mov $ld_pass,":a;bmp2\TATI\KYO\1\KYO_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\KYO\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KYO_D6 mov $ld_pass,":a;bmp2\TATI\KYO\1\KYO_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\KYO\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = KYO_D6a mov $ld_pass,":a;bmp2\TATI\KYO\1\KYO_D6a.bmp" : mov $ld_pass2,":a;bmp2\TATI\KYO\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;岡田智子
*TOM_Isyou1

;		lsp %Free7,":a;bmp2\TATI\TOM\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = TOM_D1 mov $ld_pass,":a;bmp2\TATI\TOM\1\TOM_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\TOM\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = TOM_D2 mov $ld_pass,":a;bmp2\TATI\TOM\1\TOM_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\TOM\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = TOM_D3 mov $ld_pass,":a;bmp2\TATI\TOM\1\TOM_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\TOM\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = TOM_D4 mov $ld_pass,":a;bmp2\TATI\TOM\1\TOM_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\TOM\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = TOM_D5 mov $ld_pass,":a;bmp2\TATI\TOM\1\TOM_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\TOM\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = TOM_D6 mov $ld_pass,":a;bmp2\TATI\TOM\1\TOM_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\TOM\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = TOM_D7 mov $ld_pass,":a;bmp2\TATI\TOM\1\TOM_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\TOM\2\1.bmp"return ;顔、体データ

goto *err_textbox2
return

;マリエ夜
*ma2_Isyou1

;		lsp %Free7,":a;bmp2\TATI\TOM\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = ma2_D1 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_D2 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_D2a mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_D2a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_D2n mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_D2n.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_D3 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_D3a mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_D3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_D3n mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_D3n.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_D4 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_D4a mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_I1 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_I1.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_I1a mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_I1a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_I2 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_I2.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_I2a mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_I2a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_I3 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_I3.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_I3a mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_I3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_I4 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_I4.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_I4a mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_I4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_N1 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_N1.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_N2 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_N2.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_W1 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_W1.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_W2 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_W2.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_W2n mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_W2n.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ma2_O1 mov $ld_pass,":a;bmp2\TATI\ma2\1\ma2_O1.bmp" : mov $ld_pass2,":a;bmp2\TATI\ma2\2\U.bmp"return ;顔、体データータ

goto *err_textbox2

return

;相馬あや
*ay2_Isyou1

;		lsp %Free7,":a;bmp2\TATI\ay2\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = ay2_D1 mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D2 mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D3 mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D4 mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D4a mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D5 mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D5a mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D5a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D6a mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D6a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D6n mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D6n.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D7 mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D7a mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D7a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D8 mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D8.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D8a mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D8a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D9 mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D9.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D9a mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D9a.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D10 mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D10.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ
		if %ld_pass_number = ay2_D11 mov $ld_pass,":a;bmp2\TATI\ay2\1\ay2_D11.bmp" : mov $ld_pass2,":a;bmp2\TATI\ay2\2\1.bmp"return ;顔、体データ

goto *err_textbox2

return

;**********************************************************
;第二衣装
;**********************************************************
;■夕闇のスミレ
*SMI_Isyou2

		if %ld_pass_number = SMI_D1 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D1a mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D1a.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D2 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D2n mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D2n.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D3 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D3a mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D4 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D4a mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D5 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D5a mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D5a.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D6 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_D7 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_I1 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_I1.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_I2 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_I2.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_I3 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_I3.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_I3a mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_I3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_N1 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_N1.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_N2 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_N2.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_N3 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_N3.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_W1 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_W1.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_W2 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_W2.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_W3 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_W3.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_W4 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_W4.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_W5 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_W5.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SMI_W6 mov $ld_pass,":a;bmp2\TATI\SMI\1\SMI_W6.bmp" : mov $ld_pass2,":a;bmp2\TATI\smi\2\2.bmp"return ;顔、体データ


	goto *err_textbox2

return

;■紅茶紳士（教頭先生）
*SIN_Isyou2

		if %ld_pass_number = SIN_D1 mov $ld_pass,":a;bmp2\TATI\SIN\1\SIN_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\SIN\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SIN_D2 mov $ld_pass,":a;bmp2\TATI\SIN\1\SIN_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\sin\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SIN_D3 mov $ld_pass,":a;bmp2\TATI\SIN\1\SIN_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\sin\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = SIN_D4 mov $ld_pass,":a;bmp2\TATI\SIN\1\SIN_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\sin\2\2.bmp"return ;顔、体データ



	goto *err_textbox2

return

;■イザナミ（体育教師）
*IZA_Isyou2

		if %ld_pass_number = IZA_D1 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D2 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D3 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D4 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D5 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D6 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D7 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = IZA_D8 mov $ld_pass,":a;bmp2\TATI\IZA\1\IZA_D8.bmp" : mov $ld_pass2,":a;bmp2\TATI\IZA\2\2.bmp"return ;顔、体データ


	goto *err_textbox2

return

;毬枝　夜服
*MAR_Isyou2

		if %ld_pass_number = MAR_D1 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D2 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D2a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D2a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D2n mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D2n.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D3 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D3a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D3n mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D3n.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D4 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_D4a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_D4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I1 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I1.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I1a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I1a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I2 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I2.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I2a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I2a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I3 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I3.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I3a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I3a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I4 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I4.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_I4a mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_I4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_N1 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_N1.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_N2 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_N2.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_W1 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_W1.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_W2 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_W2.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_W2n mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_W2n.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = MAR_O1 mov $ld_pass,":a;bmp2\TATI\MAR\1\MAR_O1.bmp" : mov $ld_pass2,":a;bmp2\TATI\MAR\2\2U.bmp"return ;顔、体データ

	goto *err_textbox2

return

;彼岸花　夜服
*HIG_Isyou2

;		lsp %Free7,":a;bmp2\TATI\hig\2\1.bmp",%x,0 ;体部分データ
		if %ld_pass_number = HIG_D1 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D1.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D2 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D2.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D3 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D3.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D4 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D4.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D5 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D5.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D6 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D6.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D7 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D7.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D8 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D8.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D8a mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D8a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D9 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D9.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D9a mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D9a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D10 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D10.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_D10a mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_D10a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W1 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W1.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W2 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W2.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W3 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W3.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W4 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W4.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W4a mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W4a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W5 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W5.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W5a mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W5a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W6 mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W6.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ
		if %ld_pass_number = HIG_W6a mov $ld_pass,":a;bmp2\TATI\HIG\1\HIG_W6a.bmp" : mov $ld_pass2,":a;bmp2\TATI\hig\2\2.bmp"return ;顔、体データ

goto *err_textbox2

return

*err_textbox
mesbox "立ち絵エラー表示！","対象キャラの衣装フラグが在りません"

end

*err_textbox2
mesbox "立ち絵エラー表示！","対象キャラの立ち絵が在りません"

end



;************************************************************
;立ち絵の座標を個別設定
;************************************************************
*tati_zahyou
	;彼岸花の立ち位置の調整
	notif %ld_pass_number >= hig_start_number jumpf
	notif %ld_pass_number <= hig_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,163 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 - 20
		if %meta_tmp1 = c mov %x,%Free3 + 160 
		if %meta_tmp1 = r mov %x,%Free3 + 320 + 20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,6 ;y座標
	~

	;毬枝の立ち位置の調整
	notif %ld_pass_number >= mar_start_number jumpf
	notif %ld_pass_number <= mar_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,159 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 + 20
		mov %Free4,22 ;y座標
	~

	;金森先生の立ち位置の調整
	notif %ld_pass_number >= KAN_start_number jumpf
	notif %ld_pass_number <= KAN_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,163 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -15
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +15
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~
	;保健室の立ち位置の調整
	notif %ld_pass_number >= hok_start_number jumpf
	notif %ld_pass_number <= hok_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,165 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -36
		if %meta_tmp1 = c mov %x,%Free3 + 160 -18
		if %meta_tmp1 = r mov %x,%Free3 + 320
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~
	;ハメルンの立ち位置の調整
	notif %ld_pass_number >= ham_start_number jumpf
	notif %ld_pass_number <= ham_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,166 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,-0 ;y座標

	~
	;野々宮の立ち位置の調整
	notif %ld_pass_number >= non_start_number jumpf
	notif %ld_pass_number <= non_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,182 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -15
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +15
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,-0 ;y座標

	~
	;すみれの立ち位置の調整
	notif %ld_pass_number >= smi_start_number jumpf
	notif %ld_pass_number <= smi_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,150 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -18
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +18
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,15 ;y座標

	~
	;さかきさんの立ち位置の調整
	notif %ld_pass_number >= yuk_start_number jumpf
	notif %ld_pass_number <= yuk_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,167 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -18
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +18
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~
	;みちるの立ち位置の調整
	notif %ld_pass_number >= mic_start_number jumpf
	notif %ld_pass_number <= mic_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,125 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -28
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +28
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,30 ;y座標

	~
	;紅茶紳士の立ち位置の調整
	notif %ld_pass_number >= sin_start_number jumpf
	notif %ld_pass_number <= sin_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,140 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -40 +50
		if %meta_tmp1 = c mov %x,%Free3 + 160 +30
		if %meta_tmp1 = r mov %x,%Free3 + 320 +50
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~
	;みどりの立ち位置の調整
	notif %ld_pass_number >= mid_start_number jumpf
	notif %ld_pass_number <= mid_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,146 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,28 ;y座標

	~
	;さくのしんの立ち位置の調整
	notif %ld_pass_number >= sak_start_number jumpf
	notif %ld_pass_number <= sak_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,155 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,10 ;y座標

	~
	;ぬまたようこ生前の立ち位置の調整
	notif %ld_pass_number >= yo2_start_number jumpf
	notif %ld_pass_number <= yo2_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,153 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -21
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +21
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~
	;ぬまたようこの立ち位置の調整
	notif %ld_pass_number >= you_start_number jumpf
	notif %ld_pass_number <= you_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,168 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -21
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +21
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~
	;保健室の先生の立ち位置の調整
	notif %ld_pass_number >= hok_start_number jumpf
	notif %ld_pass_number <= hok_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,185 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~
	;ひかるくんの先生の立ち位置の調整
	notif %ld_pass_number >= hik_start_number jumpf
	notif %ld_pass_number <= hik_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,145 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~

;第二夜
	;野田くんの立ち位置の調整
	notif %ld_pass_number >= nod_start_number jumpf
	notif %ld_pass_number <= nod_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,175 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~

	;AYAの立ち位置の調整
	notif %ld_pass_number >= aya_start_number jumpf
	notif %ld_pass_number <= aya_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,135 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~
	;AY2の立ち位置の調整
	notif %ld_pass_number >= ay2_start_number jumpf
	notif %ld_pass_number <= ay2_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,135 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~

	;azaの立ち位置の調整
	notif %ld_pass_number >= aza_start_number jumpf
	notif %ld_pass_number <= aza_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,160 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~

	;izaの立ち位置の調整
	notif %ld_pass_number >= iza_start_number jumpf
	notif %ld_pass_number <= iza_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,160 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~

	;kyoの立ち位置の調整
	notif %ld_pass_number >= kyo_start_number jumpf
	notif %ld_pass_number <= kyo_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,165 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~

	;runの立ち位置の調整
	notif %ld_pass_number >= run_start_number jumpf
	notif %ld_pass_number <= run_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,160 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~
	;sh2の立ち位置の調整
	notif %ld_pass_number >= sh2_start_number jumpf
	notif %ld_pass_number <= sh2_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,140 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~

	;yosの立ち位置の調整
	notif %ld_pass_number >= yos_start_number jumpf
	notif %ld_pass_number <= yos_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,160 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標

	~

	;nafの立ち位置の調整
	notif %ld_pass_number >= naf_start_number jumpf
	notif %ld_pass_number <= naf_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,145 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 +20
;		if %meta_tmp1 = l mov %x,%Free3
;		if %meta_tmp1 = c mov %x,%Free3 + 160
;		if %meta_tmp1 = r mov %x,%Free3 + 320
		mov %Free4,0 ;y座標
	~

	;ma2の立ち位置の調整
	notif %ld_pass_number >= ma2_start_number jumpf
	notif %ld_pass_number <= ma2_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,159 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 + 20
		mov %Free4,22 ;y座標
	~

	;izaの立ち位置の調整
	notif %ld_pass_number >= iza_start_number jumpf
	notif %ld_pass_number <= iza_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,170 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 + 20
		mov %Free4,0 ;y座標
	~
	;tomの立ち位置の調整
	notif %ld_pass_number >= tom_start_number jumpf
	notif %ld_pass_number <= tom_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,170 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 + 20
		mov %Free4,0 ;y座標
	~
	;shuの立ち位置の調整
	notif %ld_pass_number >= shu_start_number jumpf
	notif %ld_pass_number <= shu_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,175 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 + 20
		mov %Free4,0 ;y座標
	~
	;sh2の立ち位置の調整
	notif %ld_pass_number >= sh2_start_number jumpf
	notif %ld_pass_number <= sh2_last_number jumpf
	
		;試験的に立ち絵がずらせないかテスト
		mov %Free3,158 ;x座標
		if %meta_tmp1 = l mov %x,%Free3 -20
		if %meta_tmp1 = c mov %x,%Free3 + 160
		if %meta_tmp1 = r mov %x,%Free3 + 320 + 20
		mov %Free4,0 ;y座標
	~

return
;
;***********************************************************************
;
;[プロジェクト]  彼岸花の咲く夜に
;[ファイル概要]  サークルロゴの表示
;[処理概要]      ソフト立ち上げ時に、サークルロゴを表示する
;
;***********************************************************************
*b_sakuru_logo

	E_B
	E_MA
	saveoff            ;セーブオフで、処理を高速化する。
	erasetextwindow 0  ;テキストエフェクトを切る事で処理を高速化
	rmode 0            ;右クリックのメニュー表示の無効化
	textoff
;スキップ用の変数が１になっていたらタイトルをスキップさせる
if %title_skip = 1 goto *b_sakuru_logo_shuuryou

;ボタンが押しっぱなしになっていたらタイトルをスキップさせる。
isdown %tmp
if %tmp = 1 goto *b_sakuru_logo_shuuryou

;-----------------------
;サークルロゴの表示
   ;左右クリックで、ロゴの表示を飛ばして終了処理、タイトル画面へ進む   

	btndef ""
	btntime 000
	;btnwait2 %tmp ;Removed by Yirba (fixes "click to start" bug)
	

	lsp 100,":c;bmp\title\Circle_logo\circle_logo.bmp",0,0
	print 22
	wait 2000
	csp 100
	print 2
	
	lsp 100,":c;bmp\title\trans_logo.bmp",0,0
	print 22
	wait 2000
	csp 100
	print 2

	lsp 100,":c;bmp\background\efe\keikoku_02.bmp",0,0
;	print 99,3000,"trvswave.dll/h"
	print 22
	wait 3000
;	wait 2000
	csp 100
	print 2
	csp 100
	print 2
	
   lr_trap *b_sakuru_logo_shuuryou_1
	notif %tmp = -5 mov %title_skip,1
	notif %tmp = -5 goto *b_sakuru_logo_shuuryou_1

	; サークルロゴの表示終了処理
;	goto *b_sakuru_logo_skip_100

		*b_sakuru_logo_shuuryou_1

;   lr_trap *b_sakuru_logo_shuuryou
;	btndef ""
;	btntime 000
;	btnwait2 %tmp
;	
;	notif %tmp = -5 goto *b_sakuru_logo_shuuryou
;	;警告文の表示
;	lsp 100,":c;bmp\background\efe\keikoku_02.bmp",0,0
;	print 22
;	wait 3000
;	csp 100
;	print 2
;
;	notif %tmp = -5 mov %title_skip,1
;	csp 100
;	print 2

	; サークルロゴの表示終了処理
	goto *b_sakuru_logo_skip_100

		*b_sakuru_logo_shuuryou



		mov %title_skip,1			;タイトルスキップON
	*b_sakuru_logo_skip_100
	lr_trap off				;クリックトラップの解除


  rmode 1
 ;右クリックのメニュー表示を有効にする。
  erasetextwindow 1			;テキスト透過度落としをＯＮにする。
  setwindow 31,16,22,16,26,26,0,2,20,1,1,#999999,0,0,639,479 
  btndef ""
  saveoff
  csp -1

  if %title_skip = 1 goto *b_title

  goto *b_title				;タイトル画面へ

;******************************************************************************

;***********************************************************************
;
;[プロジェクト] 	彼岸花の咲く夜に
;[ファイル概要] 	タイトルの表示
;[処理概要]		タイトル画面の表示
;フラグ管理用変数　	
;
;***********************************************************************
*b_title

;-----------------------------------------
;各フラグ変数の初期化処理
;-----------------------------------------

mono 0

mov %rmordflg,off	;右クリックOFFを解除
mov %save_on_flg,on	;セーブON命令を動作させる。


mov %bgm_mood_file_path_flg,0



;-----------------------------------------

;   Ｂｇｍスタート
E_B
E_MA

if %END_TEA_FLG = 2  : goto *t_me_skip
me1 35
*t_me_skip

;衣装フラグのリセット
gosub *Flg_reset

;シナリオ１クリア後とクリア前で背景、Meを変える
if %UMINEKOEND < 11  : mov $tmp10,"bmp\title\title.bmp"  ;初期のタイトル画像
if %UMINEKOEND >= 10 : mov $tmp10,"bmp\title\title2.bmp" ;ゲームクリア後のタイトル画像
if %END_TEA_FLG = 2  : bgm1 1006 : bgmvol 25 : lsph t_logo_lsp,"bmp\title\title_c2.bmp",0,0


mov %title_y,140

csp -1                               ;スプライト画像の、メモリからの消去
btndef ""                            ;ボタン画像の、メモリからの消去
setwindow 31,16,22,16,26,26,0,2,20,1,1,#ffffff,0,0,639,479

;順番に画像を表示していく（背景、ロゴ、各種ボタンの画像をメモリに読み込む）


;背景の表示
lsph t_logo_lsp,"bmp\title\title2.bmp",0,0
if %UMINEKOEND >= 11 : lsph t_logo_lsp,"bmp\title\title2.bmp",0,0
if %END_TEA_FLG = 2  : lsph t_logo_lsp,"bmp\title\title_c2.bmp",0,0

;----------------------
;ボタンの配置

	;exitボタン。クリア前は通常。
	lsph t_btn_start_lsp,":a/2,0,3;bmp\title\title_menu\start.bmp",474,156	;146
	lsph t_btn_web_lsp,":a/2,0,3;bmp\title\title_menu\web.bmp",474,188 + 8	;178
	if %UMINEKOEND < 10 lsph t_btn_exit_lsp,":a/2,0,3;bmp\title\title_menu\exit.bmp",474,237		;210
	if %UMINEKOEND = 11 lsph t_btn_exit_lsp,":a/2,0,3;bmp\title\title_menu\exit2.bmp",474,277	;242
	if %END_TEA_FLG = 2  : lsph t_btn_exit_lsp,":a/2,0,3;bmp\title\title_menu\exit3.bmp",474,316+43	;274
;	if %UMINEKOEND >=13  lsph t_btn_exit_lsp,":a/2,0,3;bmp\title\title_menu\exit4.bmp",474,316+43	;306

	;クリアフラグによってボタンの表示、非表示、EXITの高さを行う。
if %END_TEA_FLG = 2  : lsph t_btn_music_lsp,":a/2,0,3;bmp\title\title_menu\music.bmp",474,252	;306

;----------------------
lr_trap *b_title_shunkan             ;クリックに反応して瞬間表示を行う

;サークルロゴをスキップしていたたら、ここも瞬間表示にする。

;瞬間表示でないのなら、順番に表示していく
if %title_skip = 1 goto *b_title_skip_100
   	cl a,1		;立ち絵の消去
	delay 2000

	bg $tmp10,6
	vsp t_logo_lsp,1 : print 22
	vsp t_btn_start_lsp,1 : print 22
	vsp t_btn_web_lsp,1 : print 22
	if %UMINEKOEND >= 11 lsp t_btn_ura_tea_lsp,":a/2,0,3;bmp\title\title_menu\new_after.bmp",474,220 +16	;274
	if %UMINEKOEND >= 11 lsp t_btn_ura_tea_lsp,":a/2,0,3;bmp\title\title_menu\after.bmp",474,220 +16	;274
	if %END_TEA_FLG = 1 lsp t_btn_ura_tea_lsp,":a/2,0,3;bmp\title\title_menu\new_after.bmp",474,220 +16	;274
	if %END_TEA_FLG = 2 lsp t_btn_ura_tea_lsp,":a/2,0,3;bmp\title\title_menu\after.bmp",474,220 +16	;274
	if %UMINEKOEND >= 11 : print 22

if %END_TEA_FLG = 2  : lsp t_btn_tips_lsp,":a/2,0,3;bmp\title\title_menu\new_tips.bmp",474,252 +24	;274
if %END_TEA_FLG = 2  : lsp t_btn_tips_lsp,":a/2,0,3;bmp\title\title_menu\tips.bmp",474,252 +24	;274
	if %END_TIPS_FLG = 1 lsp t_btn_tips_lsp,":a/2,0,3;bmp\title\title_menu\new_tips.bmp",474,252 +24	;274
	if %END_TIPS_FLG = 2 lsp t_btn_tips_lsp,":a/2,0,3;bmp\title\title_menu\tips.bmp",474,252 +24	;274
if %END_TEA_FLG = 2  : print 22

if %END_TEA_FLG = 2  : lsp t_btn_music_lsp,":a/2,0,3;bmp\title\title_menu\new_music.bmp",474,284 +32	;306
if %END_TEA_FLG = 2  : lsp t_btn_music_lsp,":a/2,0,3;bmp\title\title_menu\music.bmp",474,284 +32	;306
	if %END_MUSIC_FLG = 1 lsp t_btn_music_lsp,":a/2,0,3;bmp\title\title_menu\new_music.bmp",474,284 +32	;306
	if %END_MUSIC_FLG = 2 lsp t_btn_music_lsp,":a/2,0,3;bmp\title\title_menu\music.bmp",474,284 +32	;306
if %END_TEA_FLG = 2  : print 22

	vsp t_btn_exit_lsp,1 : print 22

	;サブメニューのボタンは消去する
	csp t_btn_ep1_lsp : csp t_btn_ep2_lsp : csp t_btn_ep3_lsp : csp t_btn_ep4_lsp : csp t_btn_ep5_lsp : csp t_btn_ep6_lsp : csp t_btn_ep7_lsp
	csp t_btn_load_lsp
        cl a,1		;立ち絵の消去
*b_title_skip_100

;瞬間表示なら下の処理を行う
*b_title_shunkan
lr_trap off
	bg black,0
	vsp t_back_lsp,0
	vsp t_bg_lsp,1
;	vsp t_hane_lsp,1
	vsp t_logo_lsp,1
	vsp t_btn_start_lsp,1
	vsp t_btn_web_lsp,1
	vsp t_btn_exit_lsp,1
	vsp t_btn_ep1_lsp,0
	vsp t_btn_ep2_lsp,0
	vsp t_btn_ep3_lsp,0
	vsp t_btn_ep4_lsp,0
	vsp t_btn_ep5_lsp,0
	vsp t_btn_ep6_lsp,0
	vsp t_btn_ep7_lsp,0
	vsp t_btn_load_lsp,0
	if %UMINEKOEND >= 11 lsp t_btn_ura_tea_lsp,":a/2,0,3;bmp\title\title_menu\new_after.bmp",474,220 +16	;274
	if %UMINEKOEND >= 11 lsp t_btn_ura_tea_lsp,":a/2,0,3;bmp\title\title_menu\after.bmp",474,220 +16	;274
	if %END_TEA_FLG = 1 lsp t_btn_ura_tea_lsp,":a/2,0,3;bmp\title\title_menu\new_after.bmp",474,220 +16	;274
	if %END_TEA_FLG = 2 lsp t_btn_ura_tea_lsp,":a/2,0,3;bmp\title\title_menu\after.bmp",474,220 +16	;274

if %END_TEA_FLG = 2  : lsp t_btn_tips_lsp,":a/2,0,3;bmp\title\title_menu\new_tips.bmp",474,252 +24	;274
if %END_TEA_FLG = 2  : lsp t_btn_tips_lsp,":a/2,0,3;bmp\title\title_menu\tips.bmp",474,252 +24	;274
	if %END_TIPS_FLG = 1 lsp t_btn_tips_lsp,":a/2,0,3;bmp\title\title_menu\new_tips.bmp",474,252 +24	;274
	if %END_TIPS_FLG = 2 lsp t_btn_tips_lsp,":a/2,0,3;bmp\title\title_menu\tips.bmp",474,252 +24	;274

if %END_TEA_FLG = 2  : lsp t_btn_music_lsp,":a/2,0,3;bmp\title\title_menu\new_music.bmp",474,284 +32	;306
if %END_TEA_FLG = 2  : lsp t_btn_music_lsp,":a/2,0,3;bmp\title\title_menu\music.bmp",474,284 +32	;306
	if %END_MUSIC_FLG = 1 lsp t_btn_music_lsp,":a/2,0,3;bmp\title\title_menu\new_music.bmp",474,284 +32	;306
	if %END_MUSIC_FLG = 2 lsp t_btn_music_lsp,":a/2,0,3;bmp\title\title_menu\music.bmp",474,284 +32	;306

	;サブメニューのボタンは消去する
	csp t_btn_ep1_lsp : csp t_btn_ep2_lsp : csp t_btn_ep3_lsp : csp t_btn_ep4_lsp : csp t_btn_ep5_lsp : csp t_btn_ep6_lsp : csp t_btn_ep7_lsp
	csp t_btn_load_lsp
	bg $tmp10,0
        cl a,0
	print 0		;立ち絵の消去

mov %title_skip,0 ;瞬間表示のフラグを解除


;説明テキストの読み込み
lsph t_txt_ep1_lsp,":a;bmp\title\txt_box\ep1.bmp",350,120,100
lsph t_txt_ep2_lsp,":a;bmp\title\txt_box\ep2.bmp",350,120,100
lsph t_txt_ep3_lsp,":a;bmp\title\txt_box\ep3.bmp",350,120,100
lsph t_txt_ep4_lsp,":a;bmp\title\txt_box\ep4.bmp",350,120,100
lsph t_txt_ep5_lsp,":a;bmp\title\txt_box\ep5.bmp",350,120,100
lsph t_txt_ep6_lsp,":a;bmp\title\txt_box\ep6.bmp",350,120,100
lsph t_txt_ep7_lsp,":a;bmp\title\txt_box\ep7.bmp",350,120,100

;lsph t_txt_lock_lsp,":a;bmp\title\txt_box\warning.bmp",350,120


; ボタン定義と、ボタンクリック待ちの処理
*b_title_botun_loop

btndef ""


exbtn_d "C87C45"

exbtn t_btn_start_lsp,t_btn_start_lsp,"P82"
exbtn t_btn_web_lsp,t_btn_web_lsp,"P86"
exbtn t_btn_exit_lsp,t_btn_exit_lsp,"P81"
exbtn t_btn_tips_lsp,t_btn_tips_lsp,"P84"
exbtn t_btn_music_lsp,t_btn_music_lsp,"P83"
exbtn t_btn_ura_tea_lsp,t_btn_ura_tea_lsp,"P93"

print 0

   btnwait2 %BtnRes

	if %BtnRes = t_btn_start_lsp : cell t_btn_start_lsp,1 : print 1:btndef "" : goto *start_sub_menu
	if %BtnRes = t_btn_ura_tea_lsp : E_A : mov %scenario_Number,99 : goto *higan_extra_opning
	if %BtnRes = t_btn_web_lsp seplay 9,80 : menu_window : shell "http://www.spiderlilytranslations.com/?2w"
	if %BtnRes = t_btn_tips_lsp cell t_btn_tips_lsp,1 : print 1:btndef "" : goto *tips
	if %BtnRes = t_btn_exit_lsp seplay 9,80 : seplay 9,79 : csp -1 : bg black,2 : wait 3000 : end
	if %BtnRes = t_btn_music_lsp btndef "" : goto *bgm_mode


goto *b_title_botun_loop

;------------------------------
;スタートを押した後の処理
*start_sub_menu
	btndef ""

	vsp t_btn_start_lsp,0
	vsp t_btn_web_lsp,0
	vsp t_btn_tips_lsp,0
	vsp t_btn_exit_lsp,0
	vsp t_btn_music_lsp,0
	vsp t_btn_ura_tea_lsp,0
	vsp t_logo_lsp,0
	vsp t_btn_start_lsp,0
	vsp t_txt_start_lsp,0


	bg black,2
	bgcopy
   ;１話、未クリア状態
   ;------------------------------
;	*start_sub_menu_100
	notif %UMINEKOEND < 1 goto *start_sub_menu_btn_100
		
;		bg "bmp\title\ss_btn\back\s_select_back0.bmp",3
		lsp t_back_lsp,":a;bmp\title\ss_btn\back\1ms.bmp",0,0

		lsp t_btn_ep1_lsp,":a/2,0,3;bmp\title\ss_btn\btn\1_2.bmp",0,100	;178
		lsp t_btn_ep2_lsp,":a;bmp\title\ss_btn\btn\2_1.bmp",15,200,100	;197
		lsp t_btn_ep3_lsp,":a;bmp\title\ss_btn\btn\3_1.bmp",25,160,100	;216
		lsp t_btn_ep4_lsp,":a;bmp\title\ss_btn\btn\4_1.bmp",90,210,80	;235
		lsp t_btn_ep5_lsp,":a;bmp\title\ss_btn\btn\5_1.bmp",107,100,80	;235
		lsp t_btn_ep6_lsp,":a;bmp\title\ss_btn\btn\6_1.bmp",150,230,45	;235
		lsp t_btn_ep7_lsp,":a;bmp\title\ss_btn\btn\7_1.bmp",240,180,40	;235
		lsp t_btn_load_lsp,":a/2,0,3;bmp\r_click\sys_btn\load.bmp",460,430	;254
		lsph t_txt_ep1_lsp,":a;bmp\title\txt_box\ep1.bmp",350,120,100

		bg "bmp\title\ss_btn\back\s_select_back1.bmp",0
		print 80

	*start_sub_menu_100
	notif %UMINEKOEND < 1 goto *start_sub_menu_btn_100
		
;		bg "bmp\title\ss_btn\back\s_select_back0.bmp",3

		lsp t_btn_ep1_lsp,":a/2,0,3;bmp\title\ss_btn\btn\1_2.bmp",0,100	;178
		lsp t_btn_ep2_lsp,":a;bmp\title\ss_btn\btn\2_1.bmp",15,200,100	;197
		lsp t_btn_ep3_lsp,":a;bmp\title\ss_btn\btn\3_1.bmp",25,160,100	;216
		lsp t_btn_ep4_lsp,":a;bmp\title\ss_btn\btn\4_1.bmp",90,210,80	;235
		lsp t_btn_ep5_lsp,":a;bmp\title\ss_btn\btn\5_1.bmp",107,100,80	;235
		lsp t_btn_ep6_lsp,":a;bmp\title\ss_btn\btn\6_1.bmp",150,230,45	;235
		lsp t_btn_ep7_lsp,":a;bmp\title\ss_btn\btn\7_1.bmp",240,180,40;235
		lsp t_btn_load_lsp,":a/2,0,3;bmp\r_click\sys_btn\load.bmp",460,430	;254





		bg "bmp\title\ss_btn\back\s_select_back1.bmp",0
		print 1

		*start_sub_menu_btn_100_loop
		btndef ""

		exbtn_d "P0,1C87C18C15C14C13C12C61C60C59C58C57C56C55C54C78C77C79"
;exbtn 4,1,"P4,1P5P6P7S1,(sound/cursor8.wav)"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P18S1,(sys_se/p_sharin.wav)"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"C78"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"C78"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"C78"
		exbtn t_btn_ep5_lsp,t_btn_ep5_lsp,"C78"
		exbtn t_btn_ep6_lsp,t_btn_ep6_lsp,"C78"
		exbtn t_btn_ep7_lsp,t_btn_ep7_lsp,"C78"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"C87"

		transbtn ;透過部分のみをボタンとする
		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : E_A : goto *higan_start


		if %BtnRes = t_btn_load_lsp btndef "" : seplay 9,1001 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
		if %BtnRes = -1 btndef "" : seplay 9,1001 : mov %r_for_title,1 : gosub *csptext : goto *b_title_shunkan
		goto *start_sub_menu_btn_100_loop

	*start_sub_menu_btn_100
		;確認メッセージを出して、アンロック処理を行う
   ;------------------------------
   ;1話クリア､2話クリア状態
	*start_sub_menu_200

		;背景を一段明るくする
		lsp t_back_lsp,":a;bmp\title\ss_btn\back\2ms.bmp",0,0

		bg "bmp\title\ss_btn\back\s_select_back7.bmp",0

	if %UMINEKOEND < 1 goto *start_sub_menu_btn_200
	if %UMINEKOEND >= 2 goto *start_sub_menu_btn_200
		lsp t_btn_ep1_lsp,":a/2,0,3;bmp\title\ss_btn\btn\1_3.bmp",0,100,170	;178
		lsp t_btn_ep2_lsp,":a/2,0,3;bmp\title\ss_btn\btn\2_2.bmp",15,200	;197
		lsp t_btn_ep3_lsp,":a;bmp\title\ss_btn\btn\3_1.bmp",25,130,140	;216
		lsp t_btn_ep4_lsp,":a;bmp\title\ss_btn\btn\4_1.bmp",90,210,80	;235
		lsp t_btn_ep5_lsp,":a;bmp\title\ss_btn\btn\5_1.bmp",107,100,80	;235
		lsp t_btn_ep6_lsp,":a;bmp\title\ss_btn\btn\6_1.bmp",150,230,45	;235
		lsp t_btn_ep7_lsp,":a;bmp\title\ss_btn\btn\7_1.bmp",240,180,50	;235
		lsp t_btn_load_lsp,":a/2,0,3;bmp\r_click\sys_btn\load.bmp",460,430	;254
		lsph t_txt_ep1_lsp,":a;bmp\title\txt_box\ep1.bmp",350,120,100
		lsph t_txt_ep2_lsp,":a;bmp\title\txt_box\ep2.bmp",350,120,100

		print 80

		*start_sub_menu_btn_200_loop
		btndef ""
		transbtn ;透過部分のみをボタンとする

		exbtn_d "P0,1C87C18C17C15C14C13C12C61C60C59C58C57C56C55C54C78C77C79"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P18S1,(sys_se/fire.wav)"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P17S1,(sys_se/p_sharin.wav)"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"C78"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"C78"
		exbtn t_btn_ep5_lsp,t_btn_ep5_lsp,"C78"
		exbtn t_btn_ep6_lsp,t_btn_ep6_lsp,"C78"
		exbtn t_btn_ep7_lsp,t_btn_ep7_lsp,"C78"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"C87"

		transbtn ;透過部分のみをボタンとする
		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,2 : E_A : goto *higan_start 


		if %BtnRes = t_btn_load_lsp btndef "" : seplay 9,1001 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
				if %BtnRes = -1 btndef "" : seplay 9,1001 : mov %r_for_title,1 : gosub *csptext : goto *b_title_shunkan
		goto *start_sub_menu_btn_200_loop
	*start_sub_menu_btn_200




   ;2話クリア状態、3話未クリア
	*start_sub_menu_300

		;背景を一段明るくする
		lsp t_back_lsp,":a;bmp\title\ss_btn\back\3ms.bmp",0,0

		bg "bmp\title\ss_btn\back\s_select_back7.bmp",0

	if %UMINEKOEND < 2 goto *start_sub_menu_btn_300
	if %UMINEKOEND >= 3 goto *start_sub_menu_btn_300
		lsp t_btn_ep1_lsp,":a/2,0,3;bmp\title\ss_btn\btn\1_3.bmp",0,100,170	;178
		lsp t_btn_ep2_lsp,":a/2,0,3;bmp\title\ss_btn\btn\2_3.bmp",15,200,170	;197
		lsp t_btn_ep3_lsp,":a/2,0,3;bmp\title\ss_btn\btn\3_2.bmp",25,130,230	;216
		lsp t_btn_ep4_lsp,":a;bmp\title\ss_btn\btn\4_1.bmp",90,210,80	;235
		lsp t_btn_ep5_lsp,":a;bmp\title\ss_btn\btn\5_1.bmp",107,100,80	;235
		lsp t_btn_ep6_lsp,":a;bmp\title\ss_btn\btn\6_1.bmp",150,230,45	;235
		lsp t_btn_ep7_lsp,":a;bmp\title\ss_btn\btn\7_1.bmp",240,180,50	;235
		lsp t_btn_load_lsp,":a/2,0,3;bmp\r_click\sys_btn\load.bmp",460,430	;254
		lsph t_txt_ep1_lsp,":a;bmp\title\txt_box\ep1.bmp",350,120,100
		lsph t_txt_ep2_lsp,":a;bmp\title\txt_box\ep2.bmp",350,120,100
		lsph t_txt_ep3_lsp,":a;bmp\title\txt_box\ep3.bmp",350,120,100
		print 80

		*start_sub_menu_btn_300_loop
		btndef ""
		transbtn ;透過部分のみをボタンとする

		exbtn_d "P0,1C87C18C17C16C15C14C13C12C61C60C59C58C57C56C55C54C78C77C79"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P18S1,(sys_se/fire.wav)"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P17S1,(sys_se/fire.wav)"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P16S1,(sys_se/p_sharin.wav)"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"C78"
		exbtn t_btn_ep5_lsp,t_btn_ep5_lsp,"C78"
		exbtn t_btn_ep6_lsp,t_btn_ep6_lsp,"C78"
		exbtn t_btn_ep7_lsp,t_btn_ep7_lsp,"C78"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"C87"

		transbtn ;透過部分のみをボタンとする
		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,2 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep3_lsp mov %scenario_Number,3 : E_A : goto *higan_start


		if %BtnRes = t_btn_load_lsp btndef "" : seplay 9,1001 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
				if %BtnRes = -1 btndef "" : seplay 9,1001 : mov %r_for_title,1 : gosub *csptext : goto *b_title_shunkan
		goto *start_sub_menu_btn_300_loop
	*start_sub_menu_btn_300



   ;------------------------------
   ;3話クリア状態、４話未クリア
	*start_sub_menu_400

		;背景を一段明るくする
		bg "bmp\title\ss_btn\back\s_select_back7.bmp",0
		lsp t_back_lsp,":a;bmp\title\ss_btn\back\4ms.bmp",0,0


	if %UMINEKOEND < 3 goto *start_sub_menu_btn_400
	if %UMINEKOEND >= 4 goto *start_sub_menu_btn_400
		lsp t_btn_ep1_lsp,":a/2,0,3;bmp\title\ss_btn\btn\1_3.bmp",0,100,120	;178
		lsp t_btn_ep2_lsp,":a/2,0,3;bmp\title\ss_btn\btn\2_3.bmp",15,200,170	;197
		lsp t_btn_ep3_lsp,":a/2,0,3;bmp\title\ss_btn\btn\3_3.bmp",25,130,170	;216
		lsp t_btn_ep4_lsp,":a/2,0,3;bmp\title\ss_btn\btn\4_2.bmp",90,260	;235
		lsp t_btn_ep5_lsp,":a;bmp\title\ss_btn\btn\5_1.bmp",107,100,80	;235
		lsp t_btn_ep6_lsp,":a;bmp\title\ss_btn\btn\6_1.bmp",150,230,45	;235
		lsp t_btn_ep7_lsp,":a;bmp\title\ss_btn\btn\7_1.bmp",240,180,50	;235
		lsp t_btn_load_lsp,":a/2,0,3;bmp\r_click\sys_btn\load.bmp",460,430	;254
		lsph t_txt_ep1_lsp,":a;bmp\title\txt_box\ep1.bmp",350,120,100
		lsph t_txt_ep2_lsp,":a;bmp\title\txt_box\ep2.bmp",350,120,100
		lsph t_txt_ep3_lsp,":a;bmp\title\txt_box\ep3.bmp",350,120,100
		lsph t_txt_ep4_lsp,":a;bmp\title\txt_box\ep4.bmp",350,120,100

		print 80

		*start_sub_menu_btn_400_loop
		btndef ""
		transbtn ;透過部分のみをボタンとする

		exbtn_d "P0,1C87C18C17C16C15C14C13C12C61C60C59C58C57C56C55C54C78C77C79"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P18S1,(sys_se/fire.wav)"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P17S1,(sys_se/fire.wav)"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P16S1,(sys_se/fire.wav)"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P15S1,(sys_se/p_sharin.wav)"
		exbtn t_btn_ep5_lsp,t_btn_ep5_lsp,"C78"
		exbtn t_btn_ep6_lsp,t_btn_ep6_lsp,"C78"
		exbtn t_btn_ep7_lsp,t_btn_ep7_lsp,"C78"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"C87"

		transbtn ;透過部分のみをボタンとする
		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,2 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep3_lsp mov %scenario_Number,3 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep4_lsp mov %scenario_Number,4 : E_A : goto *higan_start


		if %BtnRes = t_btn_load_lsp btndef "" : seplay 9,1001 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
				if %BtnRes = -1 btndef "" : seplay 9,1001 : mov %r_for_title,1 : gosub *csptext : goto *b_title_shunkan
		goto *start_sub_menu_btn_400_loop
	*start_sub_menu_btn_400

   ;------------------------------
   ;4話クリア状態、5話未クリア
	*start_sub_menu_500
		bg "bmp\title\ss_btn\back\s_select_back7.bmp",0
		lsp t_back_lsp,":a;bmp\title\ss_btn\back\5ms.bmp",0,0


	if %UMINEKOEND < 4 goto *start_sub_menu_btn_500
	if %UMINEKOEND >= 5 goto *start_sub_menu_btn_500
		lsp t_btn_ep1_lsp,":a/2,0,3;bmp\title\ss_btn\btn\1_3.bmp",0,100,70	;178
		lsp t_btn_ep2_lsp,":a/2,0,3;bmp\title\ss_btn\btn\2_3.bmp",15,200,90	;197
		lsp t_btn_ep3_lsp,":a/2,0,3;bmp\title\ss_btn\btn\3_3.bmp",25,130,170	;216
		lsp t_btn_ep4_lsp,":a/2,0,3;bmp\title\ss_btn\btn\4_3.bmp",90,260,190	;235
		lsp t_btn_ep5_lsp,":a/2,0,3;bmp\title\ss_btn\btn\5_2.bmp",107,100,230	;235
		lsp t_btn_ep6_lsp,":a;bmp\title\ss_btn\btn\6_1.bmp",150,230,45	;235
		lsp t_btn_ep7_lsp,":a;bmp\title\ss_btn\btn\7_1.bmp",240,180,50	;235
		lsp t_btn_load_lsp,":a/2,0,3;bmp\r_click\sys_btn\load.bmp",460,430	;254
		lsph t_txt_ep1_lsp,":a;bmp\title\txt_box\ep1.bmp",350,120,100
		lsph t_txt_ep2_lsp,":a;bmp\title\txt_box\ep2.bmp",350,120,100
		lsph t_txt_ep3_lsp,":a;bmp\title\txt_box\ep3.bmp",350,120,100
		lsph t_txt_ep4_lsp,":a;bmp\title\txt_box\ep4.bmp",350,120,100
		lsph t_txt_ep5_lsp,":a;bmp\title\txt_box\ep5.bmp",350,120,100


		print 80

		*start_sub_menu_btn_500_loop
		btndef ""
		transbtn ;透過部分のみをボタンとする

		exbtn_d "P0,1C87C18C17C16C15C14C13C12C61C60C59C58C57C56C55C54C78C77C79"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P18S1,(sys_se/fire.wav)"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P17S1,(sys_se/fire.wav)"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P16S1,(sys_se/fire.wav)"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P15S1,(sys_se/fire.wav)"
		exbtn t_btn_ep5_lsp,t_btn_ep5_lsp,"P14S1,(sys_se/p_sharin.wav)"
		exbtn t_btn_ep6_lsp,t_btn_ep6_lsp,"C78"
		exbtn t_btn_ep7_lsp,t_btn_ep7_lsp,"C78"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"C87"

		transbtn ;透過部分のみをボタンとする
		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,2 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep3_lsp mov %scenario_Number,3 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep4_lsp mov %scenario_Number,4 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep5_lsp mov %scenario_Number,5 : E_A : goto *higan_start


		if %BtnRes = t_btn_load_lsp btndef "" : seplay 9,1001 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
;		if %BtnRes = 0 btndef "" : seplay 9,1001 : mov %r_for_title,1 : goto *b_title_shunkan
				if %BtnRes = -1 btndef "" : seplay 9,1001 : mov %r_for_title,1 : gosub *csptext : goto *b_title_shunkan
		goto *start_sub_menu_btn_500_loop
	*start_sub_menu_btn_500

   ;------------------------------
   ;5話クリア状態、6話未クリア
	*start_sub_menu_600

		bg "bmp\title\ss_btn\back\s_select_back7.bmp",0
		lsp t_back_lsp,":a;bmp\title\ss_btn\back\6ms.bmp",0,0


	if %UMINEKOEND < 5 goto *start_sub_menu_btn_600
	if %UMINEKOEND >= 6 goto *start_sub_menu_btn_600
		lsp t_btn_ep1_lsp,":a/2,0,3;bmp\title\ss_btn\btn\1_3.bmp",0,100,170	;178
		lsp t_btn_ep2_lsp,":a/2,0,3;bmp\title\ss_btn\btn\2_3.bmp",15,200,170	;197
		lsp t_btn_ep3_lsp,":a/2,0,3;bmp\title\ss_btn\btn\3_3.bmp",25,130,170	;216
		lsp t_btn_ep4_lsp,":a/2,0,3;bmp\title\ss_btn\btn\4_3.bmp",90,260,170	;235
		lsp t_btn_ep5_lsp,":a/2,0,3;bmp\title\ss_btn\btn\5_3.bmp",107,100,170	;235
		lsp t_btn_ep6_lsp,":a/2,0,3;bmp\title\ss_btn\btn\6_2.bmp",150,230,230	;235
		lsp t_btn_ep7_lsp,":a;bmp\title\ss_btn\btn\7_1.bmp",240,180,50	;235
		lsp t_btn_load_lsp,":a/2,0,3;bmp\r_click\sys_btn\load.bmp",460,430	;254
		lsph t_txt_ep1_lsp,":a;bmp\title\txt_box\ep1.bmp",350,120,100
		lsph t_txt_ep2_lsp,":a;bmp\title\txt_box\ep2.bmp",350,120,100
		lsph t_txt_ep3_lsp,":a;bmp\title\txt_box\ep3.bmp",350,120,100
		lsph t_txt_ep4_lsp,":a;bmp\title\txt_box\ep4.bmp",350,120,100
		lsph t_txt_ep5_lsp,":a;bmp\title\txt_box\ep5.bmp",350,120,100
		lsph t_txt_ep6_lsp,":a;bmp\title\txt_box\ep6.bmp",350,120,100

		print 80

		*start_sub_menu_btn_600_loop
		btndef ""
		transbtn ;透過部分のみをボタンとする

		exbtn_d "P0,1C87C18C17C16C15C14C13C12C61C60C59C58C57C56C55C54C78C77C79"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P18S1,(sys_se/fire.wav)"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P17S1,(sys_se/fire.wav)"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P16S1,(sys_se/fire.wav)"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P15S1,(sys_se/fire.wav)"
		exbtn t_btn_ep5_lsp,t_btn_ep5_lsp,"P14S1,(sys_se/fire.wav)"
		exbtn t_btn_ep6_lsp,t_btn_ep6_lsp,"P13S1,(sys_se/p_sharin.wav)"
		exbtn t_btn_ep7_lsp,t_btn_ep7_lsp,"C78"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"C87"

		;透過処理が掛かっている部分はボタン処理を行なわない、という宣言
		transbtn
		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,2 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep3_lsp mov %scenario_Number,3 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep4_lsp mov %scenario_Number,4 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep5_lsp mov %scenario_Number,5 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep6_lsp mov %scenario_Number,6 : E_A : goto *higan_start

		if %BtnRes = t_btn_load_lsp btndef "" : seplay 9,1001 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
				if %BtnRes = -1 btndef "" : seplay 9,1001 : mov %r_for_title,1 : gosub *csptext : goto *b_title_shunkan
		goto *start_sub_menu_btn_600_loop
	*start_sub_menu_btn_600

   ;------------------------------
   ;6話クリア状態、7話未クリア
	*start_sub_menu_700
		bg "bmp\title\ss_btn\back\s_select_back7.bmp",0
		lsp t_back_lsp,":a;bmp\title\ss_btn\back\6ms.bmp",0,0


	if %UMINEKOEND < 6 goto *start_sub_menu_btn_700
	if %UMINEKOEND >= 7 goto *start_sub_menu_btn_700
		lsp t_btn_ep1_lsp,":a/2,0,3;bmp\title\ss_btn\btn\1_3.bmp",0,100,170	;178
		lsp t_btn_ep2_lsp,":a/2,0,3;bmp\title\ss_btn\btn\2_3.bmp",15,200,170	;197
		lsp t_btn_ep3_lsp,":a/2,0,3;bmp\title\ss_btn\btn\3_3.bmp",25,130,170	;216
		lsp t_btn_ep4_lsp,":a/2,0,3;bmp\title\ss_btn\btn\4_3.bmp",90,260,170	;235
		lsp t_btn_ep5_lsp,":a/2,0,3;bmp\title\ss_btn\btn\5_3.bmp",107,100,170	;235
		lsp t_btn_ep6_lsp,":a/2,0,3;bmp\title\ss_btn\btn\6_3.bmp",150,230,230	;235
		lsp t_btn_ep7_lsp,":a/2,0,3;bmp\title\ss_btn\btn\7_2.bmp",240,180,240	;235
		lsp t_btn_load_lsp,":a/2,0,3;bmp\r_click\sys_btn\load.bmp",460,430	;254
		lsph t_txt_ep1_lsp,":a;bmp\title\txt_box\ep1.bmp",350,120,100
		lsph t_txt_ep2_lsp,":a;bmp\title\txt_box\ep2.bmp",350,120,100
		lsph t_txt_ep3_lsp,":a;bmp\title\txt_box\ep3.bmp",350,120,100
		lsph t_txt_ep4_lsp,":a;bmp\title\txt_box\ep4.bmp",350,120,100
		lsph t_txt_ep5_lsp,":a;bmp\title\txt_box\ep5.bmp",350,120,100
		lsph t_txt_ep6_lsp,":a;bmp\title\txt_box\ep6.bmp",350,120,100
		lsph t_txt_ep7_lsp,":a;bmp\title\txt_box\ep7.bmp",350,120,100

		print 80

		*start_sub_menu_btn_700_loop
		btndef ""
		transbtn ;透過部分のみをボタンとする

		exbtn_d "P0,1C87C18C17C16C15C14C13C12C61C60C59C58C57C56C55C54C78C77C79"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P18S1,(sys_se/fire.wav)"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P17S1,(sys_se/fire.wav)"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P16S1,(sys_se/fire.wav)"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P15S1,(sys_se/fire.wav)"
		exbtn t_btn_ep5_lsp,t_btn_ep5_lsp,"P14S1,(sys_se/fire.wav)"
		exbtn t_btn_ep6_lsp,t_btn_ep6_lsp,"P13S1,(sys_se/fire.wav)"
		exbtn t_btn_ep7_lsp,t_btn_ep7_lsp,"P12S1,(sys_se/p_sharin.wav)"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"C87"

		transbtn ;透過部分のみをボタンとする
		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,2 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep3_lsp mov %scenario_Number,3 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep4_lsp mov %scenario_Number,4 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep5_lsp mov %scenario_Number,5 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep6_lsp mov %scenario_Number,6 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep7_lsp mov %scenario_Number,7 : E_A : goto *higan_start

		if %BtnRes = t_btn_load_lsp btndef "" : seplay 9,1001 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
;		if %BtnRes = 0 btndef "" : seplay 9,1001 : mov %r_for_title,1 : goto *b_title_shunkan
				if %BtnRes = -1 btndef "" : seplay 9,1001 : mov %r_for_title,1 : gosub *csptext : goto *b_title_shunkan
		goto *start_sub_menu_btn_700_loop
	*start_sub_menu_btn_700

   ;------------------------------
   ;6話クリア状態、追加要素未プレイ？状態
	*start_sub_menu_800
		bg "bmp\title\ss_btn\back\s_select_back7.bmp",0

	if %UMINEKOEND < 7 goto *start_sub_menu_btn_700
;	if %UMINEKOEND >= 8 goto *start_sub_menu_btn_600
		lsp t_btn_ep1_lsp,":a/2,0,3;bmp\title\ss_btn\btn\1_3.bmp",0,100,120	;178
		lsp t_btn_ep2_lsp,":a/2,0,3;bmp\title\ss_btn\btn\2_3.bmp",15,200,130	;197
		lsp t_btn_ep3_lsp,":a/2,0,3;bmp\title\ss_btn\btn\3_3.bmp",25,130,210	;216
		lsp t_btn_ep4_lsp,":a/2,0,3;bmp\title\ss_btn\btn\4_3.bmp",90,260,200	;235
		lsp t_btn_ep5_lsp,":a/2,0,3;bmp\title\ss_btn\btn\5_3.bmp",107,100,250	;235
		lsp t_btn_ep6_lsp,":a/2,0,3;bmp\title\ss_btn\btn\6_3.bmp",150,230,230	;235
		lsp t_btn_ep7_lsp,":a/2,0,3;bmp\title\ss_btn\btn\7_3.bmp",240,180,240	;235
		lsp t_btn_load_lsp,":a/2,0,3;bmp\r_click\sys_btn\load.bmp",460,430	;254
		lsph t_txt_ep1_lsp,":a;bmp\title\txt_box\ep1.bmp",350,120,100
		lsph t_txt_ep2_lsp,":a;bmp\title\txt_box\ep2.bmp",350,120,100
		lsph t_txt_ep3_lsp,":a;bmp\title\txt_box\ep3.bmp",350,120,100
		lsph t_txt_ep4_lsp,":a;bmp\title\txt_box\ep4.bmp",350,120,100
		lsph t_txt_ep5_lsp,":a;bmp\title\txt_box\ep5.bmp",350,120,100
		lsph t_txt_ep6_lsp,":a;bmp\title\txt_box\ep6.bmp",350,120,100
		lsph t_txt_ep7_lsp,":a;bmp\title\txt_box\ep7.bmp",350,120,100

		print 80

		*start_sub_menu_btn_800_loop
		btndef ""
		transbtn ;透過部分のみをボタンとする

		exbtn_d "P0,1C87C18C17C16C15C14C13C12C61C60C59C58C57C56C55C54C78C77C79"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P18S1,(sys_se/fire.wav)"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P17S1,(sys_se/fire.wav)"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P16S1,(sys_se/fire.wav)"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P15S1,(sys_se/fire.wav)"
		exbtn t_btn_ep5_lsp,t_btn_ep5_lsp,"P14S1,(sys_se/fire.wav)"
		exbtn t_btn_ep6_lsp,t_btn_ep6_lsp,"P13S1,(sys_se/fire.wav)"
		exbtn t_btn_ep7_lsp,t_btn_ep7_lsp,"P12S1,(sys_se/fire.wav)"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"C87"

		transbtn ;透過部分のみをボタンとする
		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,2 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep3_lsp mov %scenario_Number,3 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep4_lsp mov %scenario_Number,4 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep5_lsp mov %scenario_Number,5 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep6_lsp mov %scenario_Number,6 : E_A : goto *higan_start
		if %BtnRes = t_btn_ep7_lsp mov %scenario_Number,7 : E_A : goto *higan_start

		if %BtnRes = t_btn_load_lsp btndef "" : seplay 9,1001 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
;		if %BtnRes = 0 btndef "" : seplay 9,1001 : mov %r_for_title,1 : goto *b_title_shunkan
				if %BtnRes = -1 btndef "" : seplay 9,1001 : mov %r_for_title,1 : gosub *csptext : goto *b_title_shunkan
		goto *start_sub_menu_btn_800_loop
	*start_sub_menu_btn_800


;＞＜＞＜＞＜＞＜＞＜＞＜＞＜＞＜＞＞＜＞＜＞＜＞＜＞＜＞＜＞＜＞＜＞

*higan_start

se1v 80,30
se2 83
	
	lsp 1,":c;bmp\r_click\black.bmp",0,0
	print 2

	wait 1000 

	lsp2 3,":c;bmp\background\efe\e005.bmp",300,300,200,200,20,100
	lsp2 2,":c;bmp\background\efe\e005.bmp",300,300,300,300,210,80
	print 1
	lsp 5,"bmp\background\efe\aka3.bmp",0,0,50
	lsp2 0,":c;bmp\background\efe\e005.bmp",500,500,300,300,300,50
	delay 50
	print 1
	wait 100
	csp2 0
	csp2 2
	csp2 3
	print 0
	csp 5
	lsp 1 ,":c;bmp\r_click\black.bmp",0,0
	print 22
	wait 2000


	seplay 11,82
csp -1
print 0
bg black,0
print 10,100
bgcopy
E_MA

if %scenario_Number = 1 goto *higan1_standby
if %scenario_Number = 2 goto *higan2_standby
if %scenario_Number = 3 goto *higan3_standby
if %scenario_Number = 4 goto *higan4_standby
if %scenario_Number = 5 goto *higan5_standby
if %scenario_Number = 6 goto *higan6_standby
if %scenario_Number = 7 goto *higan7_standby


*higan1_standby
 goto *higan1_opning

*higan2_standby
 goto *higan2_opning

*higan3_standby
 goto *higan3_opning

*higan4_standby
 goto *higan4_opning

*higan5_standby
 goto *higan5_opning

*higan6_standby
 goto *higan6_opning

*higan7_standby
 goto *higan7_opning

;タイトルに戻るときに消すもの
*csptext
	csp t_btn_load_lsp
	csp t_txt_ep1_lsp
	csp t_txt_ep2_lsp
	csp t_txt_ep3_lsp
	csp t_txt_ep4_lsp
	csp t_txt_ep5_lsp
	csp t_txt_ep6_lsp
	csp t_txt_ep7_lsp
return

*sharin
	mov $Se_Play,"sys_se\p_sharin.wav"
	goto *Se_Play_Mord

return

;衣装フラグなどのリセット
*Flg_reset
mov %MAR_Isyou,1 ;森谷毬枝
mov %KAN_Isyou,1 ;金森先生
mov %HIG_Isyou,1 ;彼岸花
mov %NON_Isyou,1 ;野々宮武
mov %YOU_Isyou,1 ;沼田陽子
mov %KOU_Isyou,1 ;校長先生
mov %HIK_Isyou,1 ;二瓶ひかる
mov %HAM_Isyou,1 ;ハメルン
mov %HOK_Isyou,1 ;保健の先生
mov %MID_Isyou,1 ;楠木みどり
mov %SIN_Isyou,1 ;紅茶紳士
mov %MIC_Isyou,1 ;桜田みちる
mov %SAK_Isyou,1 ;さくのしん
mov %YUK_Isyou,1 ;榊由香里
mov %SMI_Isyou,1 ;スミレ
mov %YO2_Isyou,1 ;沼田陽子　生前
mov %AYA_Isyou,1 ;相馬あや
mov %AY2_Isyou,1 ;相馬あや
mov %IZA_Isyou,1 ;イザナミ
mov %YOS_Isyou,1 ;吉川正明
mov %AZA_Isyou,1 ;アザミ
mov %RUN_Isyou,1 ;ルノワール
mov %NOD_Isyou,1 ;野田裕貴
mov %NAF_Isyou,1 ;新谷ナフミ
mov %SHU_Isyou,1 ;有森秋一
mov %SH2_Isyou,1 ;有森秋一　大人
mov %KYO_Isyou,1 ;キョウ
mov %TOM_Isyou,1 ;岡田智子
mov %ma2_Isyou,1 ;マリエ夜
return





;************************************************************************************
;タイトル：*csp
;目的　　：Ｃｓｐ文によるスプライト破棄時のカーソルのセット
;　　　　：文章を表示するときの矢印などをスプライトを拾得する　　　　　
;2006/03/15
;************************************************************************************

*csp

 getparam %cspParam

;全てのスプライト破棄であるならば、破棄後にカーソルデータを拾得
if %cspParam = -1 _csp-1 : lsph TextCC1SpNum,":l/3,160,2;Bmp\cursor0.bmp",0,0 : lsph TextCC2SpNum,":l/3,160,2;Bmp\cursor1.bmp",0,0 : jumpf

if %cspParam = -2 && %efespflg = 0_csp-1 : lsph TextCC1SpNum,":l/3,160,2;Bmp\cursor0.bmp",0,0 : lsph TextCC2SpNum,":l/3,160,2;Bmp\cursor1.bmp",0,0 : jumpf

if %cspParam = -2 && %efespflg > 0_csp-1 : lsph TextCC1SpNum,":l/3,160,2;Bmp\cursor0.bmp",0,0 : lsph TextCC2SpNum,":l/3,160,2;Bmp\cursor1.bmp",0,0 : dllefe %efespflg,%efespflg2 : jumpf

;if %cspParam = -1 _csp-1 : lsph TextCC1SpNum,":l/3,160,2;Bmp\cursor0.bmp",0,0 : lsph TextCC2SpNum,":l/3,160,2;Bmp\cursor1.bmp",0,0 : lsp text_back,":a;bmp\introduction_back1.bmp",0,0 : return

if %cspParam = TextCC1SpNum return
if %cspParam = TextCC2SpNum return


;それ以外なら、指定のスプライトを破棄する
_csp %cspParam

return

~
;現在ページをログにコピーする

;if %tmordflg = 1 return

 dec %BacklogNum
 mov $%BacklogNum,$Textlog
 inc %BacklogNum

return

;************************************************************************************
;タイトル：*texton　*textoff
;目的　　：テキスト表示エリアの背景をスプライトにする
;　　　　：文章を表示するときの背景画像のスプライトを拾得する　　　　　
;2007/01/19
;************************************************************************************

*texton

;テキスト背景をオンにする
vsp text_back,1

;文字表示エリアを表示する
_texton
print 1

return


*textoff

vsp text_back,0
_textoff

print 1

return




;*******************************************
;人物紹介フラグコマンド
;
;*******************************************


*introduction_flg

btndef ""

;if %intro_prog_flg = off jumpf       ;スプライトプログラムが動いているかの確認

;mov %intro_prog_flg,off           ;スプライトプログラムのフラグをオフ
;layermessage 10,"clear/10"           ;スプライトプログラムのスプライト消去
;layermessage 10,"program_end/10"           ;スプライトプログラムのプログラム停止
;csp 10
;print 1

;~

 getparam %Free1,%Free2,%Free3,%Free4    ;人物、状態、コメント１、コメント２

 mov %name_namber,%Free1                 ;人物紹介開始番号移動
 mov ?condition[%Free1],%Free2           ;対象者の状態変更
 mov %introduction_open,on               ;人物紹介システム　フラグオン

mov %Free5,Kin_com1               ;コメント１変数の頭だし
dec %Free5

add %Free5,%Free1                 ;人物番号を追加して、コメント変数を確定する
mov %%Free5,%Free3                ;コメント変数にシナリオ進行度を収納する

mov %Free5,Kin_com2               ;コメント２変数の頭だし
dec %Free5

add %Free5,%Free1                 ;人物番号を追加して、コメント変数を確定する
mov %%Free5,%Free4                ;コメント変数にシナリオ進行度を収納する

;mov %intro_prog_flg,on           ;スプライトプログラムのフラグをオン

 ;lsp intro,":a/5,600,1;紹介.bmp",340,380

;lsp 10,"*10"



;layermessage 10,"draw/10,:a;紹介2.bmp,700,390,255,0,1,1,0,-1"

;layermessage 10,"program_begin/10"
;layermessage 10,"set/10,dcenter_x=-20,acenter_x=1"

;layermessage 10,"loop_begin/10,10"
;layermessage 10,"wait/10,2.5"

;layermessage 10,"loop_end/10"

;layermessage 10,"set/10,dcenter_x=0,acenter_x=0"

;layermessage 10,"loop_begin/10,10"
;layermessage 10,"wait/10,3"

;layermessage 10,"loop_end/10"

;layermessage 10,"set/10,dcenter_x=5,acenter_x=1"

;layermessage 10,"loop_begin/10,40"
;layermessage 10,"wait/10,10"

;layermessage 10,"loop_end/10"

;layermessage 10,"clear/10"


;layermessage 10,"loop_begin/10,10"
;layermessage 10,"wait/10,1000"

;layermessage 10,"loop_end/10"
;layermessage 10,"set/10,dcenter_x=0,acenter_x=0"




return



　フェードアウト

*Fade_out



 lsp Fade_back,":c;bmp\black.bmp",0,0,0      ;背景指定
 mov %Free1,256
 mov %Fade_wait1,100    ;総合ウェイト指定
 mov %Fade,20            ;回数指定（透過率のため256回以上不可

*Fade_out_costom


 mov %Free3,BGM_v_Chx                 ;音量の減少値
 mov %Free4,BGM_v_Chy                 ;音量値の百倍値
 mov %Free5,BGM_v_Ch                 ;音量値の反映値

 mov %Free2,%BGM_v_Ch
 mul %Free2,100
 mov %Free3,%Free2
 div %Free3,%Fade
 mov %BGM_v_Chx,%Free3
 mov %BGM_v_Chy,%Free2

 mov %Free2,%Me_v_Ch0
 mul %Free2,100
 mov %Free3,%Free2
 div %Free3,%Fade
 mov %Me_v_Chx0,%Free3
 mov %Me_v_Chy0,%Free2

 mov %Free2,%Me_v_Ch1
 mul %Free2,100
 mov %Free3,%Free2
 div %Free3,%Fade
 mov %Me_v_Chx1,%Free3
 mov %Me_v_Chy1,%Free2

 mov %Free2,%Me_v_Ch2
 mul %Free2,100
 mov %Free3,%Free2
 div %Free3,%Fade
 mov %Me_v_Chx2,%Free3
 mov %Me_v_Chy2,%Free2

 mov %Free2,%Me_v_Ch3
 mul %Free2,100
 mov %Free3,%Free2
 div %Free3,%Fade
 mov %Me_v_Chx3,%Free3
 mov %Me_v_Chy3,%Free2

 mov %Free2,%Me_v_Ch4
 mul %Free2,100
 mov %Free3,%Free2
 div %Free3,%Fade
 mov %Me_v_Chx4,%Free3
 mov %Me_v_Chy4,%Free2

 mov %Free2,%Me_v_Ch5
 mul %Free2,100
 mov %Free3,%Free2
 div %Free3,%Fade
 mov %Me_v_Chx5,%Free3
 mov %Me_v_Chy5,%Free2




 div %Fade_wait1,%Fade   ;一回のウェイトの計算（総合ウェイト／回数）
 div %Free1,%Fade        ;一回の不透過上昇値の計算（２５６／回数）



 for %Free9 = 1 to %Fade

  resettimer

  msp Fade_back,0,0,%Free1       ;黒幕をフェード率に合わせて透過値を変化
   mov %Free3,BGM_v_Chy
   mov %Free5,BGM_v_Ch
   for %Free2 = BGM_v_Chx to Me_v_Chx5
       mov %Free4,%%Free3
       sub %Free4,%%Free2
       sub %%Free3,%%Free2
       div %Free4,100
       mov %%Free5,%Free4
       inc %Free3
       inc %Free5
     next

  print 1
  bgmvol %BGM_v_Ch                     ;BGM音量を反映する
  chvol 10,%Me_v_Ch0
  chvol 11,%Me_v_Ch1
  chvol 12,%Me_v_Ch2
  chvol 13,%Me_v_Ch3
  chvol 14,%Me_v_Ch4
  chvol 15,%Me_v_Ch5


  waittimer %Fade_wait1


 next

bg black,1
gosub *E_A
csp Fade_back
print 1

return


;アイキャッチのカスタム

;**************************************************
;背景表示を司るのは<%eye_custom1>で
;ロゴ表示を司るのは<%eye_custom2>です
;
;<%eye_efeB1>〜<%eye_efeB3>は背景表示の時のdllによるパラメーターの制御用です
;<%eye_efeL1>〜<%eye_efeL3>はロゴ表示の時のdllによるパラメーターの制御用です
;<%eye_waitB><%eye_waitL>は背景、ロゴ表示速度です
;**************************************************

*eye_custom

;    rmode OFF                                   ;右クリック一時使用不可
    textoff                                     ;テキストウィンドウ消去（エフェクトはデフォルト）

if %intro_prog_flg = off jumpf       ;スプライトプログラムが動いているかの確認

mov %intro_prog_flg,off           ;スプライトプログラムのフラグをオフ
layermessage 10,"clear/10"           ;スプライトプログラムのスプライト消去
layermessage 10,"program_end/10"           ;スプライトプログラムのプログラム停止
csp 10


~

lsp Cinema_up,":c;bmp\efe\Cinema.BMP",0,0
lsp Cinema_down,":c;bmp\efe\Cinema.BMP",0,400

;カスタム値から背景表示エフェクトを選択

;普通　　　　　（上段下段に別れ左右からのみ）

if %eye_custom1 = 1 print 7

;クロスフェード

if %eye_custom1 = 2 print 2

;クロス渦巻き　（右巻き左巻き）

notif %eye_custom1 = 3 jumpf

 if %eye_efeB1 = 1 print 99,%eye_waitB,"whirl.dll/r"
 if %eye_efeB1 = 2 print 99,%eye_waitB,"whirl.dll/l"


~
;拡散　　　　　（上下、左右、拡散集積逆拡散逆集積）

notif %eye_custom1 = 4 jumpf

 if %eye_efeB1 = 1 mov $Free1,"breakup.dll/u"    ;上から
 if %eye_efeB1 = 2 mov $Free1,"breakup.dll/l"    ;下から

 if %eye_efeB2 = 1 mov $Free1,$Free1+"r"    ;右から
 if %eye_efeB2 = 2 mov $Free1,$Free1+"l"    ;左から

 if %eye_efeB3 = 1 mov $Free1,$Free1+"b"    ;拡散
 if %eye_efeB3 = 2 mov $Free1,$Free1+"p"    ;集積
 if %eye_efeB3 = 3 mov $Free1,$Free1+"B"    ;拡散(反転)
 if %eye_efeB3 = 4 mov $Free1,$Free1+"P"    ;集積(反転)

print 99,%eye_waitB,$Free1
~

;クロス滝　　　（上下左右、右左クロス）

notif %eye_custom1 = 5 jumpf

 if %eye_efeB1 = 1 mov $Free1,"cascade.dll/u"    ;上から
 if %eye_efeB1 = 2 mov $Free1,"cascade.dll/d"    ;下から
 if %eye_efeB1 = 3 mov $Free1,"cascade.dll/r"    ;右から
 if %eye_efeB1 = 4 mov $Free1,"cascade.dll/l"    ;左から

 if %eye_efeB2 = 1 mov $Free1,$Free1+"i"    ;イン
 if %eye_efeB2 = 2 mov $Free1,$Free1+"o"    ;アウト
 if %eye_efeB2 = 3 mov $Free1,$Free1+"x"    ;クロス

print 99,%eye_waitB,$Free1

~

lsp Cinema_logo,":a;bmp\efe\Cinema_logo.BMP",320,360


;カスタム値からロゴ表示エフェクトを選択

;普通　　　　　（上段下段に別れ左右からのみ）

if %eye_custom2 = 1 print 7

;クロスフェード

if %eye_custom2 = 2 print 42

;クロス渦巻き　（右巻き左巻き）

notif %eye_custom2 = 3 jumpf

 if %eye_efeL1 = 1 print 99,%eye_waitL,"whirl.dll/r"
 if %eye_efeL1 = 2 print 99,%eye_waitL,"whirl.dll/l"


~
;拡散　　　　　（上下、左右、拡散集積逆拡散逆集積）

notif %eye_custom2 = 4 jumpf

 if %eye_efeL1 = 1 mov $Free1,"breakup.dll/u"    ;上から
 if %eye_efeL1 = 2 mov $Free1,"breakup.dll/l"    ;下から

 if %eye_efeL2 = 1 mov $Free1,$Free1+"r"    ;右から
 if %eye_efeL2 = 2 mov $Free1,$Free1+"l"    ;左から

 if %eye_efeL3 = 1 mov $Free1,$Free1+"b"    ;拡散
 if %eye_efeL3 = 2 mov $Free1,$Free1+"p"    ;集積
 if %eye_efeL3 = 3 mov $Free1,$Free1+"B"    ;拡散(反転)
 if %eye_efeL3 = 4 mov $Free1,$Free1+"P"    ;集積(反転)

print 99,%eye_waitL,$Free1
~

;クロス滝　　　（上下左右、右左クロス）

notif %eye_custom2 = 5 jumpf

 if %eye_efeL1 = 1 mov $Free1,"cascade.dll/u"    ;上から
 if %eye_efeL1 = 2 mov $Free1,"cascade.dll/d"    ;下から
 if %eye_efeL1 = 3 mov $Free1,"cascade.dll/r"    ;右から
 if %eye_efeL1 = 4 mov $Free1,"cascade.dll/l"    ;左から

 if %eye_efeL2 = 1 mov $Free1,$Free1+"i"    ;イン
 if %eye_efeL2 = 2 mov $Free1,$Free1+"o"    ;アウト
 if %eye_efeL2 = 3 mov $Free1,$Free1+"x"    ;クロス

print 99,%eye_waitL,$Free1

~


resettimer


;使用変数の初期化
mov %eye_custom1,0
mov %eye_custom2,0
mov %eye_efeB1,0
mov %eye_efeB2,0
mov %eye_efeB3,0
mov %eye_efeL1,0
mov %eye_efeL2,0
mov %eye_efeL3,0
mov %eye_waitB,2000
mov %eye_waitL,2000
gosub *DATA_SET
waittimer 2000

bg black,42
csp -1
print 7
;setwindow 31,16,22,16,26,26,0,2,20,1,1,#999999,0,0,639,479
;rmode ON
!sd

return


*eye_rnd

 rnd %Free1,6        ;背景表示方法　現在五種類

  notif %Free1 = 3 jumpf 


  rnd2 %Free2,1,2

~
  notif %Free1 = 4 jumpf

  rnd2 %Free2,1,2
  rnd2 %Free3,1,2
  rnd2 %Free4,1,4

~  
  notif %Free1 = 5 jumpf

  rnd2 %Free2,1,4
  rnd2 %Free3,1,3

~
mov %eye_custom1,%Free1
mov %eye_efeB1,%Free2
mov %eye_efeB2,%Free3
mov %eye_efeB3,%Free4

 rnd %Free1,5        ;ロゴ表示方法　現在５種類
 inc %Free1

  notif %Free1 = 3 jumpf 

  rnd2 %Free2,1,2

~
  notif %Free1 = 4 jumpf

  rnd2 %Free2,1,2
  rnd2 %Free3,1,2
  rnd2 %Free4,1,4

~  
  notif %Free1 = 5 jumpf

  rnd2 %Free2,1,4
  rnd2 %Free3,1,3

~
mov %eye_custom2,%Free1
mov %eye_efeL1,%Free2
mov %eye_efeL2,%Free3
mov %eye_efeL3,%Free4

rnd2 %Free1,1500,3000
rnd2 %Free2,1500,3000

mov %eye_waitB,%Free1
mov %eye_waitL,%Free2

return


*mono

 getparam %Free1       ;モノクロ値を文字変数で取る

 notif %Free1 = off jumpf   ;OFFで無いならON処理へ

  mov %monoflg,off
  monocro off
 return

~

 if %Free1 = 1 mov %monoflg,1 : monocro #cccccc
 if %Free1 = 2 mov %monoflg,2 : monocro #ff4444

return


;**********************************************
;背景連続表示システム
;**********************************************


*RG_set
;		背景パス名	回数	速度
	getparam $RG_move_bg,%RG_move_jp,%RG_move_speed

;数値の設定

for %Free21 = 1 to %RG_move_jp

	mov %Free1,0	;念のための初期化
	mov %Free2,0
	mov %Free3,0
	mov %Free4,0
	mov %Free11,0
	mov %Free12,0


	rnd2 %Free1,10,80	;横幅の設定　この数字の四倍が値となる
	mov %Free2,%Free1	;縦幅の設定　この数字の三倍が値となる

	mul %Free1,4 : mul %Free2,3

	mov %Free11,640 : mov %Free12,480	;ｘｙ座標の最大値決めの値
	sub %Free11,%Free1 : sub %Free12,%Free2

	rnd2 %Free3,0,%Free11	;ｘ座標の設定
	rnd2 %Free4,0,%Free12	;ｙ座標の設定

	mov ?RG_move[%Free21][1],%Free3	;ｘ座標の設定
	mov ?RG_move[%Free21][2],%Free4	;ｙ座標の設定
	mov ?RG_move[%Free21][3],%Free1	;横幅の設定
	mov ?RG_move[%Free21][4],%Free2	;縦幅の設定

next

return


*RG_start

	btndef $RG_move_bg
	resettimer
	for %Free1 = 1 to %RG_move_jp
		se2v 40,100
		blt 0,0,640,480,?RG_move[%Free1][1],?RG_move[%Free1][2],?RG_move[%Free1][3],?RG_move[%Free1][4]
		print 1
		waittimer %RG_move_speed
		resettimer
	next

return

*RG_start_f

	btndef $RG_move_bg
	resettimer
	for %Free1 = 1 to %RG_move_jp
		se2v 40,100
		blt 0,0,640,480,?RG_move[%Free1][1],?RG_move[%Free1][2],?RG_move[%Free1][3],?RG_move[%Free1][4]
		print 1
		waittimer %RG_move_speed
		resettimer
	next
	blt 0,0,640,480,90,50,400,300
	print 1
	waittimer 300
	ofscpy
	btndef ""

return

;*******************************************************************

*jump_set

getparam $RG_move_bg
btndef $RG_move_bg


return


*jump_start


textoff

blt 0,0,640,480,0,0,640,480

mov %free1,0
mov %free2,0
mov %free3,640
mov %free4,480
mov %free11,0
mov %free12,0
mov %free13,0
mov %free14,0

for %free19 = 1 to 5
resettimer
add %free11,4
add %free13,0
add %free12,8
add %free14,12
add %free1,%free11
add %free2,%free13 
sub %free3,%free12
sub %free4,%free14

blt 0,0,640,480,%free1,%free2,%free3,%free4
waittimer 30

next
;bg black,1
for %free19 = 1 to 5
resettimer
add %free11,4
add %free13,16
add %free12,8
add %free14,6
add %free1,%FREE11
add %free2,%FREE13 
sub %free3,%FREE12
sub %free4,%FREE14

blt 0,0,640,480,%free1,%free2,%free3,%free4
waittimer 30

next
ofscpy

;bg black,1
btndef ""

return


;*******************************************************************
;目的　　：音関連のシステムの構築
;　　　　　呼び出す関数の制御
;製作　　：2006/09/7（八咫桜）
;修正　　：2006/010/7（八咫桜）
;*******************************************************************

;使用変数名

BGM_Play　　　　：曲名のパス収納用
Me_Play　　　　：ミュージックエフェクトのパス収納用
Se_Play　　　　：サウンドエフェクトのパス収納用
Me_Play_Channel：ミュージックエフェクトの再生チャンネル用
Se_Play_Channel：サウンドエフェクトの再生チャンネル用
Me_Number      ：再生するミュージックエフェクトのナンバー収納用
Me_s_Ch0　　　　：主音用ミュージックエフェクトのチャンネル使用フラグ
Me_s_Ch1        ：副音用
Me_s_Ch2
Me_s_Ch3
Me_s_Ch4
Me_s_Ch5

Set_vol         ：指定ボリューム
BGM_v_Ch        ：ＢＧＭ用ボリュームフラグ
Me_v_Ch0　　　　：主音用ミュージックエフェクトのボリュームフラグ
Me_v_Ch1        ：副音用
Me_v_Ch2
Me_v_Ch3
Me_v_Ch4
Me_v_Ch5
Se_v_Ch1        ：サウンド用
Se_v_Ch2
Se_v_Ch3


Free1          :フリーエリア
Free2

;****************************目的***********************************
;ＢＧＭを再生する
;前回より簡略化する
;*******************************************************************

;*******************************************************************
;ＢＧＭのデータ部分
;*******************************************************************

*bgm1
*bgmplay

getparam %BGM_s_Ch
mov %Set_vol,default_vol
mov %BGM_Play_Channel,%BGM_s_Ch
goto *BGM_List

return

*bgm1v
*bgmplay2

getparam %BGM_s_Ch,%Set_vol
mov %BGM_Play_Channel,%BGM_s_Ch
goto *BGM_List

return



;*******************************************************************
;ＢＧＭの演奏システム部分
;*******************************************************************

*BGM_Play_Mord                        ;BGMモードの演奏部分

  mov %BGM_v_Ch,%Set_vol
  bgmvol %Set_vol
  bgm $BGM_Play

 return


;****************************目的***********************************
;ミュージックエフェクトをループ再生する。
;再生チャンネルは１０〜１４
;
;*******************************************************************


*me1

mov %Set_vol,default_vol
getparam %Me_Number      ;チャンネルと曲番号と取得

mov %Me_Play_Channel,11
mov %Free1,Me_s_Ch1
mov %Free2,Me_v_Ch1

goto *mesys

*me1v

getparam %Me_Number,%Set_vol      ;チャンネルと曲番号と取得

mov %Me_Play_Channel,11
mov %Free1,Me_s_Ch1
mov %Free2,Me_v_Ch1

goto *mesys



*me2

mov %Set_vol,default_vol
getparam %Me_Number      ;チャンネルと曲番号と取得

mov %Me_Play_Channel,12
mov %Free1,Me_s_Ch2
mov %Free2,Me_v_Ch2

goto *mesys


*me2v

getparam %Me_Number,%Set_vol      ;チャンネルと曲番号と取得

mov %Me_Play_Channel,12
mov %Free1,Me_s_Ch2
mov %Free2,Me_v_Ch2

goto *mesys


*me3

mov %Set_vol,default_vol
getparam %Me_Number      ;チャンネルと曲番号と取得

mov %Me_Play_Channel,13
mov %Free1,Me_s_Ch3
mov %Free2,Me_v_Ch3

goto *mesys

*me3v

getparam %Me_Number,%Set_vol      ;チャンネルと曲番号と取得

mov %Me_Play_Channel,13
mov %Free1,Me_s_Ch3
mov %Free2,Me_v_Ch3

goto *mesys


*me4

mov %Set_vol,default_vol
getparam %Me_Number      ;チャンネルと曲番号と取得

mov %Me_Play_Channel,14
mov %Free1,Me_s_Ch4
mov %Free2,Me_v_Ch4

goto *mesys

*me4v

getparam %Me_Number,%Set_vol     ;チャンネルと曲番号と取得

mov %Me_Play_Channel,14
mov %Free1,Me_s_Ch4
mov %Free2,Me_v_Ch4

goto *mesys


*me5

mov %Set_vol,default_vol
getparam %Me_Number      ;チャンネルと曲番号と取得

mov %Me_Play_Channel,15
mov %Free1,Me_s_Ch5
mov %Free2,Me_v_Ch5

goto *mesys

*me5v

getparam %Me_Number,%Set_vol      ;チャンネルと曲番号と取得

mov %Me_Play_Channel,15
mov %Free1,Me_s_Ch5
mov %Free2,Me_v_Ch5

goto *mesys



*se1v

 mov %Se_Play_Channel,1          ;チャンネルは２固定
  dwavestop 1                    ;まだ鳴っている演奏を止める
 getparam %Se_Number,%Set_vol      ;効果音番号と音量取得
 goto *Se_Play_List




*se2v

 mov %Se_Play_Channel,2          ;チャンネルは３固定
  dwavestop 2                    ;まだ鳴っている演奏を止める
 getparam %Se_Number,%Set_vol      ;効果音番号と音量取得
 goto *Se_Play_List




*se3v

 mov %Se_Play_Channel,3          ;チャンネルは１固定
  dwavestop 3                    ;まだ鳴っている演奏を止める
 getparam %Se_Number,%Set_vol      ;効果音番号と音量取得
 goto *Se_Play_List



;*******************************************************************
;ミュージックエフェクトのデータ部分
;*******************************************************************


*meplay

mov %Set_vol,default_vol
getparam %Free1,%Me_Number      ;チャンネルと曲番号と取得

 if %Me_Number = -1 goto *mestop  ;停止命令

mov %Free2,%Free1               ;
mov %Free3,%Free1               ;
add %Free1,Me_s_Ch0             ;ロード時再生エリア番号を取得

add %Free2,Me_v_Ch0             ;ロード時再生エリア番号を取得

add %Free3,10
mov %Me_Play_Channel,%Free3

goto *mesys


*meplay2

getparam %Free1,%Me_Number,%Set_vol      ;チャンネルと曲番号と取得

 if %Me_Number = -1 goto *mestop  ;停止命令

mov %Free2,%Free1               ;
mov %Free3,%Free1               ;
add %Free1,Me_s_Ch0             ;ロード時再生エリア番号を取得

add %Free2,Me_v_Ch0             ;ロード時再生エリア番号を取得

add %Free3,10
mov %Me_Play_Channel,%Free3

goto *mesys



*mesys     ;実行部分


 if %Me_Number = -1 goto *mestop  ;停止命令

mov %%Free1,%Me_Number          ;曲取得番号をロード時再生エリアにコピー
mov %%Free2,%Set_vol            ;音量をロード時再生エリアにコピー



gosub *Me_List

goto *Me_Play_Mord

return


;この命令は、チャンネル、曲番号になります

*ME_set

  gosub *Me_List
  mov %Me_v_Ch0,%Set_vol
 goto *Me_Play_Mord




;*****************************************************************
;ミュージックエフェクトのシステム部分
;*****************************************************************

*Me_Play_Mord                         ;ミュージックエフェクトの演奏部分

  dwavestop %Me_Play_Channel

  dwaveload %Me_Play_Channel,$Me_Play
  dwaveplayloop %Me_Play_Channel
  chvol %Me_Play_Channel,%Set_vol     ;音量反映

 return


;****************************目的***********************************
;サウンドエフェクトの再生
;複数のチャンネルモードを用意
;チャンネルは１、２、３（仮）とする
;*****************************************************************

;*******************************************************************
;サウンドエフェクトのデータ部分
;*******************************************************************

*se1


 mov %Set_vol,default_vol                 ;音量はdefault_vol（７０）固定
 mov %Se_Play_Channel,1          ;チャンネルは１固定
  dwavestop 1                    ;まだ鳴っている演奏を止める
 getparam %Se_Number
 goto *Se_Play_List

*se2


 mov %Set_vol,default_vol                 ;音量はdefault_vol（７０）固定
 mov %Se_Play_Channel,2          ;チャンネルは１固定
  dwavestop 2                    ;まだ鳴っている演奏を止める
 getparam %Se_Number
 goto *Se_Play_List

*se3


 mov %Set_vol,default_vol                 ;音量はdefault_vol（７０）固定
 mov %Se_Play_Channel,3          ;チャンネルは１固定
  dwavestop 3                    ;まだ鳴っている演奏を止める
 getparam %Se_Number
 goto *Se_Play_List

*seplay

 mov %Set_vol,default_vol                 ;音量はdefault_vol（７０）固定
 getparam %Se_Play_Channel,%Se_Number      ;チャンネルと効果音番号取得
  dwavestop %Se_Play_Channel
 goto *Se_Play_List

*seplay2

 getparam %Se_Play_Channel,%Se_Number,%Set_vol      ;チャンネルと効果音番号と音量取得
  dwavestop %Se_Play_Channel
 goto *Se_Play_List





;*******************************************************************
;サウンドエフェクトの再生部分
;*******************************************************************

*Se_Play_Mord


  dwaveload %Se_Play_Channel,$Se_Play

  dwaveplay %Se_Play_Channel
  chvol %Se_Play_Channel,%Set_vol     ;音量反映

 return

;*******************************************************************
;音量制御
;*******************************************************************
*bgmvol

getparam %Set_vol      ;音量取得

  _bgmvol %Set_vol
  mov %BGM_v_Ch,%Set_vol
 

return

*mevol

getparam %Me_Play_Channel,%Set_vol      ;チャンネルと音量取得

  mov %Free1,%Me_Play_Channel
  add %Free1,Me_v_Ch0            ;ロード時再生エリア番号を取得
  mov %%Free1,%Set_vol           ;音量をロード時再生エリアにコピー

  add %Me_Play_Channel,10                  ;チャンネル値を変換
  chvol %Me_Play_Channel,%Set_vol     ;音量反映

return

;********************************************************
;音停止命令
;*********************************************************

*e_
*erase
*silent

 getparam %Free3,%Free1      ;属性とチャンネルを取得

 if %Free3 = 1 E_B

 notif %Free3 = 2 jumpf

;    if %Free1 > 6 mov %Free1,1
;    if %Free1 < 0 mov %Free1,1

    mov %Free2,%Free1
    add %Free2,Me_s_Ch0

    add %Free1,10
    dwavestop %Free1

  mov %%Free2,0                  ;使用チャンネルフラグを消す


   return

 ~
 notif %Free3 = 3 jumpf

    if %Free1 > 3 mov %Free1,1
    dwavestop %Free1

   return

 ~
 notif %Free3 = 0 jumpf 


 stop
 dwavestop 1
 dwavestop 2
 dwavestop 3
 dwavestop 10
 dwavestop 11
 dwavestop 12
 dwavestop 13
 dwavestop 14
 dwavestop 15
 loopbgmstop

  mov %BGM_s_Ch,0
  mov %Me_s_Ch0,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch1,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch2,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch3,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch4,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch5,0                  ;使用チャンネルフラグを消す

 dwavestop 90
 dwavestop 91
 dwavestop 92
 dwavestop 93
 dwavestop 94
 dwavestop 95
 dwavestop 96
 dwavestop 97
 dwavestop 98
 dwavestop 99
 dwavestop 100

  bgmvol default_vol                     ;BGM音量を戻す
  chvol 1,default_vol
  chvol 2,default_vol
  chvol 3,default_vol
  chvol 10,default_vol
  chvol 11,default_vol
  chvol 12,default_vol
  chvol 13,default_vol
  chvol 14,default_vol
  chvol 15,default_vol



~
return



;*******************************************************************
;旧命令　音の停止
;*******************************************************************

*St_BGM                          ;ＢＧＭだけ止める
*E_C
*E_B
*E_B1

  stop
  loopbgmstop
  bgmvol default_vol                    ;音量を戻す
  mov %BGM_s_Ch,0                       ;演奏番号を破棄

 return

*E_B2                         ;ミュージックエフェクトの指定チャンネルだけ止める
*E_M0

  dwavestop 10
  chvol 10,default_vol

 return

*E_B3                        ;ミュージックエフェクトの指定チャンネルだけ止める
*E_M1

  dwavestop 11
  mov %Me_s_Ch1,0                  ;使用チャンネルフラグを消す
  chvol 11,default_vol

 return

*E_B4                        ;ミュージックエフェクトの指定チャンネルだけ止める
*E_M2

  dwavestop 12
  mov %Me_s_Ch2,0                  ;使用チャンネルフラグを消す
  chvol 12,default_vol

 return

*E_B5                        ;ミュージックエフェクトの指定チャンネルだけ止める
*E_M3

  dwavestop 13
  mov %Me_s_Ch3,0                  ;使用チャンネルフラグを消す
  chvol 13,default_vol

 return

*E_B6                        ;ミュージックエフェクトの指定チャンネルだけ止める
*E_M4

  dwavestop 14
  mov %Me_s_Ch4,0                  ;使用チャンネルフラグを消す
  chvol 14,default_vol
 return

*E_M5

  dwavestop 15
  mov %Me_s_Ch5,0                  ;使用チャンネルフラグを消す
  chvol 15,default_vol
 return

*E_S1

  chvol 1,default_vol
  dwavestop 1

 return

*E_S2

  chvol 2,default_vol
  dwavestop 2

 return

*E_S3

  chvol 3,default_vol
  dwavestop 3

 return

;**************************複合**********************************

*St_all                     ;完全停止
*St_a
*E_A



 stop
 dwavestop 1
 dwavestop 2
 dwavestop 3
 dwavestop 10
 dwavestop 11
 dwavestop 12
 dwavestop 13
 dwavestop 14
 dwavestop 15

 dwavestop 90
 dwavestop 91
 dwavestop 92
 dwavestop 93
 dwavestop 94
 dwavestop 95
 dwavestop 96
 dwavestop 97
 dwavestop 98
 dwavestop 99
 dwavestop 100

 loopbgmstop

  mov %BGM_s_Ch,0
  mov %Me_s_Ch0,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch1,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch2,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch3,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch4,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch5,0                  ;使用チャンネルフラグを消す

  bgmvol default_vol                     ;BGM音量を戻す
  chvol 1,default_vol
  chvol 2,default_vol
  chvol 3,default_vol
  chvol 10,default_vol
  chvol 11,default_vol
  chvol 12,default_vol
  chvol 13,default_vol
  chvol 14,default_vol
  chvol 15,default_vol




return

*St_All2               ;ロード時の消音専用

*E_A2


 loopbgmstop
 stop
 dwavestop 1
 dwavestop 2
 dwavestop 3
 dwavestop 10
 dwavestop 11
 dwavestop 12
 dwavestop 13
 dwavestop 14
 dwavestop 15



return


*E_Me_all                  ;ミュージックエフェクトだけ完全停止
*E_Me_a
*E_MA
*E_L

 dwavestop 10
 dwavestop 11
 dwavestop 12
 dwavestop 13
 dwavestop 14
 dwavestop 15
 dwavestop 16

  chvol 10,default_vol
  chvol 11,default_vol
  chvol 12,default_vol
  chvol 13,default_vol
  chvol 14,default_vol
  chvol 15,default_vol
  chvol 16,default_vol

  mov %Me_s_Ch0,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch1,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch2,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch3,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch4,0                  ;使用チャンネルフラグを消す
  mov %Me_s_Ch5,0                  ;使用チャンネルフラグを消す

return

*St_Se_all                  ;サウンドエフェクトだけ完全停止
*St_Se_a
*E_SE

 dwavestop 1
 dwavestop 2
 dwavestop 3

  chvol 1,100
  chvol 2,100
  chvol 3,100

return



*mestop


mov %Free2,%Free1               ;
add %Free2,Me_s_Ch0             ;ロード時再生エリア番号を取得
mov %%Free2,0

add %Free1,10
mov %Me_Play_Channel,%Free1

 dwavestop %Me_Play_Channel

return



;***************************************************************************
;ロード時のＭｅの再生、及びDllエフェクト再生
;製作　　：2006/09/7（八咫桜）
;修正　　：2006/012/6（八咫桜）
;***************************************************************************




*Coll_system

gosub *St_All2
 mov %Set_vol,%BGM_v_Ch : gosub *BGM_List

 notif %Me_s_Ch0 = 0  mov %Set_vol,%Me_v_Ch0 : mov %Me_Play_Channel,10 : mov %Me_Number,%Me_s_Ch0 : gosub *Coll_ME        ;主音が使用されているかのチェック

 notif %Me_s_Ch1 = 0  mov %Set_vol,%Me_v_Ch1 : mov %Me_Play_Channel,11 : mov %Me_Number,%Me_s_Ch1 : gosub *Coll_ME        ;主音が使用されているかのチェック

 notif %Me_s_Ch2 = 0  mov %Set_vol,%Me_v_Ch2 : mov %Me_Play_Channel,12 : mov %Me_Number,%Me_s_Ch2 : gosub *Coll_ME        ;主音が使用されているかのチェック

 notif %Me_s_Ch3 = 0  mov %Set_vol,%Me_v_Ch3 : mov %Me_Play_Channel,13 : mov %Me_Number,%Me_s_Ch3 : gosub *Coll_ME        ;主音が使用されているかのチェック

 notif %Me_s_Ch4 = 0  mov %Set_vol,%Me_v_Ch4 : mov %Me_Play_Channel,14 : mov %Me_Number,%Me_s_Ch4 : gosub *Coll_ME        ;主音が使用されているかのチェック

 notif %Me_s_Ch5 = 0  mov %Set_vol,%Me_v_Ch5 : mov %Me_Play_Channel,15 : mov %Me_Number,%Me_s_Ch5 : gosub *Coll_ME        ;主音が使用されているかのチェック

;layermessage 10,"program_end/10"
;csp 10
;layermessage 10,"clear/10"

 if %efespflg = 0 jumpf

lsp efesp,"*0"
layermessage 0,"i|bmp\efe\rain1.bmp,bmp\efe\rain2.bmp,bmp\efe\rain3.bmp"   ;画像登録


 if %efespflg2 = 1 layermessage 0,"s|1,30,-9,0,0" : layermessage 0,"f" :vsp efesp,1 
 if %efespflg2 = 2 layermessage 0,"s|1,30,-9,0,0"

;delay 800

~ 

textshow
print 1
texton
return

*Coll_ME

  gosub *Me_List
  dwaveload %Me_Play_Channel,$Me_Play
  dwaveplayloop %Me_Play_Channel
   chvol %Me_Play_Channel,%Set_vol     ;音量反映


return



;****************************************************
;Dllエフェクトの使用命令、停止命令
;製作　　：2006/09/7（八咫桜）
;修正　　：2006/012/6（八咫桜）
;****************************************************

*dllefe

 getparam %efespflg,%efespflg2      ;降らせる物体とエフェクト表示法を取得

lsp efesp,"*0"

 if %efespflg = 1 layermessage 0,"i|bmp\efe\rain1.bmp,bmp\efe\rain2.bmp,bmp\efe\rain3.bmp"	 ;画像登録
 if %efespflg = 2 layermessage 0,"i|bmp\efe\l_snow1.bmp,bmp\efe\l_snow2.bmp,bmp\efe\l_snow3.bmp"	 ;画像登録
 if %efespflg = 3 layermessage 0,"i|bmp\efe\l_snow1a.bmp,bmp\efe\l_snow2a.bmp,bmp\efe\l_snow3a.bmp"	 ;画像登録

 if %efespflg2 = 1 layermessage 0,"s|1,30,-9,0,0" : layermessage 0,"f" :vsp efesp,1 
 if %efespflg2 = 2 layermessage 0,"s|1,30,-9,0,0"

 if %efespflg2 = 3 layermessage 0,"s|10,5,15,10,2"

 if %efespflg2 = 4 layermessage 0,"s|10,5,15,10,2" : layermessage 0,"f" :vsp efesp,1 

 if %efespflg = 5 layermessage 0,"i|bmp\efe\l_snow1b.bmp,bmp\efe\l_snow2b.bmp,bmp\efe\l_snow3b.bmp"	 ;画像登録
 if %efespflg2 = 5 layermessage 0,"s|20,5,0,120,5" : layermessage 0,"f" :vsp efesp,1 

 if %efespflg = 6 layermessage 0,"i|bmp\efe\l_snow1c.bmp,bmp\efe\l_snow2c.bmp,bmp\efe\l_snow3c.bmp"	 ;画像登録

delay 800
;print 10,500

return

*dllefe_off

mov %efespflg,off
layermessage 0,"x"
csp efesp
;print 1

return



;＞＜＞＜＞＜＞＜＞＜＞＜＞＜＞＜＞＜＞＜＞＜＞＜＞＜＞

*Fede

;パラメーター取得
;属性、タイマー（全体時間100ミリ秒ごとで指定）

getparam %Free1,%Free9

 if %Free1 = 0 goto *Fede_0 ;全てフェードアウト
 if %Free1 = 1 goto *Fede_10 ;ＢＧＭのみフェードアウト
 if %Free1 = 10 goto *Fede_1 ;Ｍｅ全てフェードアウト
 if %Free1 = 11 goto *Fede_11 ;Ｍｅ１のみフェードアウト
 if %Free1 = 12 goto *Fede_11 ;Ｍｅ２のみフェードアウト
 if %Free1 = 13 goto *Fede_11 ;Ｍｅ３のみフェードアウト
 if %Free1 = 14 goto *Fede_11 ;Ｍｅ４のみフェードアウト
 if %Free1 = 15 goto *Fede_11 ;Ｍｅ５のみフェードアウト



;対象チャンネルのｖｏｌ量計算

*Fede_0  ;全てフェードアウト
;変化回数を１０回に固定する、変化秒は%Fede_wait/10で計算
;ウェイトタイマーは%bm_ptの変数に代入する。
mov %bm_pt,%Free9/10

mov %Free3,BGM_v_Ch
for %Free1 = Free11 to Free17  ;各チャンネルの減少値計算を準備
	mov %%Free1,%%Free3
	inc %Free3
next

;之により、Free11〜Free17までがｖｏｌ減少値10ミリ単位と成る

mov %Free21,%BGM_v_Ch*10
mov %Free22,%Me_v_Ch0*10
mov %Free23,%Me_v_Ch1*10
mov %Free24,%Me_v_Ch2*10
mov %Free25,%Me_v_Ch3*10
mov %Free26,%Me_v_Ch4*10
mov %Free27,%Me_v_Ch5*10

;フェードアウト開始
for %Free1 = 1 to 10
	resettimer      ;内部タイマーをリセット
	
	;減少計算
	 sub %Free21,%Free11
	 sub %Free22,%Free12
	 sub %Free23,%Free13
	 sub %Free24,%Free14
	 sub %Free25,%Free15
	 sub %Free26,%Free16
	 sub %Free27,%Free17

	 mov %BGM_v_Ch,%Free21/10
	 mov %Me_v_Ch0,%Free22/10
	 mov %Me_v_Ch1,%Free23/10
	 mov %Me_v_Ch2,%Free24/10
	 mov %Me_v_Ch3,%Free25/10
	 mov %Me_v_Ch4,%Free26/10
	 mov %Me_v_Ch5,%Free27/10

	_bgmvol %BGM_v_Ch
	chvol 10,%Me_v_Ch0     ;音量反映
	chvol 11,%Me_v_Ch1     ;音量反映
	chvol 12,%Me_v_Ch2     ;音量反映
	chvol 13,%Me_v_Ch3     ;音量反映
	chvol 14,%Me_v_Ch4     ;音量反映
	chvol 15,%Me_v_Ch5     ;音量反映

	waittimer %bm_pt   ;内部タイマーウェイト
next

;ボリューム数値をロード用の値に収納　及び、音完全消去
wait 500
E_A
return


*Fede_1
;変化回数を１０回に固定する、変化秒は%Fede_wait/10で計算
;ウェイトタイマーは%bm_ptの変数に代入する。
mov %bm_pt,%Free9/10

 mov %Free3,Me_v_Ch0
for %Free1 = Free12 to Free17  ;各チャンネルの減少値計算を準備
	mov %%Free1,%%Free3
	inc %Free3
next

;之により、Free11〜Free17までがｖｏｌ減少値10ミリ単位と成る

mov %Free22,%Me_v_Ch0*10
mov %Free23,%Me_v_Ch1*10
mov %Free24,%Me_v_Ch2*10
mov %Free25,%Me_v_Ch3*10
mov %Free26,%Me_v_Ch4*10
mov %Free27,%Me_v_Ch5*10

;フェードアウト開始
for %Free1 = 1 to 10

	resettimer      ;内部タイマーをリセット
	
	;減少計算
	sub %Free22,%Free12
	sub %Free23,%Free13
	sub %Free24,%Free14
	sub %Free25,%Free15
	sub %Free26,%Free16
	sub %Free27,%Free17

 	mov %Me_v_Ch0,%Free22/10
 	mov %Me_v_Ch1,%Free23/10
 	mov %Me_v_Ch2,%Free24/10
 	mov %Me_v_Ch3,%Free25/10
 	mov %Me_v_Ch4,%Free26/10
 	mov %Me_v_Ch5,%Free27/10

	   chvol 10,%Me_v_Ch0     ;音量反映
	   chvol 11,%Me_v_Ch1     ;音量反映
	   chvol 12,%Me_v_Ch2     ;音量反映
	   chvol 13,%Me_v_Ch3     ;音量反映
	   chvol 14,%Me_v_Ch4     ;音量反映
	   chvol 15,%Me_v_Ch5     ;音量反映
	waittimer %bm_pt   ;内部タイマーウェイト
next

;ボリューム数値をロード用の値に収納　及び、音完全消去
wait 500
E_MA
return


*Fede_10  ;BGMフェードアウト
;変化回数を１０回に固定する、変化秒は%Fede_wait/10で計算
;ウェイトタイマーは%bm_ptの変数に代入する。
mov %bm_pt,%Free9/10

 mov %Free11,%BGM_v_Ch

;之により、Free11〜Free17までがｖｏｌ減少値10ミリ単位と成る
mov %Free21,%BGM_v_Ch*10

;フェードアウト開始
for %Free1 = 1 to 10
	resettimer      ;内部タイマーをリセット
	
	;減少計算
	sub %Free21,%Free11
	mov %BGM_v_Ch,%Free21/10
	_bgmvol %BGM_v_Ch
	waittimer %bm_pt   ;内部タイマーウェイト
next

;ボリューム数値をロード用の値に収納　及び、音完全消去
wait 500
E_B
return


*Fede_11
;変化回数を１０回に固定する、変化秒は%Fede_wait/10で計算
;ウェイトタイマーは%bm_ptの変数に代入する。
mov %bm_pt,%Free9/10

mov %Free3,%Free1 + Me_v_Ch0 - 10
mov %Free12,%%Free3

;之により、Free11〜Free17までがｖｏｌ減少値10ミリ単位と成る
mov %Free22,%%Free3*10

;フェードアウト開始
for %Free19 = 1 to 10

	resettimer      ;内部タイマーをリセット

	;減少計算
	sub %Free22,%Free12
	mov %%Free3,%Free22/10
	chvol %Free1,%%Free3     ;音量反映
	waittimer %bm_pt   ;内部タイマーウェイト
next

;ボリューム数値をロード用の値に収納　及び、音完全消去

wait 500
sub %Free1,10
e_ 2,%Free1
return


*cross1
;ウェイト、Ｍｅ１〜５
 getparam %Free9,%Free1,%Free2,%Free3,%Free4,%Free5

;差分より、増減値を求める（プラスなら音量アップ、マイナスなら音量ダウン）
 sub %Free1,%Me_v_Ch1 : div %Free1,10
 sub %Free2,%Me_v_Ch2 : div %Free2,10
 sub %Free3,%Me_v_Ch3 : div %Free3,10
 sub %Free4,%Me_v_Ch4 : div %Free4,10
 sub %Free5,%Me_v_Ch5 : div %Free5,10

;ウェイトの計算準備
mov %crosstimer,%Free9/10

for %Free8 = 1 to 10    ;音量変更開始
     resettimer      ;内部タイマーをリセット
     ;ＢＧＭの音量減少
     sub %BGM_v_Ch,%BGM_v_Ch/10

     ;Ｍｅの増加計算
	mov %Free11,Free1
     for %Free16 = Me_v_Ch1 to Me_v_Ch5
	notif %Free11 = 0 add %%Free16,%%Free11
        inc %Free11
     next

     _bgmvol %BGM_v_Ch
     chvol 11,%Me_v_ch1     ;音量反映
     chvol 12,%Me_v_ch2     ;音量反映
     chvol 13,%Me_v_ch3     ;音量反映
     chvol 14,%Me_v_ch4     ;音量反映
     chvol 15,%Me_v_ch5     ;音量反映
     waittimer %crosstimer   ;内部タイマーウェイト
  next
  E_B

	for %Free1 = Me_v_ch1 to Me_v_ch5
   		if %%Free1 < 1 e_ 2,%Free1
	next
return


*cross2
;ウェイト、ＢＧＭ
 getparam %Free9,%Free1

;BGMの一回あたりの増減値を算出（処理回数は１０回で固定）
sub %Free1,%BGM_v_Ch : div %Free1,10

;ウェイトタイマーの算出
mov %crosstimer,%Free9/10

for %Free16 = 1 to 10
      resettimer      ;内部タイマーをリセット

     ;ＢＧＭ増減の計算
     add %BGM_v_Ch,%Free1

     ;Ｍｅの減少
	for %Free11 = Me_v_Ch1 to Me_v_Ch5
		notif %%Free11 = 0 sub %%Free11,%%Free11/10
	next

     _bgmvol %BGM_v_Ch
     chvol 11,%Me_v_ch1     ;音量反映
     chvol 12,%Me_v_ch2     ;音量反映
     chvol 13,%Me_v_ch3     ;音量反映
     chvol 14,%Me_v_ch4     ;音量反映
     chvol 15,%Me_v_ch5     ;音量反映

    waittimer %crosstimer   ;内部タイマーウェイト
next

E_MA
if %BGM_v_Ch = 0 E_B
return


;命令文　（ｂｇｍ）（Ｍｅ１）（Ｍｅ２）（Ｍｅ３）（Ｍｅ４）（Ｍｅ５）（ウェイト）
*fedeXX

getparam %Fede_bgmv,%Fede_Me1v,%Fede_Me2v,%Fede_Me3v,%Fede_Me4v,%Fede_Me5v,%Fede_wait

;変動なしチェック
if %Fede_bgmv > 0 mov %Fede_bgmvflg,1
if %Fede_Me1v > 0 mov %Fede_Me1vflg,1
if %Fede_Me2v > 0 mov %Fede_Me2vflg,1
if %Fede_Me3v > 0 mov %Fede_Me3vflg,1
if %Fede_Me4v > 0 mov %Fede_Me4vflg,1
if %Fede_Me5v > 0 mov %Fede_Me5vflg,1

if %Fede_bgmv < 100 mov %Fede_bgmvflg,1
if %Fede_Me1v < 100 mov %Fede_Me1vflg,1
if %Fede_Me2v < 100 mov %Fede_Me2vflg,1
if %Fede_Me3v < 100 mov %Fede_Me3vflg,1
if %Fede_Me4v < 100 mov %Fede_Me4vflg,1
if %Fede_Me5v < 100 mov %Fede_Me5vflg,1

if %Fede_bgmv = %BGM_v_Ch mov %Fede_bgmvflg,0
if %Fede_Me1v = %Me_v_Ch1 mov %Fede_Me1vflg,0
if %Fede_Me2v = %Me_v_Ch2 mov %Fede_Me2vflg,0
if %Fede_Me3v = %Me_v_Ch3 mov %Fede_Me3vflg,0
if %Fede_Me4v = %Me_v_Ch4 mov %Fede_Me4vflg,0
if %Fede_Me5v = %Me_v_Ch5 mov %Fede_Me5vflg,0

;変動音量値算出

mov %Free5,Fede_bgmvflg2 ;音量変動方向フラグ　ｏｎ＝ダウン　ｏｆｆ＝アップ
mov %Free4,Fede_bgmv2    ;音量変動値
mov %Free2,Fede_bgmv     ;音量指定値
mov %Free3,bgm_v_ch      ;音量現在値

 for %Free1 = Fede_bgmvflg to Fede_Me5vflg

      ;変動なしフラグオンの時は飛ばす
  if %%Free1 = 0 jumpf



   if %%Free2 < %%Free3  mov %%Free4,%%Free3 : sub %%Free4,%%Free2 : mov %%Free5,on
   if %%Free2 > %%Free3  mov %%Free4,%%Free2 : sub %%Free4,%%Free3 : mov %%Free5,off

 ~

inc %Free2
inc %Free3
inc %Free4
inc %Free5
  if %Free3 = Me_v_Ch0 inc %Free3

next

;１０ミリ単位の計算準備

mov %Free3,Fede_bgmv4    ;１０ミリ用変動値
mov %Free6,Fede_bgmv2    ;変動幅

mov %Fede_bgmv3,%bgm_v_ch     ;１０ミリ用現在値
mov %Fede_Me1v3,%Me_v_ch1
mov %Fede_Me2v3,%Me_v_ch2
mov %Fede_Me3v3,%Me_v_ch3
mov %Fede_Me4v3,%Me_v_ch4
mov %Fede_Me5v3,%Me_v_ch5

mul %Fede_bgmv3,100 
mul %Fede_Me1v3,100
mul %Fede_Me2v3,100
mul %Fede_Me3v3,100
mul %Fede_Me4v3,100
mul %Fede_Me5v3,100


;†改造部分
;div %Fede_wait,100    ;１００ミリセコンド用ウェイト回数
;変化回数を１０回に固定する、変化秒は%Fede_wait/10で計算
;ウェイトタイマーは%bm_ptの変数に代入する。
mov %bm_pt,%Fede_wait/10

 for %Free1 = Fede_bgmvflg to Fede_Me5vflg

      ;変動なしフラグオンの時は飛ばす
  if %%Free1 = 0 jumpf

    mov %%Free3,%%Free6
    mul %%Free3,100
    div %%Free3,10

  ~

 inc %Free3
 inc %Free4
 inc %Free6

next

;音量変動実行式

for %Free9 = 1 to 10

resettimer      ;内部タイマーをリセット

mov %Free2,Fede_bgmv3   ;１０ミリ用現在値
mov %Free3,Fede_bgmv4   ;１０ミリ用変動値
mov %Free5,Fede_bgmvflg2
mov %Free6,Free11    ;演奏用音量値


;変動計算
  ;変動なしフラグオン時は飛ばす
  for %Free1 = Fede_bgmvflg to Fede_Me5vflg

   if %%Free1 = 0 jumpf

     if %%Free5 = on  sub %%Free2,%%Free3
     if %%Free5 = off add %%Free2,%%Free3

     mov %%Free6,%%Free2

     div %%Free6,100

   ~

  inc %Free2
  inc %Free3
  inc %Free5
  inc %Free6

  next

;変動実行部分

  if %Fede_bgmvflg = 1  _bgmvol %Free11
  if %Fede_Me1vflg = 1 chvol 11,%Free12     ;音量反映
  if %Fede_Me2vflg = 1 chvol 12,%Free13      ;音量反映
  if %Fede_Me3vflg = 1 chvol 13,%Free14      ;音量反映
  if %Fede_Me4vflg = 1 chvol 14,%Free15      ;音量反映
  if %Fede_Me5vflg = 1 chvol 15,%Free16      ;音量反映

waittimer %bm_pt   ;内部タイマーウェイト

next

;ボリューム数値をロード用の値に収納

  if %Fede_bgmvflg = 1 _bgmvol %Fede_bgmv : mov %bgm_v_ch,%Fede_bgmv
  if %Fede_Me1vflg = 1 chvol 11,%Fede_Me1v : mov %Me_v_Ch1,%Fede_Me1v     ;音量反映
  if %Fede_Me2vflg = 1 chvol 12,%Fede_Me2v : mov %Me_v_Ch2,%Fede_Me2v      ;音量反映
  if %Fede_Me3vflg = 1 chvol 13,%Fede_Me3v : mov %Me_v_Ch3,%Fede_Me3v      ;音量反映
  if %Fede_Me4vflg = 1 chvol 14,%Fede_Me4v : mov %Me_v_Ch4,%Fede_Me4v      ;音量反映
  if %Fede_Me5vflg = 1 chvol 15,%Fede_Me5v : mov %Me_v_Ch5,%Fede_Me5v      ;音量反映

 for %Free1 = Fede_bgmv to Fede_Me5v4

  mov %%Free1,0

 next

return


*flg_set
 getparam %Free1,%Free2,%Free3

;%Free1 = フラグタイトルの選択
;%Free2 = フラグタイトルの主な表示位置（右上とか、左下とか）
;%Free3 = フラグの変数の直接値

;フラグのタイトル決め

 if %Free1 = 1 mov $flg_passT,"bmp\efe\number\flg_titel1.bmp" : jumpf   ;負けフラグ
 if %Free1 = 2 mov $flg_passT,"bmp\efe\number\flg_titel1.bmp" : jumpf   ;死亡フラグ
 if %Free1 = 3 mov $flg_passT,"bmp\efe\number\flg_titel1.bmp" : jumpf   ;フラグ

;指定値が規定外だったとき

 mov $flg_passT,"bmp\efe\number\flg_titel1.bmp"

~

;スプライトの位置決め

 if %Free2 = 1 mov %flg_sp_x,510 : mov %flg_sp_y,0 : mov %flg_number_tx,530 : mov %flg_number_ty,0 : mov %flg_number_ox,575 : mov %flg_number_oy,0 : jumpf  ;右上
 if %Free2 = 2 mov %flg_sp_x,510 : mov %flg_sp_y,360 : mov %flg_number_tx,530 : mov %flg_number_ty,420 : mov %flg_number_ox,575 : mov %flg_number_oy,420 : jumpf  ;右下
 if %Free2 = 3 mov %flg_sp_x,0 : mov %flg_sp_y,0 : mov %flg_number_tx,0 : mov %flg_number_ty,0 : mov %flg_number_ox,45 : mov %flg_number_oy,0 : jumpf  ;左上
 if %Free2 = 4 mov %flg_sp_x,0 : mov %flg_sp_y,360 : mov %flg_number_tx,0 : mov %flg_number_ty,420 : mov %flg_number_ox,45 : mov %flg_number_oy,420 : jumpf  ;左下

;指定値が規定外だったとき
 mov %flg_sp_x,0
 mov %flg_sp_y,360
 mov flg_number_tx,0
 mov flg_number_ty,420
 mov flg_number_ox,65
 mov flg_number_oy,420

~

;十の桁算出

mov %flg_number_t,%Free3
div %flg_number_t,10

 if %flg_number_t = 0 mov $flg_pass10,"bmp\efe\number\0.bmp" : jumpf
 if %flg_number_t = 1 mov $flg_pass10,"bmp\efe\number\1.bmp" : jumpf
 if %flg_number_t = 2 mov $flg_pass10,"bmp\efe\number\2.bmp" : jumpf
 if %flg_number_t = 3 mov $flg_pass10,"bmp\efe\number\3.bmp" : jumpf
 if %flg_number_t = 4 mov $flg_pass10,"bmp\efe\number\4.bmp" : jumpf
 if %flg_number_t = 5 mov $flg_pass10,"bmp\efe\number\5.bmp" : jumpf
 if %flg_number_t = 6 mov $flg_pass10,"bmp\efe\number\6.bmp" : jumpf
 if %flg_number_t = 7 mov $flg_pass10,"bmp\efe\number\7.bmp" : jumpf
 if %flg_number_t = 8 mov $flg_pass10,"bmp\efe\number\8.bmp" : jumpf
 if %flg_number_t = 9 mov $flg_pass10,"bmp\efe\number\9.bmp" : jumpf

mov $flg_pass10,""

~

;一の桁算出

mov %flg_number_o,%Free3
mod %flg_number_o,10

 if %flg_number_o = 0 mov $flg_pass1,"bmp\efe\number\0.bmp" : jumpf
 if %flg_number_o = 1 mov $flg_pass1,"bmp\efe\number\1.bmp" : jumpf
 if %flg_number_o = 2 mov $flg_pass1,"bmp\efe\number\2.bmp" : jumpf
 if %flg_number_o = 3 mov $flg_pass1,"bmp\efe\number\3.bmp" : jumpf
 if %flg_number_o = 4 mov $flg_pass1,"bmp\efe\number\4.bmp" : jumpf
 if %flg_number_o = 5 mov $flg_pass1,"bmp\efe\number\5.bmp" : jumpf
 if %flg_number_o = 6 mov $flg_pass1,"bmp\efe\number\6.bmp" : jumpf
 if %flg_number_o = 7 mov $flg_pass1,"bmp\efe\number\7.bmp" : jumpf
 if %flg_number_o = 8 mov $flg_pass1,"bmp\efe\number\8.bmp" : jumpf
 if %flg_number_o = 9 mov $flg_pass1,"bmp\efe\number\9.bmp" : jumpf

mov $flg_pass1,"bmp\efe\"

~

;タイトルをセット
;lsph flg_sp1,$flg_passT,%flg_sp_x,%flg_sp_y
lsph flg_sp2,$flg_pass10,%flg_number_tx,%flg_number_ty
lsph flg_sp3,$flg_pass1,%flg_number_ox,%flg_number_oy

return


*flg_p

 inc %flg_number_o

 if %flg_number_o = 1 mov $flg_pass1,"bmp\efe\number\1.bmp" : jumpf
 if %flg_number_o = 2 mov $flg_pass1,"bmp\efe\number\2.bmp" : jumpf
 if %flg_number_o = 3 mov $flg_pass1,"bmp\efe\number\3.bmp" : jumpf
 if %flg_number_o = 4 mov $flg_pass1,"bmp\efe\number\4.bmp" : jumpf
 if %flg_number_o = 5 mov $flg_pass1,"bmp\efe\number\5.bmp" : jumpf
 if %flg_number_o = 6 mov $flg_pass1,"bmp\efe\number\6.bmp" : jumpf
 if %flg_number_o = 7 mov $flg_pass1,"bmp\efe\number\7.bmp" : jumpf
 if %flg_number_o = 8 mov $flg_pass1,"bmp\efe\number\8.bmp" : jumpf
 if %flg_number_o = 9 mov $flg_pass1,"bmp\efe\number\9.bmp" : jumpf

;繰り上がり
 mov $flg_pass1,"bmp\efe\number\0.bmp"
 mov %flg_number_o,0
 inc %flg_number_t

 if %flg_number_t = 1 mov $flg_pass10,"bmp\efe\number\1.bmp"
 if %flg_number_t = 2 mov $flg_pass10,"bmp\efe\number\2.bmp"
 if %flg_number_t = 3 mov $flg_pass10,"bmp\efe\number\3.bmp"
 if %flg_number_t = 4 mov $flg_pass10,"bmp\efe\number\4.bmp"
 if %flg_number_t = 5 mov $flg_pass10,"bmp\efe\number\5.bmp"
 if %flg_number_t = 6 mov $flg_pass10,"bmp\efe\number\6.bmp"
 if %flg_number_t = 7 mov $flg_pass10,"bmp\efe\number\7.bmp"
 if %flg_number_t = 8 mov $flg_pass10,"bmp\efe\number\8.bmp"
 if %flg_number_t = 9 mov $flg_pass10,"bmp\efe\number\9.bmp"
 if %flg_number_t = 10 mov $flg_pass10,"bmp\efe\number\0.bmp" : mov %flg_number_t,0

lsp flg_sp2,$flg_pass10,%flg_number_tx,%flg_number_ty

~
erasetextwindow 0

;vsp flg_sp1,1
notif %flg_number_t = 0 vsp flg_sp2,1 :jumpf

csp flg_sp2

~
lsp flg_sp3,$flg_pass1,%flg_number_ox,%flg_number_oy

se1 70

;効果音

print 1
erasetextwindow 1

return




*mld2
	getparam %meta_tmp1,%ld_pass_number,%meta_tmp3,%Free1  ;立ち絵位置（l左　C中央　ｒ右）、立ち絵、表示方法、透過率

	gosub *ld_data

	;透過率が０以下の時は、０にする
	if %Free1 < 0 mov %Free1,0
	;透過率が２５５以上のときは、２５５にする
	if %Free1 > 255 mov %Free1,255

	;左の画像が前に来るようにする。レイヤー293左　294真ん中　295が右
	if %meta_tmp1 = l mov %meta_tmp4,msp_l lsp msp_l,$ld_pass,0,0,%Free1
	if %meta_tmp1 = c mov %meta_tmp4,msp_c lsp msp_c,$ld_pass,0,0,%Free1
	if %meta_tmp1 = r mov %meta_tmp4,msp_r lsp msp_r,$ld_pass,0,0,%Free1

	;スプライトの画像情報を取得（%meta_tmp5に画像の幅が代入される）
	getspsize %meta_tmp4,%meta_tmp5,%meta_tmp6,%meta_tmp7
	;画像の幅/4　で画像中心からの幅が求められるので（立ち位置のX座標からその幅を引く）
	div %meta_tmp5,2
	if %meta_tmp1 = l mov %x,160
	if %meta_tmp1 = c mov %x,320
	if %meta_tmp1 = r mov %x,480

	sub %x,%meta_tmp5
	amsp %meta_tmp4,%x,0
	print %meta_tmp3
return

*mldg
	getparam %meta_tmp1,%ld_pass_number,%meta_tmp3  ;立ち絵位置（l左　C中央　ｒ右）、立ち絵、表示方法

	gosub *ld_data

	;左の画像が前に来るようにする。レイヤー293左　294真ん中　295が右
	if %meta_tmp1 = l mov %meta_tmp4,msp_l lsp msp_l,$ld_pass,0,0,155
	if %meta_tmp1 = c mov %meta_tmp4,msp_c lsp msp_c,$ld_pass,0,0,155
	if %meta_tmp1 = r mov %meta_tmp4,msp_r lsp msp_r,$ld_pass,0,0,155

	;スプライトの画像情報を取得（%meta_tmp5に画像の幅が代入される）
	getspsize %meta_tmp4,%meta_tmp5,%meta_tmp6,%meta_tmp7
	;画像の幅/4　で画像中心からの幅が求められるので（立ち位置のX座標からその幅を引く）
	div %meta_tmp5,2
	if %meta_tmp1 = l mov %x,160
	if %meta_tmp1 = c mov %x,320
	if %meta_tmp1 = r mov %x,480

	sub %x,%meta_tmp5
	amsp %meta_tmp4,%x,0
	print %meta_tmp3
return

















*BGM_List                      ;ミュージックデータパス一覧

  if %BGM_s_Ch = 0    return                          ;無音のときは処理を抜ける
  if %BGM_s_Ch = 1    mov $BGM_Play,"bgm\bgm_da_12.ogg";春風ほのぼの
  if %BGM_s_Ch = 2    mov $BGM_Play,"bgm\bgm_mo_02.ogg";モリガンさん日常曲
  if %BGM_s_Ch = 3    mov $BGM_Play,"bgm\bgm_mo_03.ogg";モリガンさん好調曲
  if %BGM_s_Ch = 4    mov $BGM_Play,"bgm\bgm_da_16.ogg";陽炎（独白）
  if %BGM_s_Ch = 5    mov $BGM_Play,"bgm\bgm_mo_01.ogg";モリガンさんメイン曲な感じ
  if %BGM_s_Ch = 6    mov $BGM_Play,"bgm\bgm_ph_03.ogg";preさん暗く運命的
  if %BGM_s_Ch = 7    mov $BGM_Play,"bgm\bgm_lg_02.ogg";ラックさん便利緊迫曲！
  if %BGM_s_Ch = 8    mov $BGM_Play,"bgm\bgm_lg_01.ogg";ラックさん便利気だるい日常曲
  if %BGM_s_Ch = 9    mov $BGM_Play,"bgm\bgm_ph_04.ogg";preさん不気味迷妄曲
  if %BGM_s_Ch = 10   mov $BGM_Play,"bgm\bgm_mo_06.ogg";モリガンさん不気味曲
  if %BGM_s_Ch = 11   mov $BGM_Play,"bgm\bgm_lg_03.ogg";シミファ怖いよ
  if %BGM_s_Ch = 12   mov $BGM_Play,"bgm\bgm_da_08.ogg";学校案内人
  if %BGM_s_Ch = 13   mov $BGM_Play,"bgm\bgm_da_14.ogg";丑三つ時、怖い曲
  if %BGM_s_Ch = 14   mov $BGM_Play,"bgm\bgm_da_15.ogg";例えば、こんな怪談。木琴っぽい不思議曲
  if %BGM_s_Ch = 15   mov $BGM_Play,"bgm\bgm_da_21.ogg";棘
  if %BGM_s_Ch = 16   mov $BGM_Play,"bgm\bgm_mz_01.ogg";Zakkyさん霧花
  if %BGM_s_Ch = 17   mov $BGM_Play,"bgm\bgm_da_20.ogg";daiさん泣き曲いい曲
  if %BGM_s_Ch = 18   mov $BGM_Play,"bgm\bgm_sb_01.ogg";ゆうねさん丑の刻参り
  if %BGM_s_Ch = 19   mov $BGM_Play,"bgm\bgm_da_24.ogg";さくのしん
  if %BGM_s_Ch = 20   mov $BGM_Play,"bgm\bgm_da_03.ogg";daiさん自白曲？
  if %BGM_s_Ch = 21   mov $BGM_Play,"bgm\bgm_mo_04.ogg";モリガンさんカッコイイ戦闘曲
  if %BGM_s_Ch = 22   mov $BGM_Play,"bgm\bgm_ph_02.ogg";preさん悲しい曲

  if %BGM_s_Ch = 23   mov $BGM_Play,"bgm\bgm_mz_2_01.ogg";Zakkyさん常夜の晩餐会
  if %BGM_s_Ch = 24   mov $BGM_Play,"bgm\bgm_da_2_01.ogg";daiさん悲しめだけれど決意曲
  if %BGM_s_Ch = 25   mov $BGM_Play,"bgm\bgm_mg_2_01.ogg";モリガンさん悲しい壮大曲
  if %BGM_s_Ch = 26   mov $BGM_Play,"bgm\bgm_mz_2_02.ogg";Zakkyさん断罪回廊
  if %BGM_s_Ch = 27   mov $BGM_Play,"bgm\bgm_mz_2_03.ogg";Zakkyさんオルゴール調
  if %BGM_s_Ch = 28   mov $BGM_Play,"bgm\bgm_mz_2_04.ogg";Zakkyさんモノクロームアレンジ
  if %BGM_s_Ch = 29   mov $BGM_Play,"bgm\bgm_mz_2_05.ogg";Zakkyさん花散る夜空
  if %BGM_s_Ch = 30   mov $BGM_Play,"bgm\bgm_lg_2_01.ogg";ラックさんakusyumi
  if %BGM_s_Ch = 31   mov $BGM_Play,"bgm\BGM_MZ_2_07.ogg";Zakkyさんぼかぼか
  if %BGM_s_Ch = 32   mov $BGM_Play,"bgm\BGM_da_2_02.ogg";daiさんキョウ
  if %BGM_s_Ch = 33   mov $BGM_Play,"bgm\BGM_da_2_03.ogg";daiさん手と手を…
;  if %BGM_s_Ch = 34   mov $BGM_Play,"bgm\tsubaki.ogg";
;  if %BGM_s_Ch = 35   mov $BGM_Play,"bgm\tsubaki.ogg";
;  if %BGM_s_Ch = 36   mov $BGM_Play,"bgm\tsubaki.ogg";


  if %BGM_s_Ch = 1001    mov $BGM_Play,"bgm\bgm_ldsk_01.ogg";音楽室用
  if %BGM_s_Ch = 1002    mov $BGM_Play,"bgm0\d_7.ogg";音楽室用
  if %BGM_s_Ch = 1003    mov $BGM_Play,"bgm0\d_10.ogg";音楽室用
  if %BGM_s_Ch = 1004    mov $BGM_Play,"bgm0\d_25.ogg";音楽室用
  if %BGM_s_Ch = 1005    mov $BGM_Play,"bgm0\lgsk_SpiderLily.ogg";ED曲、音楽室用
  if %BGM_s_Ch = 1006    mov $BGM_Play,"bgm0\bgm_mz_2_06.ogg";クリア後タイトル画面（仮）

	;BGMを鳴らさずファイルパスを取得する為の命令
	if %bgm_mood_file_path_flg = 1 mov %bgm_mood_file_path_flg,0 : return

goto *BGM_Play_Mord




*Me_List                      ;ミュージックエフェクトデータパス一覧
;コメントアウトMEは未使用。ファイルも削除しました。
;もう一度復帰させることも容易ですので、お気軽にお申しつけください（dai


;  if %Me_Number =  1   mov $Me_Play,"ME\A1_03052.WAV"     ;飛行機のエンジン音（プロペラ△
;  if %Me_Number =  2   mov $Me_Play,"ME\A3_05051.WAV"     ;港の音△カモメ付き
  if %Me_Number =  3   mov $Me_Play,"ME\A3_05045.WAV"     ;嵐の岸辺の音
;  if %Me_Number =  4   mov $Me_Play,"ME\A1_03055.WAV"     ;船のエンジン音△
  if %Me_Number =  5   mov $Me_Play,"ME\A3_01005.WAV"     ;風の音△
;  if %Me_Number =  6   mov $Me_Play,"ME\A3_02012.WAV"     ;嵐の音△
;  if %Me_Number =  7   mov $Me_Play,"ME\A5_01033.WAV"     ;雨の音△
;  if %Me_Number =  8   mov $Me_Play,"ME\A1_12222.WAV"     ;古時計の秒針
;;;;;;  if %Me_Number =  9   mov $Me_Play,"ME\A5_08234.WAV"     ;柱時計
;;;;;;  if %Me_Number = 10   mov $Me_Play,"ME\A5_14445.WAV"     ;街の音△
  if %Me_Number = 11   mov $Me_Play,"ME\tokei_loop_L4.WAV" ;時計の音
;  if %Me_Number = 12   mov $Me_Play,"ME\rain2.WAV" ;雨の音○ 静かめ。
  if %Me_Number = 13   mov $Me_Play,"ME\Rain4_Long.WAV" ;雨の音雷鳴混じり○
;  if %Me_Number = 14   mov $Me_Play,"ME\STORM2.WAV" ;暴風の音○
;  if %Me_Number = 15   mov $Me_Play,"ME\tokei_husigi.wav" ;時計の音深い。○
  if %Me_Number = 16   mov $Me_Play,"ME\A5_14446.wav" ;幽霊のような風
  if %Me_Number = 17   mov $Me_Play,"ME\arasi.wav" ;嵐フランジャー
;  if %Me_Number = 18   mov $Me_Play,"ME\kaze_f.wav";風フランジャー
  if %Me_Number = 19   mov $Me_Play,"ME\tokei_f3.wav";時計フランジャー
  if %Me_Number = 20   mov $Me_Play,"ME\boiraa.wav" ;重く低い機械音
;  if %Me_Number = 21   mov $Me_Play,"ME\flangefemale.wav" ;不気味な赤ん坊声
;  if %Me_Number = 22   mov $Me_Play,"ME\bell_far.wav";電話（小さすぎ！
  if %Me_Number = 23   mov $Me_Play,"ME\bell.wav" ;電話音（大）
  if %Me_Number = 24   mov $Me_Play,"ME\gaya1.wav" ;がやがや
;  if %Me_Number = 25   mov $Me_Play,"ME\train1.WAV" ;電車、がたんごとん。
  if %Me_Number = 26   mov $Me_Play,"ME\suiteki.wav" ;洞窟の水滴　ピチョン
;  if %Me_Number = 27   mov $Me_Play,"ME\suiryuu.wav" ;洞窟の水流　サラサラ
  if %Me_Number = 28   mov $Me_Play,"ME\kaze_b.wav"	;壊れた風の音
;  if %Me_Number = 29   mov $Me_Play,"ME\town1.WAV" ;クラクション系
  if %Me_Number = 30   mov $Me_Play,"ME\town2.WAV" ;走行音系

;彼岸花追加

  if %Me_Number = 31   mov $Me_Play,"ME\child_og.wav" ;子供の声
;  if %Me_Number = 32   mov $Me_Play,"ME\wf_sl_bell2.wav" ;チャイム
  if %Me_Number = 33   mov $Me_Play,"ME\bird.wav" ;スズメに差し替えて下さい→※差し替え完了しました
 if %Me_Number = 34   mov $Me_Play,"ME\lgsk_warai.wav" ;女の子の笑い声。更新。
 if %Me_Number = 35   mov $Me_Play,"ME\lg_musi_yoru.wav" ;夜の虫の声

  ;if %Me_Number = 36   mov $Me_Play,"ME\洞窟の水滴.wav" ;
  ;if %Me_Number = 37   mov $Me_Play,"ME\洞窟の水滴.wav" ;
  ;if %Me_Number = 38   mov $Me_Play,"ME\洞窟の水滴.wav" ;
  ;if %Me_Number = 39   mov $Me_Play,"ME\洞窟の水滴.wav" ;
  ;if %Me_Number = 40   mov $Me_Play,"ME\洞窟の水滴.wav" ;


  ;時計用効果音
  if %Me_Number = 1050 mov $Me_Play,"sys_se\clock_ticking.wav"     ;時計、針の進む音
  if %Me_Number = 1051 mov $Me_Play,"sys_se\neziwav"     ;時計、針の巻き戻る音
  if %Me_Number = 1052 mov $Me_Play,"sys_se\tokei_bell1.WAV"     ;時計、１２時の鐘
  if %Me_Number = 1053 mov $Me_Play,"sys_se\tokei_bell2.WAV"     ;時計、１２時の鐘

 return





*Se_Play_List
;コメントアウトSEは未使用。ファイルも削除しました。
;もう一度復帰させることも容易ですので、お気軽にお申しつけください（dai
if %Se_Number =  1 mov $Se_Play,"SE\A5_06196.WAV"     ;タイトル
if %Se_Number =  2 mov $Se_Play,"SE\A5_02047.WAV"     ;エンド
if %Se_Number =  3 mov $Se_Play,"SE\A1_16258.WAV"     ;ぴゅーん（コミカル
if %Se_Number =  4 mov $Se_Play,"SE\A1_17270.WAV"     ;きゅぴーん（閃く
;if %Se_Number =  5 mov $Se_Play,"SE\A5_08263.WAV"     ;しゃきーん
;if %Se_Number =  6 mov $Se_Play,"SE\A1_07130.WAV"     ;叩く（対物軽く
if %Se_Number =  7 mov $Se_Play,"SE\A1_07131.WAV"     ;叩く（対物早く
if %Se_Number =  8 mov $Se_Play,"SE\A1_07132.WAV"     ;叩く（対物鈍く
if %Se_Number =  9 mov $Se_Play,"SE\A1_07133.WAV";ピュン。軽い。
if %Se_Number = 10 mov $Se_Play,"SE\A5_04105.WAV"     ;叩く（対人
if %Se_Number = 11 mov $Se_Play,"SE\A5_04107.WAV"     ;叩く（対人
if %Se_Number = 12 mov $Se_Play,"SE\A5_10316.WAV"     ;打撃音
if %Se_Number = 13 mov $Se_Play,"SE\A5_10317.WAV"     ;倒れる
if %Se_Number = 14 mov $Se_Play,"SE\A1_21333.WAV"     ;足音（近づく
if %Se_Number = 15 mov $Se_Play,"SE\A5_01023.WAV"     ;ドアを閉める（屋敷）
if %Se_Number = 16 mov $Se_Play,"SE\doa_s1.wav";ドアを開ける（屋敷）
if %Se_Number = 17 mov $Se_Play,"SE\A5_07201.WAV"     ;大扉を開ける（屋敷）
if %Se_Number = 18 mov $Se_Play,"SE\A5_07202.WAV"     ;大扉を閉める（屋敷）
if %Se_Number = 19 mov $Se_Play,"SE\nokku.wav"     ;ノック　イマイチ・軽い
if %Se_Number = 20 mov $Se_Play,"SE\A5_10315.WAV"     ;ぶぉん！（スイング音
;if %Se_Number = 21 mov $Se_Play,"SE\enrai.wav"     ;遠雷ゴロゴロ…。
if %Se_Number = 22 mov $Se_Play,"SE\horror.wav"     ;黄金の蝶々ME
;if %Se_Number = 23 mov $Se_Play,"SE\clock_grand_fathers3.wav";大時計初日終了ME・長いよー！se51はそこだけ切り抜いてあるので便利です。
if %Se_Number = 24 mov $Se_Play,"SE\07_se_umi.wav"  ;グロいME
if %Se_Number = 25 mov $Se_Play,"SE\A6_24636.WAV"   ;カギ開けの音
;if %Se_Number = 26 mov $Se_Play,"SE\05_se_umi.wav"  ;不思議不気味ME
if %Se_Number = 27 mov $Se_Play,"SE\rakurai.wav"     ;落雷！　ドーン！
;if %Se_Number = 28 mov $Se_Play,"SE\SE4.WAV"     ;静かなる低音ME
;if %Se_Number = 29 mov $Se_Play,"ME\bell.wav";黒電話・目覚しME
if %Se_Number = 30 mov $Se_Play,"SE\reload_h.WAV";リロード速い！
;if %Se_Number = 31 mov $Se_Play,"SE\katyari.wav"     ;カチャリ（チャリチャリ）
;if %Se_Number = 32 mov $Se_Play,"SE\kusari.WAV"     ;扉を開けようとして鎖
if %Se_Number = 33 mov $Se_Play,"SE\02se_umi.wav"  ;怖い物発見系ME
if %Se_Number = 34 mov $Se_Play,"SE\01se_umi.wav"  ;怖い物衝撃！ME
;if %Se_Number = 35 mov $Se_Play,"SE\blood.wav"     ;血ぼた
if %Se_Number = 36 mov $Se_Play,"SE\clash.wav"     ;煉獄の七杭
;if %Se_Number = 37 mov $Se_Play,"SE\ahaha.wav"     ;ハッハハハハ！
if %Se_Number = 38 mov $Se_Play,"SE\lowclick.wav"  ;ゴポリ、グリ…
if %Se_Number = 39 mov $Se_Play,"SE\garan.wav";ガランガラーン
;if %Se_Number = 40 mov $Se_Play,"SE\kon.wav" ;コーン
;if %Se_Number = 41 mov $Se_Play,"SE\kin.wav";キーン
;if %Se_Number = 42 mov $Se_Play,"SE\kan.wav";カーン
;if %Se_Number = 43 mov $Se_Play,"SE\reload_s.wav";リロードゆっくり！
;if %Se_Number = 44 mov $Se_Play,"SE\outorokku.wav";書斎のオートロック
;if %Se_Number = 45 mov $Se_Play,"SE\03se_umi.wav";残酷衝撃…！！ME
;if %Se_Number = 46 mov $Se_Play,"SE\raihuru3d.wav";ライフル発砲！
if %Se_Number = 47 mov $Se_Play,"SE\B1.WAV";バネの音：プイン
if %Se_Number = 48 mov $Se_Play,"SE\B5.WAV";バネの音：ポヨン
;if %Se_Number = 49 mov $Se_Play,"SE\shatta_akeru.wav";シャッター開ける
;if %Se_Number = 50 mov $Se_Play,"SE\shatta_toziru.wav";閉める
;if %Se_Number = 51 mov $Se_Play,"SE\bell1.wav";24時の鐘の音（システム時計の）
;if %Se_Number = 52 mov $Se_Play,"SE\terepooto.wav";テレポート
if %Se_Number = 53 mov $Se_Play,"SE\denwa_toru.wav";受話器を取る
if %Se_Number = 54 mov $Se_Play,"SE\patipati.wav";パチパチわーわー！
if %Se_Number = 55 mov $Se_Play,"SE\zyuu.wav";ジュウ！　肉を焼く音。
if %Se_Number = 56 mov $Se_Play,"SE\Z1.wav";メタ空間展開
if %Se_Number = 57 mov $Se_Play,"SE\ken1.wav";軌跡の剣の展開
;if %Se_Number = 58 mov $Se_Play,"SE\ken2.wav";剣戟の音（ちょっと軽い）
;if %Se_Number = 59 mov $Se_Play,"SE\red.wav";ベアト赤宣言

;if %Se_Number = 60 mov $Se_Play,"SE\doon1.wav";
;if %Se_Number = 61 mov $Se_Play,"SE\doon2.wav";
;if %Se_Number = 62 mov $Se_Play,"SE\doon3.wav";
;if %Se_Number = 63 mov $Se_Play,"SE\doon.wav";
;if %Se_Number = 64 mov $Se_Play,"SE\B4.wav";
;if %Se_Number = 65 mov $Se_Play,"SE\B_long.wav";

if %Se_Number = 66 mov $Se_Play,"SE\dannmaku.wav";
;if %Se_Number = 67 mov $Se_Play,"SE\04_se_umi.wav";怖い系SE

;if %Se_Number = 68 mov $Se_Play,"SE\kyuuteisha.wav";
if %Se_Number = 69 mov $Se_Play,"SE\bell_g.wav";キーンコーンカーンコーン
;if %Se_Number = 70 mov $Se_Play,"SE\pinpon.WAV";
;if %Se_Number = 71 mov $Se_Play,"SE\24chaim.wav";大広間の大時計の24時

;if %Se_Number = 72 mov $Se_Play,"SE\zangeki_01.wav";
;if %Se_Number = 73 mov $Se_Play,"SE\zangeki_02.wav";
;if %Se_Number = 74 mov $Se_Play,"SE\zangeki_03.wav";
;if %Se_Number = 75 mov $Se_Play,"SE\shunkanidou_06.wav";

;if %Se_Number = 76 mov $Se_Play,"SE\hakushu1.wav";
if %Se_Number = 77 mov $Se_Play,"SE\sl.WAV";スポットライト
if %Se_Number = 78 mov $Se_Play,"SE\goriri.WAV";石をする音（希望）
if %Se_Number = 79 mov $Se_Play,"SE\sharin1.wav";
if %Se_Number = 80 mov $Se_Play,"SE\sharin2.wav";
if %Se_Number = 81 mov $Se_Play,"SE\kamera1.wav";カメラのシャッター音

if %Se_Number = 82 mov $Se_Play,"SE\min_garagara.WAV";引き戸のガラガラ音
if %Se_Number = 83 mov $Se_Play,"SE\min_asioto.wav";すたすた。短い。
if %Se_Number = 84 mov $Se_Play,"SE\ahaha_hi_delay.wav";あひゃひゃひゃ……
if %Se_Number = 85 mov $Se_Play,"SE\riv_castanets_rythm.wav";カスタネット

if %Se_Number = 86 mov $Se_Play,"SE\siren.wav";サイレン
if %Se_Number = 87 mov $Se_Play,"SE\warai_wet2.WAV";良い笑い声

;if %Se_Number = 86 mov $Se_Play,"SE\AAAAA.wav";
;if %Se_Number = 87 mov $Se_Play,"SE\AAAAA.wav";
;if %Se_Number = 88 mov $Se_Play,"SE\AAAAA.wav";
;if %Se_Number = 89 mov $Se_Play,"SE\AAAAA.wav";
;if %Se_Number = 90 mov $Se_Play,"SE\AAAAA.wav";


;システム用効果音（錠前系の音）
if %Se_Number = 1000 mov $Se_Play,"sys_se\zyosys7.WAV"  ;ボタンを押す音１
if %Se_Number = 1001 mov $Se_Play,"sys_se\zyosys1.WAV"  ;ボタンを押す音２

if %Se_Number = 1005 mov $Se_Play,"sys_se\zyosys3.WAV"  ;キャンセル音
if %Se_Number = 1006 mov $Se_Play,"sys_se\ZS1.WAV"  	;EXIT音（ガラスが割れる音（小）に差替える）

if %Se_Number = 1010 mov $Se_Play,"sys_se\page.wav"     ;ページをめくる音

;if %Se_Number = 1020 mov $Se_Play,"sys_se\ZS1.WAV"     ;一人死ぬ（ガラスが割れる音（小）に差替える）
;if %Se_Number = 1021 mov $Se_Play,"sys_se\one_re.wav"     ;一人生き返る（ワインを注ぐ音等？）
if %Se_Number = 1022 mov $Se_Play,"sys_se\ZS1.WAV"     ;全員死ぬ
;if %Se_Number = 1023 mov $Se_Play,"sys_se\Z2.wav"     ;全員生き返る

;if %Se_Number = 1030 mov $Se_Play,"sys_se\mizu_d.wav"     ;セーブ音（水の落ちる音）
;if %Se_Number = 1031 mov $Se_Play,"sys_se\mizu_d2.wav"     ;セーブ音（水の落ちる音）

;if %Se_Number = 1040 mov $Se_Play,"sys_se\da_kane.wav"     ;スタート音（鐘の音、後で短い物に差替える））


;時計用効果音
;if %Se_Number = 1050 mov $Se_Play,"sys_se\clock_ticking.wav"     ;時計、針の進む音
;if %Se_Number = 1051 mov $Se_Play,"sys_se\nezi.wav"     ;時計、針の巻き戻る音
;if %Se_Number = 1052 mov $Se_Play,"sys_se\da_kane2.wav"     ;時計、１２時の鐘


;右クリック、キャラ追加時、Tips入手時の効果音
;if %Se_Number = 1060 mov $Se_Play,"sys_se\KT1.wav"		;キャラの追加（明るいバージョン）
;if %Se_Number = 1061 mov $Se_Play,"sys_se\mizu_ijou.wav"     ;キャラの状態変化（暗いバージョン）
;if %Se_Number = 1062 mov $Se_Play,"sys_se\KT1.wav"	     ;Tips入手A
;if %Se_Number = 1063 mov $Se_Play,"sys_se\mizu_ijou.wav"     ;Tips入手B;


;ガラスの割れる音（ランダム用、1100番の効果音が指定された、ランダムでガラスの割れる音を返す）
notif %Se_Number = 1100 jumpf
	rnd2 %ran,1,6
	if %ran = 1 mov $Se_Play,"sys_se\ZS1.WAV"
	if %ran = 2 mov $Se_Play,"sys_se\ZS2.WAV"
	if %ran = 3 mov $Se_Play,"sys_se\ZS3.WAV"
	if %ran = 4 mov $Se_Play,"sys_se\ZS4.WAV"
	if %ran = 5 mov $Se_Play,"sys_se\ZS5.WAV"
	if %ran = 6 mov $Se_Play,"sys_se\ZS6.WAV"
~


 goto *Se_Play_Mord














*text_cw                ;テキストクリックシステム

mov %BtnRes,99
;現在のテキストを取得（セーブデータで使用）
gettext $textlognow

getcursorpos %x,%y      ;テキストのx軸とy軸の拾得
ispage %Textcc12Flug    ;クリック待ちか、改ページか

erasetextwindow 0

mov %tmordflg,%Textcc12Flug


if %TextCC12Flug = 0 amsp TextCC1SpNum,%x,%y:vsp TextCC1SpNum,1
if %TextCC12Flug = 1 amsp TextCC2SpNum,%x,%y:vsp TextCC2SpNum,1
print 1

btndef clear
;getenter

*Text_cwlp

saveoff

;mov %BtnRes,99   ;仮　テキスト異常スキップ対策

delay 100

;デバック用（ファンクションキーに機能を追加）
;getfunction
;mov %debag_save_flg,1 ;デバッグ用。ファンクションキーを押さなくてもデバッグモードオン。
;        for %free21 = 0 to 1 step 0          ;ボタン入力を待つ
	textbtnwait %BtnRes
;        if %BtnRes > -4 break           ;ボタン入力があるまでループ
;        next
btndef clear
if %BtnRes = 0 goto *Text_cw_next
if %BtnRes = -3 goto *Text_cw_next
if %BtnRes = -11 goto *Text_cw_next
if %BtnRes = -19 goto *Text_cw_next

if %BtnRes = -1 && %rmordflg = 0 gosub *text_cw_rclk : btndef clear : goto *Text_cw
if %BtnRes = -2 gosub *text_cw_lookback : btndef clear : goto *Text_cw

if %BtnRes = 99 goto *Text_cw		;暫定テキスト異常スキップ対策

;デバッグ専用（配布時には上のコメントアウトを外して、したをコメントにする）
if %BtnRes = -10 && %rmordflg = 0 gosub *text_cw_rclk : goto *Text_cw
;if %BtnRes = -10 && %rmordflg = 0 end

;デバッグ専用（F1〜F12　-21〜-32に、５会話戻って定義リセットする機能を付加）
;notif %debag_save_flg = 1 jumpf
;	if %BtnRes = -21 mov %debag_load_no,%debag_save_no - 1 : end
;	if %BtnRes = -22 mov %debag_load_no,%debag_save_no - 2 : end
;	if %BtnRes = -23 mov %debag_load_no,%debag_save_no - 3 : end
;	if %BtnRes = -24 mov %debag_load_no,%debag_save_no - 4 : end
;	if %BtnRes = -25 mov %debag_load_no,%debag_save_no - 5 : end
;	if %BtnRes = -26 mov %debag_load_no,%debag_save_no - 6 : end
;	if %BtnRes = -27 mov %debag_load_no,%debag_save_no - 7 : end
;	if %BtnRes = -28 mov %debag_load_no,%debag_save_no - 8 : end
;~

;notif %BtnRes = -29 jumpf
;	;雨のON,OFF
;	if %efespflg = 0 dllefe 1,1 : jumpf
;	if %efespflg = 1 dllefe_off : jumpf
;~;;

;notif %BtnRes = -30 jumpf
	;スプライトの消去
;	csp -1
;~

;notif %BtnRes = -31 jumpf
	;BGMのON、OFFプログラム
;	E_A
;~

;notif %BtnRes = -32 jumpf ;自動セーブモードのON、OFF
;	notif %debag_save_flg = 1 goto *autosave_skip
;		mov %debag_save_flg,0
;		lsp 10,":s#FF0000自動セーブＯＦＦ（左クリックをしてください）",10,400 : print 1
;		delay 2000
;		csp 10 : print 1
;		jumpf
;	*autosave_skip

;		mov %debag_save_flg,1
;		lsp 10,":s#FF0000自動セーブＯＮ（左クリックをしてください）",10,400
;		mov %debag_load_no,0
;		mov %debag_save_no,800
;		mov %debag_save_count,0 : savegame %debag_save_no : inc %debag_save_no
;		print 1
;		delay 2000
;		csp 10 : print 1
;~

;デバッグモードここまで

goto *text_cwlp

*Text_cw_next

btndef clear
btndef ""

vsp TextCC1SpNum,0 : vsp TextCC2SpNum,0
print 1

if %tmordflg = 0 jumpf

if %TextCC12Flug = 1 && %backlogTotalNum < BacklogpageMax  inc %backlogTotalNum
if %TextCC12Flug = 1 getlog $Textlog,0 : gosub *text_tagsave

~
texec
erasetextwindow 1

;デバッグモード指定改ページに一回セーブを行う。
if %debag_save_flg = 0 jumpf
notif %TextCC12Flug = 1 jumpf
	if %debag_save_no < 800 mov %debag_save_no,800
	if %debag_save_no >= 820 mov %debag_save_no,800
	inc %debag_save_count
	if %debag_save_count >= 3 mov %debag_save_count,0 : savegame %debag_save_no : inc %debag_save_no
~
;ここまで

return


*Text_cw_rclk

btndef ""


;if %intro_prog_flg = off jumpf       ;スプライトプログラムが動いているかの確認

;mov %intro_prog_flg,off           ;スプライトプログラムのフラグをオフ
;layermessage 10,"clear/10"           ;スプライトプログラムのスプライト消去
;layermessage 10,"program_end/10"           ;スプライトプログラムのプログラム停止
;csp 10

~

;セーブ画面に入る前にセーブデータ用スクリーンショット画像を取得
getscreenshot 80,60
texthide     ;テキストを隠す

vsp TextCC1SpNum,0 : vsp TextCC2SpNum,0
print 1
gosub *rmenu_csutom


;取得していたスクリーンショットの破棄
deletescreenshot
textshow

return

*text_tagsave

;現在ページをログにコピーする
 mov $%BacklogNum,$Textlog

;ログの現在登録位置の増加

 if %BacklogNum = BacklogpageMax mov %BacklogNum,Backlogpage0  ;ログ位置が最大値であった場合
 inc %BacklogNum

return

*text_cw_lookback

if %backlogTotalNum < 1 return
 vsp TextCC1SpNum,0
 vsp TextCC2SpNum,0
textoff
 print 1
 mov %backloglook,BacklogNum

 ;バックログ表示画面指定

  ;表示ページの初期化
   mov %Readbacklogpage,1

  ;ログの頭だし

   mov %backloglook,%BacklogNum
   dec %backloglook
   if %backloglook < Backlogpage1 mov %backloglook,BacklogpageMax


*text_cw_lookback2

btndef ""
  ;ボタン配置

   lsp backscreen,":a;bmp\introduction_back1.bmp",0,0
   lsp backlogupbtn,":r;bmp\system\UONCUR.BMP",0,0     ;座標は仮
   lsp backlogdownbtn,":r;bmp\system\DONCUR.BMP",0,450

  ;ボタンセット

  ;テキストセット

itoa $Free1,%backloglook          ;ログ表示

   logsp backlogtext,$%backloglook,20,20,#FFFFaa

  ;現在表示の最大値最低値の判定

  if %backlogTotalNum = 1 vsp backlogdownbtn,0 : vsp backlogupbtn,0 : jumpf

  if %Readbacklogpage = %backlogTotalNum    spbtn backlogdownbtn,backlogdownbtn : vsp backlogupbtn,0 : jumpf
  if %Readbacklogpage = mini    spbtn backlogupbtn,backlogupbtn : vsp backlogdownbtn,0 : jumpf
  if %Readbacklogpage = Max    spbtn backlogdownbtn,backlogdownbtn : vsp backlogupbtn,0 : jumpf


   spbtn backlogupbtn,backlogupbtn
   spbtn backlogdownbtn,backlogdownbtn

~

  ;表示
  print 1

  ;入力受付

   *backlogbtn
    btnwait2 %BtnRes

    if %BtnRes = backlogupbtn &&  %Readbacklogpage < MAX && %Readbacklogpage < %backlogTotalNum inc %Readbacklogpage : dec %backloglook : goto *text_cw_lookback3

    if %BtnRes = backlogdownbtn & %Readbacklogpage > mini & %Readbacklogpage <= %backlogTotalNum dec %Readbacklogpage : inc %backloglook : goto *text_cw_lookback3

    if %BtnRes = -2 & %Readbacklogpage < Max & %Readbacklogpage < %backlogTotalNum inc %Readbacklogpage : dec %backloglook : goto *text_cw_lookback3
    if %BtnRes = -3 & %Readbacklogpage > mini dec %Readbacklogpage : inc %backloglook : goto *text_cw_lookback3

    if %BtnRes = -3 & %Readbacklogpage <= mini jumpf
    if %BtnRes = -1 jumpf                 ;右クリックで抜ける
    if %BtnRes = -10 jumpf                 ;ＥＳＣで抜ける
    if %BtnRes = 0 jumpf                 ;空打ちで抜ける

   goto *backlogbtn

~

   mov %tmordflg,0    ;テキスト表示モード切替

csp backlogupbtn
csp backlogdownbtn
csp backscreen
csp backlogtext

;csp -2
texton
print 1
return

;ログのループ対応
*text_cw_lookback3

 if %backloglook <  Backlogpage1 mov %backloglook,BacklogpageMax
 if %backloglook >  BacklogpageMax mov %backloglook,Backlogpage1

goto *text_cw_lookback2

;*********************************************************
;右クリックカスタムシステム
;右クリックで最初に現れる関数
;*********************************************************

;*rmenu_csutom     ;右クリック画面表示

  textoff
  mov %tmordflg,1

;  *rmenu_custom_spset

  if %remnu_data = on lsp rmenu_databtn,":a;bmp\system\Menu_data.bmp",180,122

   lsp rmenu_back,":a;bmp\system\c.bmp",0,0
   lsp rmenu_btn1,":c/3,0,3;bmp\Menu_TipsAll.BMP",180,186
   lsp rmenu_btn2,":c/3,0,3;bmp\Menu_save.bmp",180,250
   lsp rmenu_btn3,":c/3,0,3;bmp\Menu_load.bmp",180,314
   lsp rmenu_btn_Exit,":c/3,0,3;bmp\Exit.bmp",180,378

   print 4,500

;  *rmenu_custom_btset

   btndef ""

  if %remnu_data = on   spbtn rmenu_databtn,rmenu_databtn
   spbtn rmenu_btn1,rmenu_btn1
   spbtn rmenu_btn2,rmenu_btn2
   spbtn rmenu_btn3,rmenu_btn3
   spbtn rmenu_btn_Exit,rmenu_btn_Exit

; *rmenu_custom_btlp

  btnwait2 %BtnRes

    if %BtnRes = rmenu_databtn goto *rmord_data
    if %BtnRes = rmenu_btn1 goto *rmord_introduction
;    if %BtnRes = rmenu_btn2 goto *rmord_save
    if %BtnRes = rmenu_btn2 goto *savemode
    if %BtnRes = rmenu_btn3 goto *loadmode

    if %BtnRes = rmenu_btn_Exit goto *rmord_cls     ;Ｅｘｉｔボタンで背景消去
    if %BtnRes = -1 jumpf                 ;右クリックで抜ける
    if %BtnRes = -10 jumpf                 ;ＥＳＣで抜ける

;  goto *rmenu_custom_btlp

~
;mov %tmordflg,0

   if %remnu_data = on csp rmenu_databtn
csp rmenu_back
csp rmenu_btn1
csp rmenu_btn2
csp rmenu_btn3
csp rmenu_btn_Exit

print 4,500

texton

return


;*****************************************
;背景の鑑賞
;***************************************
*rmord_cls

   if %remnu_data = on vsp rmenu_databtn,0
vsp rmenu_back,0
vsp rmenu_btn1,0
vsp rmenu_btn2,0
vsp rmenu_btn3,0
vsp rmenu_btn_Exit,0

print 10,500

textoff
click

   if %remnu_data = on  vsp rmenu_databtn,1
vsp rmenu_back,1
vsp rmenu_btn1,1
vsp rmenu_btn2,1
vsp rmenu_btn3,1
vsp rmenu_btn_Exit,1

print 10,200
  goto *rmenu_custom_btlp

;************************************************
;セーブデータ作成
;************************************************

*rmord_save

btndef ""
;背景表示
lsp introduction_back,":c;bmp\black.bmp",0,0

systemcall save

csp introduction_back
print 1

 goto *rmenu_custom_btset

*rmord_load

btndef ""
;背景表示
lsp introduction_back,":c;bmp\black.bmp",0,0

systemcall load

csp introduction_back
print 1

 goto *rmenu_custom_btset


;*************************************
;文章表示前の割り込みルーチン
*pretext
	if %save_on_flg = on saveon
return
;*************************************


;*************************************
; English patch troubleshooter [Yirba]
; Created: 14 June 2012
; Modified: 20 August 2013
; Description: Display error if patch is incorrectly installed

*yirba_troubleshoot
	fileexist %yirba_troubleshoot_verified,"bmp2\tati\tom\1\tom_d1.bmp"
	if %yirba_troubleshoot_verified=0 goto *yirba_troubleshoot_error
	*yirba_troubleshoot_continue
return

*yirba_troubleshoot_error
	setwindow 50,300,590,0,20,20,0,15,20,1,1,#ffffff,0,0,639,479
	lsp 100,"bmp/background/efe/trans_error.bmp",0,0
	;locate 0,10
	select `Visit Spider Lily Translations website`,*yirba_troubleshoot_web,`Quit the game`,*yirba_troubleshoot_quit,`Continue anyway (not recommended)`,*yirba_troubleshoot_continue
	goto *yirba_troubleshoot_error

*yirba_troubleshoot_web
	shell "http://www.spiderlilytranslations.com/?2t"
	goto *yirba_troubleshoot_error

*yirba_troubleshoot_quit
	end
